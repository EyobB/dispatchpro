import{a as J}from"./chunk-TSAYU77S.js";import{a as f}from"./chunk-CU4JJHDF.js";import{a as K,d as $,e as h,f as y,g as Z,h as q,i as w}from"./chunk-5TTF5I2A.js";import{j as B,k as V,l as _}from"./chunk-KOSR3TVL.js";import{Bb as D,Ha as W,Ia as p,L as O,Na as u,R as g,Sa as v,X as j,Xa as l,Y as M,cb as s,eb as n,fb as t,gb as S,ia as H,jb as P,k as F,mb as x,nb as C,sb as a,tb as L,ub as b,vb as G,wb as z}from"./chunk-N44I7YIH.js";var d=class e{static NEW_RATE_CONFIRMATIONS="new-rate-confirmations";static DELIVERED_ORDERS="delivered-orders";static DRIVER_WARNINGS="driver-warnings";static TRUCKS_WARNINGS="trucks-warnings";constructor(){}getNotifications(){return F([{type:"new-rate-confirmations",count:3,message:"new rate confirmations",link:"/dispatcher/rate-confirmations"},{type:"delivered-orders",count:2,message:"order(s) delivered",link:"/dispatcher/orders?status=delivered"},{type:"driver-warnings",count:2,message:"driver(s) with warnings",link:"/dispatcher/drivers?status=warning"},{type:"trucks-warnings",count:4,message:"truck(s) with warnings",link:"/dispatcher/trucks?status=warning"}])}static \u0275fac=function(o){return new(o||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};function ne(e,r){e&1&&(n(0,"h1",15),a(1,"Dispatcher"),t())}function ie(e,r){e&1&&(n(0,"span"),a(1,"Rate Conf"),t())}function oe(e,r){if(e&1&&(n(0,"sup",16),a(1),t()),e&2){let o=C();p(),b(" ",o.pendingRateConsCount," ")}}function re(e,r){e&1&&(n(0,"span"),a(1,"Orders"),t())}function ae(e,r){if(e&1&&(n(0,"sup",16),a(1),t()),e&2){let o=C();p(),b(" ",o.deliveredOrdersCount," ")}}function pe(e,r){e&1&&(n(0,"span"),a(1,"Invoices"),t())}function se(e,r){e&1&&(n(0,"span"),a(1,"Payments"),t())}function le(e,r){e&1&&(n(0,"span"),a(1,"Trucks"),t())}function me(e,r){if(e&1&&(n(0,"sup",16),a(1),t()),e&2){let o=C();p(),b(" ",o.trucksWarningCount," ")}}function ce(e,r){e&1&&(n(0,"span"),a(1,"Drivers"),t())}function de(e,r){if(e&1&&(n(0,"sup",16),a(1),t()),e&2){let o=C();p(),b(" ",o.driverWarningCount," ")}}function ue(e,r){e&1&&(n(0,"span"),a(1,"Users"),t())}function fe(e,r){e&1&&(n(0,"span"),a(1,"Reports"),t())}function ge(e,r){e&1&&(n(0,"span"),a(1,"Settings"),t())}function ve(e,r){e&1&&(n(0,"span"),a(1,"\u23EA"),t())}function Ce(e,r){e&1&&(n(0,"span"),a(1,"\u23E9"),t())}var N=class e{constructor(r){this.notificationsService=r}isCollapsed=!1;pendingRateConsCount=0;deliveredOrdersCount=0;driverWarningCount=0;trucksWarningCount=0;ngOnInit(){this.loadNotifications()}loadNotifications(){this.notificationsService.getNotifications().subscribe(r=>{this.pendingRateConsCount=r.find(o=>o.type===d.NEW_RATE_CONFIRMATIONS)?.count||0,this.deliveredOrdersCount=r.find(o=>o.type===d.DELIVERED_ORDERS)?.count||0,this.driverWarningCount=r.find(o=>o.type===d.DRIVER_WARNINGS)?.count||0,this.trucksWarningCount=r.find(o=>o.type===d.TRUCKS_WARNINGS)?.count||0})}toggleSidebar(){this.isCollapsed=!this.isCollapsed}static \u0275fac=function(o){return new(o||e)(u(d))};static \u0275cmp=v({type:e,selectors:[["app-sidebar"]],decls:55,vars:17,consts:[[1,"transition-all","duration-300","h-[calc(100vh-4rem)]","bg-green-900","text-white","p-4","overflow-x-hidden","flex","flex-col",3,"ngClass"],["class","text-2xl font-bold mb-6",4,"ngIf"],[1,"space-y-4","text-lg","flex-1"],["routerLink","/dispatcher/rate-confirmations",1,"flex","items-center","gap-2","cursor-pointer","relative"],[4,"ngIf"],["class","bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow",4,"ngIf"],["routerLink","/dispatcher/orders",1,"flex","items-center","gap-2","cursor-pointer","relative"],["routerLink","/dispatcher/invoices",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/payments",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/trucks",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/drivers",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/users",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/reports",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/settings",1,"flex","items-center","gap-2","cursor-pointer"],[1,"mt-4","p-2","rounded","bg-green-800","hover:bg-green-700","focus:outline-none","w-full","flex","justify-center",3,"click"],[1,"text-2xl","font-bold","mb-6"],[1,"bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","text-xs","font-bold","shadow"]],template:function(o,i){o&1&&(n(0,"nav",0),l(1,ne,2,0,"h1",1),n(2,"ul",2)(3,"li")(4,"a",3)(5,"span"),a(6,"\u{1F4D1}"),t(),l(7,ie,2,0,"span",4)(8,oe,2,1,"sup",5),t()(),n(9,"li")(10,"a",6)(11,"span"),a(12,"\u{1F4E6}"),t(),l(13,re,2,0,"span",4)(14,ae,2,1,"sup",5),t()(),n(15,"li")(16,"a",7)(17,"span"),a(18,"\u{1F9FE}"),t(),l(19,pe,2,0,"span",4),t()(),n(20,"li")(21,"a",8)(22,"span"),a(23,"\u{1F4B0}"),t(),l(24,se,2,0,"span",4),t()(),n(25,"li")(26,"a",9)(27,"span"),a(28,"\u{1F69A}"),t(),l(29,le,2,0,"span",4)(30,me,2,1,"sup",5),t()(),n(31,"li")(32,"a",10)(33,"span"),a(34,"\u{1F9D1}\u200D\u2708\uFE0F"),t(),l(35,ce,2,0,"span",4)(36,de,2,1,"sup",5),t()(),n(37,"li")(38,"a",11)(39,"span"),a(40,"\u{1F465}"),t(),l(41,ue,2,0,"span",4),t()(),n(42,"li")(43,"a",12)(44,"span"),a(45,"\u{1F4CA}"),t(),l(46,fe,2,0,"span",4),t()(),n(47,"li")(48,"a",13)(49,"span"),a(50,"\u2699\uFE0F"),t(),l(51,ge,2,0,"span",4),t()()(),n(52,"button",14),x("click",function(){return i.toggleSidebar()}),l(53,ve,2,0,"span",4)(54,Ce,2,0,"span",4),t()()),o&2&&(s("ngClass",i.isCollapsed?"w-16":"w-60"),p(),s("ngIf",!i.isCollapsed),p(6),s("ngIf",!i.isCollapsed),p(),s("ngIf",i.pendingRateConsCount!==void 0&&!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(),s("ngIf",i.deliveredOrdersCount!==void 0&&!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(),s("ngIf",i.trucksWarningCount!==void 0&&!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(),s("ngIf",i.driverWarningCount!==void 0&&!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(5),s("ngIf",!i.isCollapsed),p(2),s("ngIf",!i.isCollapsed),p(),s("ngIf",i.isCollapsed))},dependencies:[w,y,_,B],encapsulation:2})};var xe=()=>["/dispatcher-detail"];function be(e,r){if(e&1){let o=P();n(0,"li",19)(1,"button",20),x("click",function(){let c=j(o).$implicit,I=C(2);return M(I.goToPage(c.link))}),n(2,"span"),a(3),t()()()}if(e&2){let o=r.$implicit;p(3),G("",o.count," ",o.message,"")}}function Se(e,r){if(e&1&&(n(0,"div",15)(1,"div",16),a(2,"Notifications"),t(),n(3,"ul"),l(4,be,4,2,"li",17),t(),n(5,"div",18),a(6,"Click to view details"),t()()),e&2){let o=C();p(4),s("ngForOf",o.notifications)}}var A=class e{constructor(r,o,i,c,I){this.dispatcherService=r;this.notificationsService=o;this.userService=i;this.router=c;this.eRef=I}showNotifications=!1;company=null;notifications=[];totalNotifications=0;ngOnInit(){this.company=this.dispatcherService.getDispatcher(),this.notificationsService.getNotifications().subscribe(r=>{this.notifications=r,this.totalNotifications=r.reduce((o,i)=>o+i.count,0)})}logout(){this.userService.logout(),this.router.navigate(["/login"])}get loggedIn(){return this.userService.getLoggedInUser()}toggleNotifications(){this.showNotifications=!this.showNotifications}goToPage(r){this.showNotifications=!1,this.router.navigateByUrl(r)}onDocumentClick(r){this.showNotifications&&!this.eRef.nativeElement.contains(r.target)&&(this.showNotifications=!1)}static \u0275fac=function(o){return new(o||e)(u(J),u(d),u(f),u(h),u(H))};static \u0275cmp=v({type:e,selectors:[["app-header"]],hostBindings:function(o,i){o&1&&x("click",function(I){return i.onDocumentClick(I)},!1,W)},decls:28,vars:9,consts:[[1,"w-full","bg-green-900","text-white","flex","items-center","justify-between","px-6","py-3","shadow"],[1,"flex","items-center","gap-3","hidden","sm:flex"],[1,"text-4xl"],[1,"font-bold","text-lg","hover:underline",3,"routerLink"],[1,"text-xs","text-green-100"],[1,"flex","justify-between","gap-6","relative","w-full","sm:w-auto"],[1,"relative","hidden","sm:inline-flex"],[1,"relative","focus:outline-none",3,"click"],[1,"text-2xl"],[1,"absolute","-top-1","-right-2","bg-red-500","text-xs","rounded-full","px-1"],["class","absolute right-0 mt-2 w-64 bg-white text-green-900 rounded shadow-lg z-50 border border-green-100",4,"ngIf"],[1,"flex","w-full","items-center","justify-between","sm:justify-normal","sm:w-auto","gap-2"],[1,"flex","items-center","gap-2"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-1","rounded","flex","items-center","gap-1","ml-2","sm:ml-0",3,"click"],[1,"text-lg"],[1,"absolute","right-0","mt-2","w-64","bg-white","text-green-900","rounded","shadow-lg","z-50","border","border-green-100"],[1,"p-3","border-b","border-green-100","font-semibold","text-green-800"],["class","border-b border-green-100",4,"ngFor","ngForOf"],[1,"px-4","py-2","text-xs","text-gray-500","border-t","border-green-100"],[1,"border-b","border-green-100"],[1,"w-full","text-left","px-4","py-2","hover:bg-green-50","flex","items-center","gap-2",3,"click"]],template:function(o,i){o&1&&(n(0,"header",0)(1,"div",1)(2,"span",2),a(3,"\u{1F3E2}"),t(),n(4,"div")(5,"a",3),a(6),t(),n(7,"div",4),a(8),t()()(),n(9,"div",5)(10,"div",6)(11,"button",7),x("click",function(){return i.toggleNotifications()}),n(12,"span",8),a(13,"\u{1F514}"),t(),n(14,"span",9),a(15),t()(),l(16,Se,7,1,"div",10),t(),n(17,"div",11)(18,"div",12)(19,"span",8),a(20,"\u{1F464}"),t(),n(21,"span"),a(22),t()(),n(23,"button",13),x("click",function(){return i.logout()}),n(24,"span",14),a(25,"\u238B"),t(),n(26,"span"),a(27,"Logout"),t()()()()()),o&2&&(p(5),s("routerLink",D(8,xe)),p(),b(" ",i.company==null?null:i.company.name," "),p(2),z(" ",i.company==null?null:i.company.address," \u2022 ",i.company==null?null:i.company.phone," \u2022 ",i.company==null?null:i.company.email," "),p(7),L(i.totalNotifications),p(),s("ngIf",i.showNotifications),p(6),L(i.loggedIn==null?null:i.loggedIn.name))},dependencies:[y,_,V],encapsulation:2})};var _e=()=>({exact:!0}),R=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=v({type:e,selectors:[["app-mobile-nav"]],decls:20,vars:2,consts:[[1,"fixed","bottom-0","left-0","w-full","bg-green-900","text-white","shadow-lg","z-50"],[1,"flex","justify-around","items-center","py-2"],["routerLink","/driver/orders","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition",3,"routerLinkActiveOptions"],[1,"text-2xl"],[1,"text-xs","mt-1"],["routerLink","/driver/payments","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition"],["routerLink","/driver/reports","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition"]],template:function(o,i){o&1&&(n(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2)(4,"span",3),a(5,"\u{1F4E6}"),t(),n(6,"span",4),a(7,"Orders"),t()()(),n(8,"li")(9,"a",5)(10,"span",3),a(11,"\u{1F4B0}"),t(),n(12,"span",4),a(13,"Payments"),t()()(),n(14,"li")(15,"a",6)(16,"span",3),a(17,"\u{1F4CA}"),t(),n(18,"span",4),a(19,"Reports"),t()()()()()),o&2&&(p(3),s("routerLinkActiveOptions",D(1,_e)))},dependencies:[y,Z],encapsulation:2})};function ye(e,r){e&1&&S(0,"app-header",7)}function Ee(e,r){e&1&&(n(0,"aside",8),S(1,"app-sidebar"),t())}function Ie(e,r){e&1&&(n(0,"main",9)(1,"div",10),S(2,"router-outlet"),t()())}function De(e,r){e&1&&(n(0,"main",11)(1,"div",12),S(2,"router-outlet"),t()())}function we(e,r){e&1&&S(0,"app-mobile-nav",13)}var T=class e{constructor(r){this.userService=r}get isUserLoggedIn(){return this.userService.isLoggedIn()}static \u0275fac=function(o){return new(o||e)(u(f))};static \u0275cmp=v({type:e,selectors:[["app-root"]],decls:7,vars:5,consts:[[1,"min-h-screen","bg-gray-100"],["class","sticky top-0 z-20",4,"ngIf"],[1,"flex"],["class","sticky top-[64px] h-[calc(100vh-64px)] z-10 hidden md:block",4,"ngIf"],["class","flex-1",4,"ngIf"],["class","flex-1 p-6 pb-20 md:pb-6",4,"ngIf"],["class","md:hidden",4,"ngIf"],[1,"sticky","top-0","z-20"],[1,"sticky","top-[64px]","h-[calc(100vh-64px)]","z-10","hidden","md:block"],[1,"flex-1"],[1,"bg-white","border","rounded","shadow","h-full"],[1,"flex-1","p-6","pb-20","md:pb-6"],[1,"bg-white","border","rounded","shadow","p-6","h-full"],[1,"md:hidden"]],template:function(o,i){o&1&&(n(0,"div",0),l(1,ye,1,0,"app-header",1),n(2,"div",2),l(3,Ee,2,0,"aside",3)(4,Ie,3,0,"main",4)(5,De,3,0,"main",5),t(),l(6,we,1,0,"app-mobile-nav",6),t()),o&2&&(p(),s("ngIf",i.isUserLoggedIn),p(2),s("ngIf",i.isUserLoggedIn),p(),s("ngIf",!i.isUserLoggedIn),p(),s("ngIf",i.isUserLoggedIn),p(),s("ngIf",i.isUserLoggedIn))},dependencies:[_,w,$,N,A,R],encapsulation:2})};var m=(e,r)=>{let o=g(f),i=g(h),c=o.getLoggedInUser();return c&&c.roles.includes("dispatcher")?!0:i.createUrlTree(["/login"])};var E=(e,r)=>{let o=g(f),i=g(h),c=o.getLoggedInUser();return c&&c.roles.includes("driver")?!0:i.createUrlTree(["/login"])};var Y=(e,r)=>{let o=g(f),i=g(h);return o.getLoggedInUser()?!0:i.createUrlTree(["/login"])};var ee=[{path:"login",loadComponent:()=>import("./chunk-52GQWS4X.js").then(e=>e.LoginComponent)},{path:"change-password",loadComponent:()=>import("./chunk-GIULDDPU.js").then(e=>e.ChangePasswordComponent),canActivate:[Y]},{path:"dispatcher/rate-confirmations",loadComponent:()=>import("./chunk-F4XV36DT.js").then(e=>e.RateConfirmationsComponent),canActivate:[m]},{path:"dispatcher/rate-confirmations/:id",loadComponent:()=>import("./chunk-DK22XQ7F.js").then(e=>e.RateConfirmationDetailComponent),canActivate:[m]},{path:"dispatcher/sign-rate-confirmation/:id",loadComponent:()=>import("./chunk-6G5GLAFW.js").then(e=>e.SignRateConfirmationComponent),canActivate:[m]},{path:"dispatcher/orders",loadComponent:()=>import("./chunk-XDGKGTMU.js").then(e=>e.OrdersComponent),canActivate:[m]},{path:"dispatcher/orders/:id",loadComponent:()=>import("./chunk-2HSYCV27.js").then(e=>e.OrderDetailComponent),canActivate:[m]},{path:"dispatcher/invoices",loadComponent:()=>import("./chunk-UOBELFCH.js").then(e=>e.InvoicesComponent),canActivate:[m]},{path:"dispatcher/invoices/:id",loadComponent:()=>import("./chunk-TDM4E5DW.js").then(e=>e.InvoiceDetailComponent),canActivate:[m]},{path:"dispatcher/payments",loadComponent:()=>import("./chunk-AGFPH544.js").then(e=>e.PaymentsComponent),canActivate:[m]},{path:"dispatcher/trucks",loadComponent:()=>import("./chunk-GK4FQBZ4.js").then(e=>e.TrucksComponent),canActivate:[m]},{path:"dispatcher/trucks/:id",loadComponent:()=>import("./chunk-K3GSF3MI.js").then(e=>e.TruckDetailComponent),canActivate:[m]},{path:"dispatcher/drivers",loadComponent:()=>import("./chunk-XUNONSVS.js").then(e=>e.DriversComponent),canActivate:[m]},{path:"dispatcher/drivers/:id",loadComponent:()=>import("./chunk-JS34JNAR.js").then(e=>e.DriverDetailComponent),canActivate:[m]},{path:"dispatcher/users",loadComponent:()=>import("./chunk-VT7JXCXH.js").then(e=>e.UsersComponent),canActivate:[m]},{path:"dispatcher/reports",loadComponent:()=>import("./chunk-QEL3VXKZ.js").then(e=>e.ReportsComponent),canActivate:[m]},{path:"dispatcher/settings",loadComponent:()=>import("./chunk-QITROTOU.js").then(e=>e.SettingsComponent),canActivate:[m]},{path:"driver/orders",loadComponent:()=>import("./chunk-UOMH4SUV.js").then(e=>e.DriverOrdersComponent),canActivate:[E]},{path:"driver/order-detail/:id",loadComponent:()=>import("./chunk-TSX3CPZR.js").then(e=>e.OrderDetailComponent),canActivate:[E]},{path:"driver/payments",loadComponent:()=>import("./chunk-MWU25VNY.js").then(e=>e.PaymentsComponent),canActivate:[E]},{path:"driver/reports",loadComponent:()=>import("./chunk-FEHN4XZB.js").then(e=>e.ReportsComponent),canActivate:[E]},{path:"",redirectTo:"orders",pathMatch:"full"}];var te={providers:[q(ee)]};K(T,te);
