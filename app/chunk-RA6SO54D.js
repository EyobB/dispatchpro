import{a as j}from"./chunk-DQ73SBEH.js";import{a as N,c as z,f as A,m as L}from"./chunk-SCIWFCTH.js";import{e as F}from"./chunk-5TTF5I2A.js";import{j as T,k as D,l as V}from"./chunk-KOSR3TVL.js";import{Db as M,Ia as o,Na as h,Sa as y,X as u,Xa as x,Y as g,Z as w,_ as C,cb as c,eb as n,fb as t,gb as O,jb as f,mb as v,nb as d,sb as r,tb as p,ub as _,wb as S,xb as E,yb as I,zb as k}from"./chunk-N44I7YIH.js";var R=(s,i,e)=>({"bg-green-100 text-green-800":s,"bg-yellow-100 text-yellow-800":i,"bg-red-100 text-red-800":e});function W(s,i){if(s&1){let e=f();n(0,"label",18)(1,"input",23),k("ngModelChange",function(l){let m=u(e).$implicit,b=d(2);return I(b.selectedStatusesMap[m],l)||(b.selectedStatusesMap[m]=l),g(l)}),v("change",function(){u(e);let l=d(2);return g(l.onStatusFilterChange())}),t(),r(2),t()}if(s&2){let e=i.$implicit,a=d(2);o(),E("ngModel",a.selectedStatusesMap[e]),o(),_(" ",e," ")}}function B(s,i){if(s&1){let e=f();n(0,"div",16)(1,"div",17)(2,"label",18)(3,"input",19),v("change",function(l){u(e);let m=d();return g(m.toggleSelectAllStatuses(l))}),t(),n(4,"span",20),r(5,"Select/Deselect All"),t()()(),n(6,"div",21),x(7,W,3,2,"label",22),t()()}if(s&2){let e=d();o(3),c("checked",e.allStatusesSelected()),o(4),c("ngForOf",e.orderStatuses)}}function H(s,i){if(s&1){let e=f();n(0,"div",24),v("click",function(){u(e);let l=d();return g(l.showStatusDropdown=!1)}),t()}}function P(s,i){if(s&1&&(n(0,"div",29),r(1),t()),s&2){let e=d().$implicit;o(),p(e.driver.phone)}}function G(s,i){if(s&1&&(n(0,"div",33)(1,"div",34),r(2,"Truck: "),n(3,"span",35),r(4),t()()()),s&2){let e=d().$implicit;o(4),p(e.truck.plate||"\u2014")}}function q(s,i){if(s&1){let e=f();n(0,"tr",25)(1,"td",26)(2,"div"),r(3),t(),n(4,"span",27),r(5),t()(),n(6,"td",28)(7,"div",20),r(8),t(),n(9,"div",29),r(10),t()(),n(11,"td",28)(12,"div"),r(13),t(),n(14,"div",29),r(15),t()(),n(16,"td",28)(17,"div"),r(18),t(),n(19,"div",29),r(20),t()(),n(21,"td",28)(22,"div"),r(23),t(),x(24,P,2,1,"div",30)(25,G,5,1,"div",31),t(),n(26,"td",28)(27,"button",32),v("click",function(){let l=u(e).$implicit,m=d();return g(m.viewOrder(l.id))}),r(28," View "),t()()()}if(s&2){let e=i.$implicit;o(3),p(e.orderNumber),o(),c("ngClass",M(16,R,e.status==="Delivered",e.status==="In Transit",e.status==="Cancelled")),o(),_(" ",e.status," "),o(3),p(e.customerName),o(2),p(e.customerContact),o(3),p(e.origin.street),o(2),S("",e.origin.city,", ",e.origin.state," ",e.origin.zip,""),o(3),p(e.destination.street),o(2),S("",e.destination.city,", ",e.destination.state," ",e.destination.zip,""),o(3),p((e.driver==null?null:e.driver.name)||"\u2014"),o(),c("ngIf",e.driver),o(),c("ngIf",e.truck)}}var $=class s{constructor(i,e){this.router=i;this.ordersService=e}orderStatuses=["New","In Transit","Delivered","Cancelled"];selectedStatusesMap={};orders=[];filteredOrders=[];showStatusDropdown=!1;ngOnInit(){this.loadOrders(),this.orderStatuses.forEach(i=>this.selectedStatusesMap[i]=!0),this.onStatusFilterChange()}loadOrders(){this.ordersService.getOrders().subscribe(i=>{this.orders=i,this.filteredOrders=i},i=>{console.error("Error loading orders:",i)})}onStatusFilterChange(){let i=this.orderStatuses.filter(e=>this.selectedStatusesMap[e]);this.filteredOrders=this.orders.filter(e=>i.includes(e.status))}viewOrder(i){this.router.navigate(["/dispatcher/orders/",i])}getSelectedStatusesLabel(){let i=this.orderStatuses.filter(e=>this.selectedStatusesMap[e]);return i.length===0?"None selected":i.length===this.orderStatuses.length?"All selected":i.join(", ")}allStatusesSelected(){return this.orderStatuses.every(i=>this.selectedStatusesMap[i])}toggleSelectAllStatuses(i){let e=i.target.checked;this.orderStatuses.forEach(a=>this.selectedStatusesMap[a]=e),this.onStatusFilterChange()}static \u0275fac=function(e){return new(e||s)(h(F),h(j))};static \u0275cmp=y({type:s,selectors:[["app-orders"]],decls:33,vars:4,consts:[[1,"p-6","pt-0"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-4","flex","items-center","gap-2","relative"],[1,"font-semibold","text-green-900","mr-2"],[1,"relative"],["type","button",1,"bg-green-50","border","border-green-200","rounded","px-4","py-2","text-sm","flex","items-center","gap-2",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4","ml-1"],["stroke-linecap","round","stroke-linejoin","round","d","M19 9l-7 7-7-7"],["class","absolute left-0 mt-2 w-56 bg-white border border-green-200 rounded shadow-lg z-10",4,"ngIf"],["class","fixed inset-0 z-0","style","background: transparent",3,"click",4,"ngIf"],[1,"overflow-x-auto","rounded-lg","shadow-lg","bg-white"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-green-900","text-white"],[1,"px-4","py-3","text-left","font-semibold"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],[1,"absolute","left-0","mt-2","w-56","bg-white","border","border-green-200","rounded","shadow-lg","z-10"],[1,"px-3","py-2","border-b","border-green-100","flex","flex-col","gap-1"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","checkbox",1,"accent-green-600",3,"change","checked"],[1,"font-semibold"],[1,"max-h-48","overflow-y-auto","px-3","py-2","flex","flex-col","gap-1"],["class","flex items-center gap-2 cursor-pointer",4,"ngFor","ngForOf"],["type","checkbox",1,"accent-green-600",3,"ngModelChange","change","ngModel"],[1,"fixed","inset-0","z-0",2,"background","transparent",3,"click"],[1,"hover:bg-green-50","transition"],[1,"px-4","py-1","font-medium","text-green-900"],[1,"mt-1","inline-block","px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"px-4","py-1"],[1,"text-xs","text-gray-500"],["class","text-xs text-gray-500",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","transition","text-white","px-3","py-1","rounded","shadow",3,"click"],[1,"mt-2"],[1,"text-gray-700"],[1,"font-normal"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"h2",1)(2,"span"),r(3,"\u{1F4E6}"),t(),r(4," Orders "),t(),n(5,"div",2)(6,"label",3),r(7,"Status:"),t(),n(8,"div",4)(9,"button",5),v("click",function(){return a.showStatusDropdown=!a.showStatusDropdown}),r(10),w(),n(11,"svg",6),O(12,"path",7),t()(),x(13,B,8,2,"div",8),t(),x(14,H,1,0,"div",9),t(),C(),n(15,"div",10)(16,"table",11)(17,"thead",12)(18,"tr")(19,"th",13),r(20,"Order #"),t(),n(21,"th",13),r(22,"Customer"),t(),n(23,"th",13),r(24,"Origin"),t(),n(25,"th",13),r(26,"Destination"),t(),n(27,"th",13),r(28,"Driver"),t(),n(29,"th",13),r(30,"Actions"),t()()(),n(31,"tbody",14),x(32,q,29,20,"tr",15),t()()()()),e&2&&(o(10),_(" ",a.getSelectedStatusesLabel()," "),o(3),c("ngIf",a.showStatusDropdown),o(),c("ngIf",a.showStatusDropdown),o(18),c("ngForOf",a.filteredOrders))},dependencies:[D,V,T,L,N,z,A],encapsulation:2})};export{$ as OrdersComponent};
