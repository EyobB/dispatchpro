import{a as G}from"./chunk-TSAYU77S.js";import{a as P,d as B,e as V,f as h,g as z,h as U,i as D}from"./chunk-5TTF5I2A.js";import{k as j,l as b}from"./chunk-KOSR3TVL.js";import{Bb as C,Ha as F,Ia as s,L,Na as u,Sa as l,X as O,Xa as d,Y as T,cb as p,eb as o,fb as t,gb as x,ia as A,jb as M,k as I,mb as v,nb as c,sb as i,tb as w,ub as f,vb as H,wb as W}from"./chunk-N44I7YIH.js";var m=class e{static NEW_RATE_CONFIRMATIONS="new-rate-confirmations";static DELIVERED_ORDERS="delivered-orders";static DRIVER_WARNINGS="driver-warnings";static TRUCKS_WARNINGS="trucks-warnings";constructor(){}getNotifications(){return I([{type:"new-rate-confirmations",count:3,message:"new rate confirmations",link:"/dispatcher/rate-confirmations"},{type:"delivered-orders",count:2,message:"order(s) delivered",link:"/dispatcher/orders?status=delivered"},{type:"driver-warnings",count:2,message:"driver(s) with warnings",link:"/dispatcher/drivers?status=warning"},{type:"trucks-warnings",count:4,message:"truck(s) with warnings",link:"/dispatcher/trucks?status=warning"}])}static \u0275fac=function(n){return new(n||e)};static \u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"})};function J(e,r){if(e&1&&(o(0,"sup",13),i(1),t()),e&2){let n=c();s(),f(" ",n.pendingRateConsCount," ")}}function Q(e,r){if(e&1&&(o(0,"sup",13),i(1),t()),e&2){let n=c();s(),f(" ",n.deliveredOrdersCount," ")}}function X(e,r){if(e&1&&(o(0,"sup",13),i(1),t()),e&2){let n=c();s(),f(" ",n.trucksWarningCount," ")}}function Y(e,r){if(e&1&&(o(0,"sup",13),i(1),t()),e&2){let n=c();s(),f(" ",n.driverWarningCount," ")}}var S=class e{constructor(r){this.notificationsService=r}pendingRateConsCount=0;deliveredOrdersCount=0;driverWarningCount=0;trucksWarningCount=0;ngOnInit(){this.loadNotifications()}loadNotifications(){this.notificationsService.getNotifications().subscribe(r=>{this.pendingRateConsCount=r.find(n=>n.type===m.NEW_RATE_CONFIRMATIONS)?.count||0,this.deliveredOrdersCount=r.find(n=>n.type===m.DELIVERED_ORDERS)?.count||0,this.driverWarningCount=r.find(n=>n.type===m.DRIVER_WARNINGS)?.count||0,this.trucksWarningCount=r.find(n=>n.type===m.TRUCKS_WARNINGS)?.count||0})}static \u0275fac=function(n){return new(n||e)(u(m))};static \u0275cmp=l({type:e,selectors:[["app-sidebar"]],decls:53,vars:4,consts:[[1,"w-60","h-screen","bg-green-900","text-white","p-4"],[1,"text-2xl","font-bold","mb-6"],[1,"space-y-4","text-lg"],["routerLink","/dispatcher/rate-confirmations",1,"flex","items-center","gap-2","cursor-pointer","relative"],["class","bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow",4,"ngIf"],["routerLink","/dispatcher/orders",1,"flex","items-center","gap-2","cursor-pointer","relative"],["routerLink","/dispatcher/invoices",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/payments",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/trucks",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/drivers",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/users",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/reports",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/settings",1,"flex","items-center","gap-2","cursor-pointer"],[1,"bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","text-xs","font-bold","shadow"]],template:function(n,a){n&1&&(o(0,"nav",0)(1,"h1",1),i(2,"Dispatcher"),t(),o(3,"ul",2)(4,"li")(5,"a",3)(6,"span"),i(7,"\u{1F4D1}"),t(),i(8," Rate Conf "),d(9,J,2,1,"sup",4),t()(),o(10,"li")(11,"a",5)(12,"span"),i(13,"\u{1F4E6}"),t(),i(14," Orders "),d(15,Q,2,1,"sup",4),t()(),o(16,"li")(17,"a",6)(18,"span"),i(19,"\u{1F9FE}"),t(),i(20," Invoices "),t()(),o(21,"li")(22,"a",7)(23,"span"),i(24,"\u{1F4B0}"),t(),i(25," Payments "),t()(),o(26,"li")(27,"a",8)(28,"span"),i(29,"\u{1F69A}"),t(),i(30," Trucks"),d(31,X,2,1,"sup",4),t()(),o(32,"li")(33,"a",9)(34,"span"),i(35,"\u{1F9D1}\u200D\u2708\uFE0F"),t(),i(36," Drivers"),d(37,Y,2,1,"sup",4),t()(),o(38,"li")(39,"a",10)(40,"span"),i(41,"\u{1F465}"),t(),i(42," Users "),t()(),o(43,"li")(44,"a",11)(45,"span"),i(46,"\u{1F4CA}"),t(),i(47," Reports "),t()(),o(48,"li")(49,"a",12)(50,"span"),i(51,"\u2699\uFE0F"),t(),i(52," Settings "),t()()()()),n&2&&(s(9),p("ngIf",a.pendingRateConsCount!==void 0),s(6),p("ngIf",a.deliveredOrdersCount!==void 0),s(16),p("ngIf",a.trucksWarningCount!==void 0),s(6),p("ngIf",a.driverWarningCount!==void 0))},dependencies:[D,h,b],encapsulation:2})};var Z=()=>["/dispatcher-detail"];function ee(e,r){if(e&1){let n=M();o(0,"li",18)(1,"button",19),v("click",function(){let g=O(n).$implicit,_=c(2);return T(_.goToPage(g.link))}),o(2,"span"),i(3),t()()()}if(e&2){let n=r.$implicit;s(3),H("",n.count," ",n.message,"")}}function te(e,r){if(e&1&&(o(0,"div",14)(1,"div",15),i(2,"Notifications"),t(),o(3,"ul"),d(4,ee,4,2,"li",16),t(),o(5,"div",17),i(6,"Click to view details"),t()()),e&2){let n=c();s(4),p("ngForOf",n.notifications)}}var y=class e{constructor(r,n,a,g){this.dispatcherService=r;this.notificationsService=n;this.router=a;this.eRef=g}showNotifications=!1;company=null;notifications=[];totalNotifications=0;ngOnInit(){this.company=this.dispatcherService.getDispatcher(),this.notificationsService.getNotifications().subscribe(r=>{this.notifications=r,this.totalNotifications=r.reduce((n,a)=>n+a.count,0)})}user={name:"Habtegergish",role:"Dispatcher",profilePicture:"assets/images/profile.jpg"};toggleNotifications(){this.showNotifications=!this.showNotifications}goToPage(r){this.showNotifications=!1,this.router.navigateByUrl(r)}onDocumentClick(r){this.showNotifications&&!this.eRef.nativeElement.contains(r.target)&&(this.showNotifications=!1)}static \u0275fac=function(n){return new(n||e)(u(G),u(m),u(V),u(A))};static \u0275cmp=l({type:e,selectors:[["app-header"]],hostBindings:function(n,a){n&1&&v("click",function(_){return a.onDocumentClick(_)},!1,F)},decls:27,vars:9,consts:[[1,"w-full","bg-green-900","text-white","flex","items-center","justify-between","px-6","py-3","shadow"],[1,"flex","items-center","gap-3","hidden","sm:flex"],[1,"text-4xl"],[1,"font-bold","text-lg","hover:underline",3,"routerLink"],[1,"text-xs","text-green-100"],[1,"flex","items-center","gap-6","relative"],[1,"relative","hidden","sm:inline-flex"],[1,"relative","focus:outline-none",3,"click"],[1,"text-2xl"],[1,"absolute","-top-1","-right-2","bg-red-500","text-xs","rounded-full","px-1"],["class","absolute right-0 mt-2 w-64 bg-white text-green-900 rounded shadow-lg z-50 border border-green-100",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-1","rounded","flex","items-center","gap-1"],[1,"text-lg"],[1,"absolute","right-0","mt-2","w-64","bg-white","text-green-900","rounded","shadow-lg","z-50","border","border-green-100"],[1,"p-3","border-b","border-green-100","font-semibold","text-green-800"],["class","border-b border-green-100",4,"ngFor","ngForOf"],[1,"px-4","py-2","text-xs","text-gray-500","border-t","border-green-100"],[1,"border-b","border-green-100"],[1,"w-full","text-left","px-4","py-2","hover:bg-green-50","flex","items-center","gap-2",3,"click"]],template:function(n,a){n&1&&(o(0,"header",0)(1,"div",1)(2,"span",2),i(3,"\u{1F3E2}"),t(),o(4,"div")(5,"a",3),i(6),t(),o(7,"div",4),i(8),t()()(),o(9,"div",5)(10,"div",6)(11,"button",7),v("click",function(){return a.toggleNotifications()}),o(12,"span",8),i(13,"\u{1F514}"),t(),o(14,"span",9),i(15),t()(),d(16,te,7,1,"div",10),t(),o(17,"div",11)(18,"span",8),i(19,"\u{1F464}"),t(),o(20,"span"),i(21),t()(),o(22,"button",12)(23,"span",13),i(24,"\u238B"),t(),o(25,"span"),i(26,"Logout"),t()()()()),n&2&&(s(5),p("routerLink",C(8,Z)),s(),f(" ",a.company==null?null:a.company.name," "),s(2),W(" ",a.company==null?null:a.company.address," \u2022 ",a.company==null?null:a.company.phone," \u2022 ",a.company==null?null:a.company.email," "),s(7),w(a.totalNotifications),s(),p("ngIf",a.showNotifications),s(5),w(a.user.name))},dependencies:[h,b,j],encapsulation:2})};var ne=()=>({exact:!0}),k=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=l({type:e,selectors:[["app-mobile-nav"]],decls:20,vars:2,consts:[[1,"fixed","bottom-0","left-0","w-full","bg-green-900","text-white","shadow-lg","z-50"],[1,"flex","justify-around","items-center","py-2"],["routerLink","/driver/orders","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition",3,"routerLinkActiveOptions"],[1,"text-2xl"],[1,"text-xs","mt-1"],["routerLink","/driver/payments","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition"],["routerLink","/driver/reports","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition"]],template:function(n,a){n&1&&(o(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2)(4,"span",3),i(5,"\u{1F4E6}"),t(),o(6,"span",4),i(7,"Orders"),t()()(),o(8,"li")(9,"a",5)(10,"span",3),i(11,"\u{1F4B0}"),t(),o(12,"span",4),i(13,"Payments"),t()()(),o(14,"li")(15,"a",6)(16,"span",3),i(17,"\u{1F4CA}"),t(),o(18,"span",4),i(19,"Reports"),t()()()()()),n&2&&(s(3),p("routerLinkActiveOptions",C(1,ne)))},dependencies:[h,z],encapsulation:2})};var N=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=l({type:e,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"min-h-screen","bg-gray-100"],[1,"sticky","top-0","z-20"],[1,"flex"],[1,"sticky","top-[64px]","h-[calc(100vh-64px)]","z-10","hidden","md:block"],[1,"flex-1","p-6","pb-20","md:pb-6"],[1,"bg-white","border","rounded","shadow","p-6","h-full"],[1,"md:hidden"]],template:function(n,a){n&1&&(o(0,"div",0),x(1,"app-header",1),o(2,"div",2)(3,"aside",3),x(4,"app-sidebar"),t(),o(5,"main",4)(6,"div",5),x(7,"router-outlet"),t()()(),x(8,"app-mobile-nav",6),t())},dependencies:[D,B,S,y,k],encapsulation:2})};var q=[{path:"admin/dispatcher",loadComponent:()=>import("./chunk-NQX3ZFMH.js").then(e=>e.DispatcherComponent)},{path:"admin/dispatcher-detail",loadComponent:()=>import("./chunk-RRPJQRXS.js").then(e=>e.DispatcherDetailComponent)},{path:"admin/profile",loadComponent:()=>import("./chunk-TNVFDCU2.js").then(e=>e.ProfileComponent)},{path:"admin/brokers",loadComponent:()=>import("./chunk-WT67BZQX.js").then(e=>e.BrokersComponent)},{path:"dispatcher/rate-confirmations",loadComponent:()=>import("./chunk-F4XV36DT.js").then(e=>e.RateConfirmationsComponent)},{path:"dispatcher/rate-confirmations/:id",loadComponent:()=>import("./chunk-DK22XQ7F.js").then(e=>e.RateConfirmationDetailComponent)},{path:"dispatcher/sign-rate-confirmation/:id",loadComponent:()=>import("./chunk-6G5GLAFW.js").then(e=>e.SignRateConfirmationComponent)},{path:"dispatcher/orders",loadComponent:()=>import("./chunk-RA6SO54D.js").then(e=>e.OrdersComponent)},{path:"dispatcher/orders/:id",loadComponent:()=>import("./chunk-BHA322D2.js").then(e=>e.OrderDetailComponent)},{path:"dispatcher/invoices",loadComponent:()=>import("./chunk-ADPSLIDS.js").then(e=>e.InvoicesComponent)},{path:"dispatcher/invoices/:id",loadComponent:()=>import("./chunk-TDM4E5DW.js").then(e=>e.InvoiceDetailComponent)},{path:"dispatcher/payments",loadComponent:()=>import("./chunk-VHQTNTW7.js").then(e=>e.PaymentsComponent)},{path:"dispatcher/trucks",loadComponent:()=>import("./chunk-S73G4WCB.js").then(e=>e.TrucksComponent)},{path:"dispatcher/trucks/:id",loadComponent:()=>import("./chunk-TPHE7V42.js").then(e=>e.TruckDetailComponent)},{path:"dispatcher/drivers",loadComponent:()=>import("./chunk-ZPNQ5ZDJ.js").then(e=>e.DriversComponent)},{path:"dispatcher/users",loadComponent:()=>import("./chunk-YAAHPVRO.js").then(e=>e.UsersComponent)},{path:"dispatcher/reports",loadComponent:()=>import("./chunk-QEL3VXKZ.js").then(e=>e.ReportsComponent)},{path:"dispatcher/settings",loadComponent:()=>import("./chunk-RLYMXFLF.js").then(e=>e.SettingsComponent)},{path:"driver/orders",loadComponent:()=>import("./chunk-UOMH4SUV.js").then(e=>e.DriverOrdersComponent)},{path:"driver/order-detail/:id",loadComponent:()=>import("./chunk-HXQ3G46T.js").then(e=>e.OrderDetailComponent)},{path:"driver/payments",loadComponent:()=>import("./chunk-MWU25VNY.js").then(e=>e.PaymentsComponent)},{path:"driver/reports",loadComponent:()=>import("./chunk-FEHN4XZB.js").then(e=>e.ReportsComponent)},{path:"",redirectTo:"orders",pathMatch:"full"}];P(N,{providers:[U(q)]});
