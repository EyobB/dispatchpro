import{a as U}from"./chunk-DQ73SBEH.js";import{c as A,e as P,f as R,i as F}from"./chunk-5TTF5I2A.js";import{j as y,k as O,l as V,n as N}from"./chunk-KOSR3TVL.js";import{Db as S,Ea as k,Eb as I,Gb as T,Hb as h,Ia as l,Na as C,Sa as w,X as m,Xa as f,Y as c,cb as s,eb as i,fb as e,jb as v,mb as p,nb as u,rb as D,sb as t,tb as g,ub as x,wb as b}from"./chunk-N44I7YIH.js";var E=class{id;orderNumber;customerName;customerContact;origin;destination;description;status;driver;truck;additionalCosts;documents;constructor(){this.id="",this.orderNumber="",this.customerName="",this.customerContact="",this.origin={street:"",city:"",state:"",zip:""},this.destination={street:"",city:"",state:"",zip:""},this.description="",this.status="New",this.driver=null,this.truck=null,this.additionalCosts=[],this.documents=[]}};var B=(o,a,r)=>({"text-green-700":o,"text-yellow-700":a,"text-red-700":r});function L(o,a){if(o&1){let r=v();i(0,"div")(1,"div",16),t(2),e(),i(3,"div",17),t(4),e(),i(5,"button",25),p("click",function(){m(r);let d=u();return c(d.unassignDriver())}),t(6,"Unassign"),e()()}if(o&2){let r=u();l(2),g(r.order.driver.name),l(2),g(r.order.driver.phone)}}function W(o,a){if(o&1){let r=v();i(0,"button",26),p("click",function(){m(r);let d=u();return c(d.openAssignDriver())}),t(1,"Assign Driver"),e()}}function $(o,a){if(o&1){let r=v();i(0,"div")(1,"div",16),t(2),e(),i(3,"div",17),t(4),e(),i(5,"button",25),p("click",function(){m(r);let d=u();return c(d.unassignTruck())}),t(6,"Unassign"),e()()}if(o&2){let r=u();l(2),g(r.order.truck.plate),l(2),g(r.order.truck.type)}}function G(o,a){if(o&1){let r=v();i(0,"button",26),p("click",function(){m(r);let d=u();return c(d.openAssignTruck())}),t(1,"Assign Truck"),e()}}function q(o,a){if(o&1&&(i(0,"div")(1,"a",27)(2,"span"),t(3,"\u{1F4C4}"),e(),t(4," View PoD Document "),e()()),o&2){let r=u();l(),s("href",r.podUrl,k)}}function H(o,a){if(o&1){let r=v();i(0,"div",28),t(1,"No PoD uploaded."),e(),i(2,"button",19),p("click",function(){m(r);let d=u();return c(d.uploadPod())}),t(3,"Upload PoD"),e()}}function J(o,a){if(o&1&&(i(0,"li")(1,"span",12),t(2),e(),i(3,"span",31),t(4),I(5,"number"),e()()),o&2){let r=a.$implicit;l(2),x("",r.reason,":"),l(2),x(" $ ",T(5,2,r.amount,"1.2-2"),"")}}function K(o,a){if(o&1&&(i(0,"div")(1,"ul",29),f(2,J,6,5,"li",30),e()()),o&2){let r=u();l(2),s("ngForOf",r.order==null?null:r.order.additionalCosts)}}function Q(o,a){o&1&&(i(0,"div",28),t(1,"No additional costs recorded."),e())}var z=class o{constructor(a,r,n){this.router=a;this.route=r;this.ordersService=n}order=new E;podUrl=null;ngOnInit(){let a=this.route.snapshot.paramMap.get("id")||"";this.ordersService.getOrder(a).subscribe(r=>{this.order=r,this.podUrl=this.order?.documents?.find(n=>n.name==="PoD")?.url||null})}markDelivered(){this.order&&(this.order.status="Delivered")}markInTransit(){this.order&&(this.order.status="In Transit")}cancelOrder(){this.order&&(this.order.status="Cancelled")}openAssignDriver(){this.order&&(this.order.driver={name:"New Driver",phone:"+1-555-9999",expirationDate:"2025-12-31",license:"D1234567",id:1,status:"Active"})}unassignDriver(){this.order&&(this.order.driver=null)}openAssignTruck(){this.order&&(this.order.truck={id:"NEW-0000",dotNumber:"NEW-0000",plate:"NEW-0000",type:"Dry Van",status:"Active",insuredUntil:null,driver:null,documents:[]})}unassignTruck(){this.order&&(this.order.truck=null)}uploadPod(){alert("Upload PoD clicked")}addCost(){alert("Add Cost clicked")}createInvoice(){this.router.navigate(["/dispatcher/invoices",this.order.id])}static \u0275fac=function(r){return new(r||o)(C(P),C(A),C(U))};static \u0275cmp=w({type:o,selectors:[["app-order-detail"]],decls:100,vars:29,consts:[["assignDriver",""],["assignTruck",""],["noPod",""],["noCosts",""],[1,"max-w-3xl","mx-auto","p-6","bg-white","rounded-xl","shadow-lg"],[1,"mb-4"],["routerLink","/dispatcher/orders",1,"text-green-800","hover:underline","flex","items-center","gap-1","font-medium"],[1,"text-xl"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-6","bg-green-50","rounded","p-4"],[1,"font-semibold","text-lg","mb-3","text-green-900","flex","items-center","gap-2","bg-green-100","px-3","py-2","rounded"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],[1,"font-semibold"],[1,"mb-6"],[1,"flex","flex-col","sm:flex-row","gap-8"],[1,"flex-1","bg-gray-50","rounded","p-4"],[1,"font-medium"],[1,"text-xs","text-gray-500"],[4,"ngIf","ngIfElse"],[1,"mt-2","bg-green-600","hover:bg-green-700","text-white","px-4","py-1","rounded",3,"click"],[1,"flex","flex-wrap","gap-4","mt-6","items-center"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-2","rounded","shadow","font-semibold","transition",3,"click","hidden"],[1,"bg-yellow-600","hover:bg-yellow-700","text-white","px-6","py-2","rounded","shadow","font-semibold","transition",3,"click","hidden"],[1,"bg-red-600","hover:bg-red-700","text-white","px-6","py-2","rounded","shadow","font-semibold","transition",3,"click","hidden"],[1,"ml-4","font-semibold","text-lg",3,"ngClass"],[1,"mt-2","text-sm","text-blue-700","hover:underline",3,"click"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-1","rounded",3,"click"],["target","_blank",1,"text-blue-700","hover:underline","flex","items-center","gap-1","font-medium",3,"href"],[1,"text-gray-500","italic"],[1,"list-disc","pl-6","space-y-1"],[4,"ngFor","ngForOf"],[1,"text-green-700","font-medium"]],template:function(r,n){if(r&1){let d=v();i(0,"div",4)(1,"div",5)(2,"a",6)(3,"span",7),t(4,"\u2190"),e(),t(5," Go Back "),e()(),i(6,"h2",8)(7,"span"),t(8,"\u{1F4E6}"),e(),t(9," Order Details "),e(),i(10,"div",9)(11,"h3",10)(12,"span"),t(13,"\u{1F464}"),e(),t(14," Customer Information "),e(),i(15,"div",11)(16,"div")(17,"span",12),t(18,"Name:"),e(),t(19),e(),i(20,"div")(21,"span",12),t(22,"Contact:"),e(),t(23),e()()(),i(24,"div",13)(25,"h3",10)(26,"span"),t(27,"\u{1F5FA}\uFE0F"),e(),t(28," Route "),e(),i(29,"div",14)(30,"div",15)(31,"span",12),t(32,"Origin:"),e(),i(33,"div",16),t(34),e(),i(35,"div",17),t(36),e()(),i(37,"div",15)(38,"span",12),t(39,"Destination:"),e(),i(40,"div",16),t(41),e(),i(42,"div",17),t(43),e()()()(),i(44,"div",13)(45,"h3",10)(46,"span"),t(47,"\u{1F4E6}"),e(),t(48," Load Details "),e(),i(49,"div")(50,"span",12),t(51,"Description:"),e(),t(52),e()(),i(53,"div",13)(54,"h3",10)(55,"span"),t(56,"\u{1F9D1}\u200D\u2708\uFE0F"),e(),t(57," Driver & Truck "),e(),i(58,"div",14)(59,"div",15)(60,"span",12),t(61,"Driver: "),e(),f(62,L,7,2,"div",18)(63,W,2,0,"ng-template",null,0,h),e(),i(65,"div",15)(66,"span",12),t(67,"Truck: "),e(),f(68,$,7,2,"div",18)(69,G,2,0,"ng-template",null,1,h),e()()(),i(71,"div",13)(72,"h3",10)(73,"span"),t(74,"\u{1F4C4}"),e(),t(75," Proof of Delivery (PoD) "),e(),f(76,q,5,1,"div",18)(77,H,4,0,"ng-template",null,2,h),e(),i(79,"div",13)(80,"h3",10)(81,"span"),t(82,"\u{1F4B2}"),e(),t(83," Additional Costs "),e(),f(84,K,3,1,"div",18)(85,Q,2,0,"ng-template",null,3,h),i(87,"button",19),p("click",function(){return m(d),c(n.addCost())}),t(88,"Add Cost"),e()(),i(89,"div",20)(90,"button",21),p("click",function(){return m(d),c(n.markDelivered())}),t(91," Mark as Delivered "),e(),i(92,"button",22),p("click",function(){return m(d),c(n.markInTransit())}),t(93," Mark In Transit "),e(),i(94,"button",23),p("click",function(){return m(d),c(n.cancelOrder())}),t(95," Cancel Order "),e(),i(96,"button",21),p("click",function(){return m(d),c(n.createInvoice())}),t(97," Convert To Invoice "),e(),i(98,"span",24),t(99),e()()()}if(r&2){let d=D(64),_=D(70),M=D(78),j=D(86);l(19),x(" ",n.order.customerName,""),l(4),x(" ",n.order.customerContact,""),l(11),g(n.order.origin.street),l(2),b("",n.order.origin.city,", ",n.order.origin.state," ",n.order.origin.zip,""),l(5),g(n.order.destination.street),l(2),b("",n.order.destination.city,", ",n.order.destination.state," ",n.order.destination.zip,""),l(9),x(" ",n.order.description," "),l(10),s("ngIf",n.order.driver)("ngIfElse",d),l(6),s("ngIf",n.order.truck)("ngIfElse",_),l(8),s("ngIf",n.podUrl)("ngIfElse",M),l(8),s("ngIf",n.order==null||n.order.additionalCosts==null?null:n.order.additionalCosts.length)("ngIfElse",j),l(6),s("hidden",n.order.status==="Delivered"),l(2),s("hidden",n.order.status==="In Transit"),l(2),s("hidden",n.order.status==="Cancelled"),l(2),s("hidden",n.order.status!=="Delivered"),l(2),s("ngClass",S(25,B,n.order.status==="Delivered",n.order.status==="In Transit",n.order.status==="Cancelled")),l(),x(" Status: ",n.order.status," ")}},dependencies:[V,O,y,F,R,N],encapsulation:2})};export{z as OrderDetailComponent};
