import{a as l}from"./chunk-NBSK5KUW.js";import{a as d}from"./chunk-XPCCV2FB.js";import{a,b as c}from"./chunk-FSJQQIFH.js";import{L as p,O as s,T as o}from"./chunk-QJGZKU5F.js";var m=class r{constructor(e,t){this.http=e;this.sessionService=t}apiUrl=`${d.apiUrl}/documents`;getAuthHeaders(){let e=this.sessionService.getLoggedInUser(),t=new a;return e&&e.token&&(t=t.set("Authorization",`Bearer ${e.token}`)),t}uploadFile(e){let t=new FormData;return t.append("file",e.file,e.file.name),t.append("documentType",e.documentType),t.append("fileType",e.fileType),t.append("expires",e.expires),e.driverId&&t.append("driverId",e.driverId),e.truckId&&t.append("truckId",e.truckId),e.orderId&&t.append("orderId",e.orderId),this.http.post(`${this.apiUrl}/upload`,t)}getDocumentBlob(e){let t=this.getAuthHeaders().set("Accept","application/octet-stream");return this.http.get(e,{headers:t,responseType:"blob"})}downloadDocument(e){let t=this.getAuthHeaders().set("Accept","application/octet-stream");return this.http.get(e,{headers:t,responseType:"blob"}).pipe(p(u=>{let n=window.URL.createObjectURL(u),i=document.createElement("a");i.href=n,i.download="document",i.click(),window.URL.revokeObjectURL(n)}))}deleteDocument(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||r)(o(c),o(l))};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};export{m as a};
