import{a as B}from"./chunk-KVESYRNC.js";import{a as D,c as A,f as z,i as L,j as W,k as j,o as R}from"./chunk-7VXK63W2.js";import{e as V}from"./chunk-NLBBH4OK.js";import{k as F,l as N,m as T}from"./chunk-ZMPNCMD4.js";import{Eb as k,Ia as o,Na as f,Sa as I,X as x,Xa as u,Y as h,Z as O,_ as E,cb as c,eb as i,fb as t,gb as M,jb as v,mb as g,nb as p,sb as r,tb as m,ub as _,wb as S,xb as C,yb as b,zb as w}from"./chunk-LZRDGPC4.js";var H=(l,n,e)=>({"bg-green-100 text-green-800":l,"bg-yellow-100 text-yellow-800":n,"bg-red-100 text-red-800":e});function $(l,n){if(l&1){let e=v();i(0,"label",22)(1,"input",27),w("ngModelChange",function(a){let d=x(e).$implicit,y=p(2);return b(y.selectedStatusesMap[d],a)||(y.selectedStatusesMap[d]=a),h(a)}),g("change",function(){x(e);let a=p(2);return h(a.onStatusFilterChange())}),t(),r(2),t()}if(l&2){let e=n.$implicit,s=p(2);o(),C("ngModel",s.selectedStatusesMap[e]),o(),_(" ",e," ")}}function G(l,n){if(l&1){let e=v();i(0,"div",20)(1,"div",21)(2,"label",22)(3,"input",23),g("change",function(a){x(e);let d=p();return h(d.toggleSelectAllStatuses(a))}),t(),i(4,"span",24),r(5,"Select/Deselect All"),t()()(),i(6,"div",25),u(7,$,3,2,"label",26),t()()}if(l&2){let e=p();o(3),c("checked",e.allStatusesSelected()),o(4),c("ngForOf",e.orderStatuses)}}function q(l,n){if(l&1){let e=v();i(0,"div",28),g("click",function(){x(e);let a=p();return h(a.showStatusDropdown=!1)}),t()}}function J(l,n){if(l&1&&(i(0,"option",29),r(1),t()),l&2){let e=n.$implicit;c("value",e),o(),m(e)}}function K(l,n){if(l&1&&(i(0,"div",34),r(1),t()),l&2){let e=p().$implicit;o(),m(e.driver.phone)}}function Q(l,n){if(l&1){let e=v();i(0,"tr",30)(1,"td",31)(2,"div"),r(3),t(),i(4,"span",32),r(5),t()(),i(6,"td",33)(7,"div",24),r(8),t(),i(9,"div",34),r(10),t()(),i(11,"td",33)(12,"div",24),r(13),t()(),i(14,"td",33)(15,"div"),r(16),t(),i(17,"div",34),r(18),t()(),i(19,"td",33)(20,"div"),r(21),t(),i(22,"div",34),r(23),t()(),i(24,"td",33)(25,"div"),r(26),t(),u(27,K,2,1,"div",35),t(),i(28,"td",33)(29,"button",36),g("click",function(){let a=x(e).$implicit,d=p();return h(d.viewOrder(a.id))}),r(30," View "),t()()()}if(l&2){let e=n.$implicit;o(3),m(e.orderNumber),o(),c("ngClass",k(16,H,e.status==="Delivered",e.status==="In Transit",e.status==="Cancelled")),o(),_(" ",e.status," "),o(3),m(e.customerName),o(2),m(e.customerContact),o(3),m(e.rateConNumber),o(3),m(e.origin.street),o(2),S("",e.origin.city,", ",e.origin.state," ",e.origin.zip,""),o(3),m(e.destination.street),o(2),S("",e.destination.city,", ",e.destination.state," ",e.destination.zip,""),o(3),m((e.driver==null?null:e.driver.name)||"\u2014"),o(),c("ngIf",e.driver)}}var P=class l{constructor(n,e){this.router=n;this.ordersService=e}orderStatuses=["New","In Transit","Delivered","Cancelled"];selectedStatusesMap={};orders=[];filteredOrders=[];showStatusDropdown=!1;customerNames=[];selectedCustomer="";ngOnInit(){this.loadOrders(),this.orderStatuses.forEach(n=>this.selectedStatusesMap[n]=!0),this.onStatusFilterChange()}loadOrders(){this.ordersService.getOrders().subscribe(n=>{this.orders=n,this.customerNames=Array.from(new Set(n.map(e=>e.customerName))).sort(),this.filteredOrders=n},n=>{console.error("Error loading orders:",n)})}onStatusFilterChange(){this.applyFilters()}onCustomerFilterChange(){this.applyFilters()}applyFilters(){let n=this.orderStatuses.filter(e=>this.selectedStatusesMap[e]);this.filteredOrders=this.orders.filter(e=>{let s=n.includes(e.status),a=!this.selectedCustomer||e.customerName===this.selectedCustomer;return s&&a})}viewOrder(n){this.router.navigate(["/dispatcher/orders/",n])}getSelectedStatusesLabel(){let n=this.orderStatuses.filter(e=>this.selectedStatusesMap[e]);return n.length===0?"None selected":n.length===this.orderStatuses.length?"All selected":n.join(", ")}allStatusesSelected(){return this.orderStatuses.every(n=>this.selectedStatusesMap[n])}toggleSelectAllStatuses(n){let e=n.target.checked;this.orderStatuses.forEach(s=>this.selectedStatusesMap[s]=e),this.onStatusFilterChange()}static \u0275fac=function(e){return new(e||l)(f(V),f(B))};static \u0275cmp=I({type:l,selectors:[["app-orders"]],decls:43,vars:6,consts:[[1,"p-6","pt-0"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-4","flex","items-center","gap-4","relative"],[1,"flex","items-center","gap-2","relative"],[1,"font-semibold","text-green-900","mr-2"],[1,"relative"],["type","button",1,"bg-green-50","border","border-green-200","rounded","px-4","py-2","text-sm","flex","items-center","gap-2",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4","ml-1"],["stroke-linecap","round","stroke-linejoin","round","d","M19 9l-7 7-7-7"],["class","absolute left-0 mt-2 w-56 bg-white border border-green-200 rounded shadow-lg z-10",4,"ngIf"],["class","fixed inset-0 z-0","style","background: transparent",3,"click",4,"ngIf"],[1,"bg-green-50","border","border-green-200","rounded","px-4","py-2","text-sm",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"overflow-x-auto","rounded-lg","shadow-lg","bg-white"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-green-900","text-white"],[1,"px-4","py-3","text-left","font-semibold"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],[1,"absolute","left-0","mt-2","w-56","bg-white","border","border-green-200","rounded","shadow-lg","z-10"],[1,"px-3","py-2","border-b","border-green-100","flex","flex-col","gap-1"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","checkbox",1,"accent-green-600",3,"change","checked"],[1,"font-semibold"],[1,"max-h-48","overflow-y-auto","px-3","py-2","flex","flex-col","gap-1"],["class","flex items-center gap-2 cursor-pointer",4,"ngFor","ngForOf"],["type","checkbox",1,"accent-green-600",3,"ngModelChange","change","ngModel"],[1,"fixed","inset-0","z-0",2,"background","transparent",3,"click"],[3,"value"],[1,"hover:bg-green-50","transition"],[1,"px-4","py-1","font-medium","text-green-900"],[1,"mt-1","inline-block","px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"px-4","py-1"],[1,"text-xs","text-gray-500"],["class","text-xs text-gray-500",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","transition","text-white","px-3","py-1","rounded","shadow",3,"click"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h2",1)(2,"span"),r(3,"\u{1F4E6}"),t(),r(4," Orders "),t(),i(5,"div",2)(6,"div",3)(7,"label",4),r(8,"Status:"),t(),i(9,"div",5)(10,"button",6),g("click",function(){return s.showStatusDropdown=!s.showStatusDropdown}),r(11),O(),i(12,"svg",7),M(13,"path",8),t()(),u(14,G,8,2,"div",9),t(),u(15,q,1,0,"div",10),t(),E(),i(16,"div",3)(17,"label",4),r(18,"Customer:"),t(),i(19,"select",11),w("ngModelChange",function(d){return b(s.selectedCustomer,d)||(s.selectedCustomer=d),d}),g("change",function(){return s.onCustomerFilterChange()}),i(20,"option",12),r(21,"All"),t(),u(22,J,2,2,"option",13),t()()(),i(23,"div",14)(24,"table",15)(25,"thead",16)(26,"tr")(27,"th",17),r(28,"Order #"),t(),i(29,"th",17),r(30,"Customer"),t(),i(31,"th",17),r(32,"RateCon #"),t(),i(33,"th",17),r(34,"Origin"),t(),i(35,"th",17),r(36,"Destination"),t(),i(37,"th",17),r(38,"Driver"),t(),i(39,"th",17),r(40,"Actions"),t()()(),i(41,"tbody",18),u(42,Q,31,20,"tr",19),t()()()()),e&2&&(o(11),_(" ",s.getSelectedStatusesLabel()," "),o(3),c("ngIf",s.showStatusDropdown),o(),c("ngIf",s.showStatusDropdown),o(4),C("ngModel",s.selectedCustomer),o(3),c("ngForOf",s.customerNames),o(20),c("ngForOf",s.filteredOrders))},dependencies:[N,T,F,R,W,j,D,L,A,z],encapsulation:2})};export{P as OrdersComponent};
