import{c as k,d as N,e as T,f as F,g as M,i as V,j as A,k as B,n as U}from"./chunk-KM5PBNJX.js";import{k as D,l as I,m as w,o as E}from"./chunk-24NATF5M.js";import{Cb as O,Eb as C,Gb as P,Ia as o,Sa as x,X as u,Xa as p,Y as g,cb as l,eb as r,fb as n,jb as _,mb as f,nb as c,sb as s,tb as v,ub as h,xb as y,yb as b,zb as S}from"./chunk-N44I7YIH.js";var J=(i,e)=>({"bg-green-100 text-green-800":i,"bg-yellow-100 text-yellow-800":e});function $(i,e){if(i&1&&(r(0,"option",9),s(1),n()),i&2){let t=e.$implicit;l("value",t),o(),v(t)}}function W(i,e){i&1&&(r(0,"span",27),s(1,"Paid"),n())}function L(i,e){i&1&&(r(0,"span",28),s(1,"Unpaid"),n())}function j(i,e){i&1&&(r(0,"span",29),s(1,"Pending"),n())}function G(i,e){if(i&1){let t=_();r(0,"tr")(1,"td",14)(2,"input",21),f("change",function(){let a=u(t).$implicit,m=c(2);return g(m.toggleSelection(a))}),n()(),r(3,"td",22),s(4),n(),r(5,"td",14),s(6),n(),r(7,"td",14),s(8),C(9,"number"),n(),r(10,"td",14),p(11,W,2,0,"span",23)(12,L,2,0,"span",24)(13,j,2,0,"span",25),n(),r(14,"td",14)(15,"span",26),s(16),n()()()}if(i&2){let t=e.$implicit,d=c(2);o(2),l("checked",d.isSelected(t))("disabled",!d.canSelect(t)),o(2),v(t.orderNumber),o(2),v(t.driver),o(2),h("$",P(9,10,t.amount,"1.2-2"),""),o(3),l("ngIf",t.brokerInvoice.status==="Paid"),o(),l("ngIf",t.brokerInvoice.status==="Unpaid"),o(),l("ngIf",t.brokerInvoice.status==="Pending"),o(2),l("ngClass",O(13,J,t.status==="Delivered",t.status==="Pending")),o(),h(" ",t.status," ")}}function q(i,e){if(i&1){let t=_();r(0,"form",10),f("ngSubmit",function(){u(t);let a=c();return g(a.makePayment())}),r(1,"div",11)(2,"table",12)(3,"thead",13)(4,"tr")(5,"th",14)(6,"input",15),f("change",function(a){u(t);let m=c();return g(m.toggleAll(a))}),n()(),r(7,"th",16),s(8,"Order #"),n(),r(9,"th",16),s(10,"Driver"),n(),r(11,"th",16),s(12,"Amount"),n(),r(13,"th",16),s(14,"Broker Invoice"),n(),r(15,"th",16),s(16,"Status"),n()()(),r(17,"tbody",17),p(18,G,17,16,"tr",18),n()()(),r(19,"div",19)(20,"button",20),s(21," Make Payment "),n()()()}if(i&2){let t=c();o(6),l("checked",t.allSelected()),o(12),l("ngForOf",t.filteredOrders),o(2),l("disabled",t.selectedOrders.length===0)}}function z(i,e){i&1&&(r(0,"div",30),s(1," No delivered but unpaid orders found. "),n())}var R=class i{orders=[{orderNumber:"ORD-1001",driver:"John Doe",amount:1200,brokerInvoice:{status:"Paid"},status:"Delivered"},{orderNumber:"ORD-1002",driver:"Jane Smith",amount:950,brokerInvoice:{status:"Unpaid"},status:"Delivered"},{orderNumber:"ORD-1003",driver:"Jane Smith",amount:1100,brokerInvoice:{status:"Unpaid"},status:"Delivered"},{orderNumber:"ORD-1004",driver:"John Doe",amount:1300,brokerInvoice:{status:"Pending"},status:"Delivered"},{orderNumber:"ORD-1005",driver:"Alex Lee",amount:1050,brokerInvoice:{status:"Unpaid"},status:"Delivered"}];drivers=Array.from(new Set(this.orders.map(e=>e.driver)));selectedDriver="";filteredOrders=[];selectedOrders=[];ngOnInit(){this.filterOrders()}filterOrders(){this.filteredOrders=this.orders.filter(e=>e.status==="Delivered"&&e.brokerInvoice.status!=="Paid"&&(this.selectedDriver?e.driver===this.selectedDriver:!0)),this.selectedOrders=[]}isSelected(e){return this.selectedOrders.includes(e)}canSelect(e){return this.selectedOrders.length===0||this.selectedOrders[0].driver===e.driver}toggleSelection(e){this.isSelected(e)?this.selectedOrders=this.selectedOrders.filter(t=>t!==e):this.canSelect(e)&&this.selectedOrders.push(e)}allSelected(){return this.filteredOrders.length>0&&this.filteredOrders.every(e=>this.isSelected(e)||!this.canSelect(e))}toggleAll(e){if(e.target.checked){let t=this.selectedOrders[0]?.driver||this.filteredOrders[0]?.driver;this.selectedOrders=this.filteredOrders.filter(d=>d.driver===t)}else this.selectedOrders=[]}makePayment(){this.selectedOrders.length!==0&&(alert(`Payment made for ${this.selectedOrders.length} order(s) for driver ${this.selectedOrders[0].driver}.`),this.selectedOrders=[],this.filterOrders())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-payments"]],decls:14,vars:4,consts:[[1,"p-6","pt-0"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-4","flex","flex-col","sm:flex-row","gap-2","sm:items-center"],[1,"font-semibold","text-green-900"],[1,"border","border-green-200","rounded","p-2","w-full","sm:w-64",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngSubmit",4,"ngIf"],["class","text-gray-500 text-center py-8",4,"ngIf"],[3,"value"],[3,"ngSubmit"],[1,"overflow-x-auto","rounded-lg","shadow","bg-white","mb-4"],[1,"min-w-full","divide-y","divide-green-100"],[1,"bg-green-900","text-white"],[1,"px-4","py-2"],["type","checkbox",3,"change","checked"],[1,"px-4","py-2","text-left","font-semibold"],[1,"bg-white","divide-y","divide-green-50"],[4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","submit",1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-2","rounded","shadow","font-semibold","transition",3,"disabled"],["type","checkbox",3,"change","checked","disabled"],[1,"px-4","py-2","font-semibold"],["class","text-green-700 font-semibold",4,"ngIf"],["class","text-red-600 font-semibold",4,"ngIf"],["class","text-yellow-600 font-semibold",4,"ngIf"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"text-green-700","font-semibold"],[1,"text-red-600","font-semibold"],[1,"text-yellow-600","font-semibold"],[1,"text-gray-500","text-center","py-8"]],template:function(t,d){t&1&&(r(0,"div",0)(1,"h2",1)(2,"span"),s(3,"\u{1F4B8}"),n(),s(4," Payments "),n(),r(5,"div",2)(6,"label",3),s(7,"Filter by Driver:"),n(),r(8,"select",4),S("ngModelChange",function(m){return b(d.selectedDriver,m)||(d.selectedDriver=m),m}),f("change",function(){return d.filterOrders()}),r(9,"option",5),s(10,"All Drivers"),n(),p(11,$,2,2,"option",6),n()(),p(12,q,22,3,"form",7)(13,z,2,0,"div",8),n()),t&2&&(o(8),y("ngModel",d.selectedDriver),o(3),l("ngForOf",d.drivers),o(),l("ngIf",d.filteredOrders.length>0),o(),l("ngIf",d.filteredOrders.length===0))},dependencies:[I,w,D,U,M,A,B,V,k,N,F,T,E],encapsulation:2})};export{R as PaymentsComponent};
