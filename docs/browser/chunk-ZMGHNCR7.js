import{a as B,b as O}from"./chunk-YK2LZHPZ.js";import{b as P}from"./chunk-UIIJYSZH.js";import{a as _}from"./chunk-S7HWF73Q.js";import{a as k}from"./chunk-CZOF6UEW.js";import{a as T}from"./chunk-7FUB44TE.js";import"./chunk-NBSK5KUW.js";import"./chunk-IMHYAPIP.js";import"./chunk-XPCCV2FB.js";import{c as A}from"./chunk-3TOGTSGL.js";import"./chunk-FSJQQIFH.js";import{l as C,q as w}from"./chunk-QAAQ2EEP.js";import{Ab as s,Bb as d,Ga as E,La as o,Nb as p,Ob as g,Pb as v,Qa as c,Va as I,Ya as S,_a as D,gb as f,kb as i,lb as e,mb as y,sb as b,x as h,zb as t}from"./chunk-QJGZKU5F.js";var u=class m{transform(r){if(!r)return"-";let{street:a,city:n,state:l,zip:x}=r;return[a,n,l,x].filter(Boolean).join(", ")}static \u0275fac=function(a){return new(a||m)};static \u0275pipe=S({name:"address",type:m,pure:!0})};function j(m,r){if(m&1&&(i(0,"tr",27)(1,"td",28),t(2),e(),i(3,"td",29),t(4),p(5,"number"),e()()),m&2){let a=r.$implicit;o(2),s(a.description),o(2),d("$",v(5,2,a.amount,"1.2-2"),"")}}var F=class m{constructor(r,a,n,l){this.carrierService=r;this.invoiceService=a;this.orderService=n;this.route=l}carrier=null;invoice=new B;order=new P;ngOnInit(){let r=this.route.snapshot.paramMap.get("id"),a=this.route.snapshot.paramMap.get("orderId");if(!r||!a)throw new Error("Invoice ID and Order ID are required");h({carrier:this.carrierService.getCarrier(),order:this.orderService.getOrder(a),invoice:this.invoiceService.getCarrierInvoice(r)}).subscribe(({carrier:n,order:l,invoice:x})=>{this.carrier=n,this.order=l,this.invoice=x,this.invoice.origin=this.getOriginAddress(l),this.invoice.destination=this.getDestinationAddress(l),this.invoice.lineItems=this.invoice.lineItems||[],this.invoice.lineItems.push(new O("Rate",l.rate)),this.invoice.lineItems.push(...l.driverCosts)})}getOriginAddress(r){return{street:r.originStreetAddress,city:r.originCity,state:r.originState,zip:r.originZipcode}}getDestinationAddress(r){return{street:r.destinationStreetAddress,city:r.destinationCity,state:r.destinationState,zip:r.destinationZipcode}}get subtotal(){return this.invoice.lineItems?.reduce((r,a)=>r+a.amount,0)}get grandTotal(){return this.subtotal}paymentInstructions=`Please remit payment to:<br>
    Philosia LLC<br>
    Bank: First National Bank<br>
    Account #: 123456789<br>
    Routing #: 987654321<br>
    Reference: INV-2025-001`;notes="Thank you for your business! Please contact us if you have any questions regarding this invoice.";printInvoice(){let r=document.getElementById("invoice-print")?.innerHTML;if(r){let a=window.open("","","height=700,width=900");a&&(a.document.write(`
          <html>
            <head>
              <title>Print Invoice</title>
              <link rel="stylesheet" href="styles.css">
              <style>
                body { font-family: Arial, sans-serif; margin: 2rem; }
                .print\\:hidden { display: none !important; }
                /* Add more styles as needed for print */
              </style>
            </head>
            <body>${r}</body>
          </html>
        `),a.document.close(),a.focus(),setTimeout(()=>{a.print(),a.close()},300))}}sendToBroker(){alert("Invoice sent to broker!")}static \u0275fac=function(a){return new(a||m)(c(k),c(_),c(T),c(A))};static \u0275cmp=I({type:m,selectors:[["app-invoice-detail"]],decls:130,vars:32,consts:[["id","invoice-print",1,"max-w-2xl","mx-auto","p-6","bg-white","rounded-2xl","shadow-2xl","border","border-green-100"],[1,"mb-4","border-b","border-green-200","pb-3"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","items-start","sm:items-center"],[1,"text-2xl","font-extrabold","text-green-900","mb-1","tracking-tight","flex","items-center","gap-2"],[1,"font-semibold","text-base"],[1,"text-gray-700","text-sm"],[1,"mt-1","text-xs","text-gray-600","flex","flex-wrap","gap-4"],[1,"font-semibold"],[1,"mt-4","sm:mt-0","text-right","space-y-1","text-sm"],[1,"font-semibold","text-lg","text-green-900","mb-1","flex","items-center","gap-2"],[1,"flex","flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"flex","flex-col","justify-between","sm:flex-row","gap-6"],[1,"flex-2"],[1,"mb-1"],[1,"flex-3"],[1,"min-w-full","mb-2","border","border-green-300","rounded-lg","shadow-sm","overflow-hidden","text-sm"],[1,"bg-green-100"],[1,"text-left","py-2","px-4","border-b","border-green-200","font-semibold"],[1,"text-right","py-2","px-4","border-b","border-green-200","font-semibold"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-end","space-y-0.5","mt-1","text-sm"],[1,"text-xl","font-extrabold","text-green-800","mt-1"],[1,"font-semibold","text-lg","text-green-900","mb-1","mt-3","flex","items-center","gap-2"],[1,"text-gray-700","text-sm",3,"innerHTML"],[1,"flex","justify-between","gap-2","mb-2","print:hidden"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","shadow","font-semibold","transition",3,"click"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded","shadow","font-semibold","transition",3,"click"],[1,"hover:bg-green-50","transition"],[1,"py-2","px-4","border-b","border-green-100"],[1,"py-2","px-4","border-b","border-green-100","text-right"]],template:function(a,n){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3)(5,"span"),t(6,"\u{1F9FE}"),e(),t(7," Carrier Invoice "),e(),i(8,"div",4),t(9),e(),i(10,"div",5),t(11),e(),i(12,"div",6)(13,"span")(14,"span",7),t(15,"Phone:"),e(),t(16),e(),i(17,"span")(18,"span",7),t(19,"Email:"),e(),t(20),e()()(),i(21,"div",8)(22,"div")(23,"span",7),t(24,"Invoice #:"),e(),t(25),e(),i(26,"div")(27,"span",7),t(28,"Invoice Date:"),e(),t(29),e()()()(),i(30,"div",1)(31,"h3",9)(32,"span"),t(33,"\u{1F3E2}"),e(),t(34," Billed To "),e(),i(35,"div",10)(36,"div")(37,"div",4),t(38),e(),i(39,"div",5),t(40),e(),i(41,"div",6)(42,"span")(43,"span",7),t(44,"Phone:"),e(),t(45),e(),i(46,"span")(47,"span",7),t(48,"Email:"),e(),t(49),e()()(),i(50,"div",8)(51,"div")(52,"span",7),t(53,"Load #:"),e(),t(54),e(),i(55,"div")(56,"span",7),t(57,"PoD #:"),e(),t(58),e()()()(),i(59,"div",1)(60,"h3",9)(61,"span"),t(62,"\u{1F69A}"),e(),t(63," Description of Services "),e(),i(64,"div")(65,"div",11)(66,"div",12)(67,"div",7),t(68,"Pickup Date:"),e(),i(69,"div",13),t(70),e(),i(71,"div",7),t(72,"Delivery Date:"),e(),i(73,"div",13),t(74),e()(),i(75,"div",14)(76,"div",7),t(77,"Origin:"),e(),i(78,"div",13),t(79),p(80,"address"),e(),i(81,"div",7),t(82,"Destination:"),e(),i(83,"div",13),t(84),p(85,"address"),e()()()()(),i(86,"div",1)(87,"h3",9)(88,"span"),t(89,"\u{1F4B2}"),e(),t(90," Rates and Charges "),e(),i(91,"table",15)(92,"thead")(93,"tr",16)(94,"th",17),t(95,"Description"),e(),i(96,"th",18),t(97,"Amount"),e()()(),i(98,"tbody"),D(99,j,6,5,"tr",19),e()(),i(100,"div",20)(101,"div")(102,"span",7),t(103,"Subtotal: "),e(),i(104,"span"),t(105),p(106,"number"),e()(),i(107,"div",21),t(108),p(109,"number"),e()()(),i(110,"div",1)(111,"h3",22)(112,"span"),t(113,"\u{1F3E6}"),e(),t(114," Payment Instructions "),e(),y(115,"div",23),e(),i(116,"div")(117,"h3",9)(118,"span"),t(119,"\u{1F4DD}"),e(),t(120," Notes "),e(),i(121,"div",5),t(122),e()()(),i(123,"div",24)(124,"button",25),b("click",function(){return n.printInvoice()}),t(125," \u{1F5A8}\uFE0F Print Invoice "),e(),i(126,"div"),t(127),e(),i(128,"button",26),b("click",function(){return n.sendToBroker()}),t(129," \u{1F4E4} Send to Broker "),e()()),a&2&&(o(9),s(n.carrier==null?null:n.carrier.name),o(2),s(n.carrier==null?null:n.carrier.address),o(5),d(" ",n.carrier==null?null:n.carrier.contactPhone,""),o(4),d(" ",n.carrier==null?null:n.carrier.contactEmail,""),o(5),d(" ",n.invoice.invoiceNumber,""),o(4),d(" ",n.invoice.invoiceDate,""),o(9),s(n.order.brokerName),o(2),s(n.order.brokerName),o(5),d(" ",n.order.brokerContact,""),o(4),d(" ",n.order.brokerEmail,""),o(5),d(" ",n.invoice.loadNumber,""),o(4),d(" ",n.invoice.podNumber,""),o(12),s(n.order.pickupDateAndTime),o(4),s(n.order.dropOffDateAndTime),o(5),s(g(80,22,n.invoice.origin)),o(5),s(g(85,24,n.invoice.destination)),o(15),f("ngForOf",n.invoice.lineItems),o(6),d("$",v(106,26,n.subtotal,"1.2-2"),""),o(3),d(" Grand Total: $",v(109,29,n.grandTotal,"1.2-2")," "),o(7),f("innerHTML",n.paymentInstructions,E),o(7),d(" ",n.notes," "),o(5),d("Broker email: ",n.invoice.brokerEmail,""))},dependencies:[C,w,u],encapsulation:2})};export{F as CarrierInvoiceDetailComponent};
