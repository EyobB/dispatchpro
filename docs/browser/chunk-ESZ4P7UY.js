import{a as O}from"./chunk-TDTX3JXF.js";import{u as B}from"./chunk-SVMRWARE.js";import{a as N}from"./chunk-DA7YCHM5.js";import"./chunk-XPCCV2FB.js";import{e as P}from"./chunk-KA6K7UZ3.js";import"./chunk-GDLZFIOX.js";import{k as E,l as D,m as M,p as T,q as F}from"./chunk-GEVPNXBN.js";import{Gb as h,Hb as C,Ib as _,Ja as a,Kb as l,Mb as c,Oa as g,Ta as w,Y as f,Ya as x,Z as I,eb as d,ib as n,jb as i,nb as y,qb as b,rb as v,wb as o,xb as p,yb as m,zb as S}from"./chunk-YSP72ENP.js";var j=(r,t)=>({"border-green-200 bg-green-50":r,"border-yellow-200 bg-yellow-50":t}),k=(r,t,e)=>({"text-green-900":r,"text-yellow-900":t,"text-red-900":e}),A=(r,t,e)=>({"bg-green-600 text-white":r,"bg-yellow-600 text-white":t,"bg-red-600 text-white":e}),$=r=>({"text-red-600":r});function R(r,t){if(r&1){let e=y();n(0,"div",17)(1,"div",18),o(2,"\u{1F4C4}"),i(),n(3,"div",19),o(4,"No invoices yet."),i(),n(5,"div",20),o(6,"Your invoices will appear here."),i(),n(7,"button",21),b("click",function(){f(e);let u=v();return I(u.generateNewInvoice())}),o(8," Create First Invoice "),i()()}}function L(r,t){r&1&&(n(0,"div",22),o(1," No invoices match your search criteria. "),i())}function G(r,t){if(r&1&&(n(0,"div",31)(1,"span"),o(2,"Paid Date:"),i(),n(3,"span"),o(4),l(5,"date"),i()()),r&2){let e=v().$implicit;a(4),p(c(5,1,e.paidDate,"MMM dd, yyyy"))}}function Y(r,t){if(r&1&&(n(0,"div",31)(1,"span"),o(2,"Due Date:"),i(),n(3,"span",33),o(4),l(5,"date"),i()()),r&2){let e=v().$implicit,s=v();a(3),d("ngClass",h(5,$,s.isOverdue(e.dueDate))),a(),m(" ",c(5,2,e.dueDate,"MMM dd, yyyy")," ")}}function q(r,t){if(r&1&&(n(0,"div",23)(1,"div",24)(2,"div")(3,"div",25),o(4),i(),n(5,"div",26),o(6),l(7,"date"),i()(),n(8,"div",27)(9,"div",28),o(10),l(11,"number"),i(),n(12,"span",29),o(13),i()()(),n(14,"div",30)(15,"div",31)(16,"span"),o(17,"Period:"),i(),n(18,"span"),o(19),l(20,"date"),l(21,"date"),i()(),n(22,"div",31)(23,"span"),o(24,"Orders:"),i(),n(25,"span"),o(26),i()(),x(27,G,6,4,"div",32)(28,Y,6,7,"div",32),i()()),r&2){let e=t.$implicit;d("ngClass",C(24,j,e.status==="Paid",e.status==="Approved")),a(4),p(e.invoiceNumber),a(2),p(c(7,12,e.issueDate,"MMM dd, yyyy")),a(3),d("ngClass",_(27,k,e.status==="Paid",e.status==="Approved",e.status==="Cancelled")),a(),m(" $",c(11,15,e.netTotal,"1.2-2")," "),a(2),d("ngClass",_(31,A,e.status==="Paid",e.status==="Approved",e.status==="Cancelled")),a(),m(" ",e.status," "),a(6),S("",c(20,18,e.periodStartDate,"MMM dd")," - ",c(21,21,e.periodEndDate,"MMM dd, yyyy"),""),a(7),m("",e.ordersCount," orders"),a(),d("ngIf",e.status==="Paid"),a(),d("ngIf",e.status==="Approved")}}function z(r,t){if(r&1){let e=y();n(0,"div",34)(1,"button",35),b("click",function(){f(e);let u=v();return I(u.loadMoreInvoices())}),o(2," Load More Invoices "),i()()}}var V=class r{constructor(t,e,s){this.router=t;this.driverInvoiceService=e;this.toastService=s}invoices=[];filteredInvoices=[];searchTerm="";statusFilter="";periodFilter="";hasMoreInvoices=!1;ngOnInit(){this.loadInvoices()}loadInvoices(){this.driverInvoiceService.getDriverInvoices().subscribe(t=>{this.invoices=t,this.filteredInvoices=[...this.invoices]},t=>{console.error("Error loading invoices:",t),this.toastService.showError("Failed to load invoices")})}getTotalInvoices(){return this.invoices.length}getTotalEarnings(){return this.invoices.reduce((t,e)=>t+e.netTotal,0)}getPendingInvoices(){return this.invoices.filter(t=>t.status==="New").length}isOverdue(t){return new Date(t)<new Date}viewInvoice(t){console.log("Viewing invoice:",t),this.router.navigate(["/driver/invoice-detail",t])}downloadInvoice(t){console.log("Downloading invoice:",t),this.toastService.showSuccess("Invoice download started",2e3)}downloadAllInvoices(){console.log("Downloading all invoices"),this.toastService.showSuccess("Downloading all invoices...",2e3)}sendReminder(t){console.log("Sending reminder for invoice:",t),this.toastService.showSuccess("Payment reminder sent",2e3)}generateNewInvoice(){console.log("Generating new invoice"),this.router.navigate(["/driver/generate-invoice"])}loadMoreInvoices(){console.log("Loading more invoices"),this.toastService.showInfo("Loading more invoices...",2e3)}static \u0275fac=function(e){return new(e||r)(g(P),g(O),g(N))};static \u0275cmp=w({type:r,selectors:[["app-invoices"]],decls:27,vars:10,consts:[[1,"max-w-md","mx-auto","pt-0"],[1,"text-2xl","font-bold","text-green-900","mb-4","flex","items-center","gap-2"],[1,"mb-6","grid","grid-cols-3","gap-3"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-green-900"],[1,"text-xs","text-green-700"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-blue-900"],[1,"text-xs","text-blue-700"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-yellow-900"],[1,"text-xs","text-yellow-700"],[1,"space-y-3"],["class","text-gray-500 text-center py-8 bg-gray-50 rounded-lg",4,"ngIf"],["class","text-gray-500 text-center py-4 bg-gray-50 rounded-lg",4,"ngIf"],["class","rounded-xl shadow border p-3 flex flex-col gap-3",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center mt-6",4,"ngIf"],[1,"text-gray-500","text-center","py-8","bg-gray-50","rounded-lg"],[1,"text-4xl","mb-2"],[1,"font-semibold"],[1,"text-sm"],[1,"mt-3","bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","text-sm","font-semibold","transition",3,"click"],[1,"text-gray-500","text-center","py-4","bg-gray-50","rounded-lg"],[1,"rounded-xl","shadow","border","p-3","flex","flex-col","gap-3",3,"ngClass"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"text-right"],[1,"font-bold","text-lg",3,"ngClass"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-700","space-y-1"],[1,"flex","justify-between"],["class","flex justify-between",4,"ngIf"],[3,"ngClass"],[1,"text-center","mt-6"],[1,"bg-gray-600","hover:bg-gray-700","text-white","px-6","py-2","rounded","text-sm","font-semibold","transition",3,"click"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"h2",1)(2,"span"),o(3,"\u{1F4C4}"),i(),o(4," Invoices "),i(),n(5,"div",2)(6,"div",3)(7,"div",4),o(8),i(),n(9,"div",5),o(10,"Total Invoices"),i()(),n(11,"div",6)(12,"div",7),o(13),l(14,"number"),i(),n(15,"div",8),o(16,"Total Earnings"),i()(),n(17,"div",9)(18,"div",10),o(19),i(),n(20,"div",11),o(21,"Pending"),i()()(),n(22,"div",12),x(23,R,9,0,"div",13)(24,L,2,0,"div",14)(25,q,29,35,"div",15),i(),x(26,z,3,0,"div",16),i()),e&2&&(a(8),p(s.getTotalInvoices()),a(5),m("$",c(14,7,s.getTotalEarnings(),"1.2-2"),""),a(6),p(s.getPendingInvoices()),a(4),d("ngIf",s.filteredInvoices.length===0&&s.invoices.length===0),a(),d("ngIf",s.filteredInvoices.length===0&&s.invoices.length>0),a(),d("ngForOf",s.filteredInvoices),a(),d("ngIf",s.hasMoreInvoices))},dependencies:[D,M,E,T,F,B],encapsulation:2})};export{V as InvoicesComponent};
