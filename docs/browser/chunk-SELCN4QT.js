import{a as R}from"./chunk-ZTAFIMI3.js";import{b as N,c as W,f as O,i as L,j as B,k as P,o as A}from"./chunk-WIAEWHLW.js";import{g as I}from"./chunk-3KQDNKNL.js";import{l as M,m as F}from"./chunk-B35W4A7H.js";import{Ab as k,Da as w,Ga as c,Kb as V,La as b,Qa as S,Va as g,ab as p,db as t,ea as s,eb as e,fa as m,ib as y,lb as h,mb as T,nb as C,sb as x,tb as a,ub as v,vb as E,yb as _,zb as f}from"./chunk-WMTXBNFA.js";var D=class{id;dotNumber;plate;type;status;driver;insuredUntil;documents;constructor(){this.id="",this.dotNumber="",this.plate="",this.type="",this.status="",this.driver=null,this.insuredUntil=null,this.documents=[]}};function J(o,l){if(o&1&&(t(0,"option",19),a(1),e()),o&2){let i=l.$implicit;p("ngValue",i),c(),v(i.name)}}function j(o,l){if(o&1&&(t(0,"option",20),a(1),e()),o&2){let i=l.$implicit;p("value",i),c(),v(i)}}function z(o,l){if(o&1){let i=y();t(0,"li")(1,"a",23),a(2),e(),t(3,"button",24),h("click",function(){let u=s(i).index,d=T(2);return m(d.deleteDocument(u))}),a(4," Delete "),e()()}if(o&2){let i=l.$implicit;c(),C("href",i.url,w),c(),E(" ",i.name," ")}}function H(o,l){if(o&1&&(t(0,"div")(1,"ul",21),g(2,z,5,2,"li",22),e()()),o&2){let i=T();c(2),p("ngForOf",i.truck.documents)}}function X(o,l){o&1&&(t(0,"div",25),a(1,"No documents available."),e())}function q(o,l){if(o&1&&(t(0,"option",20),a(1),e()),o&2){let i=l.$implicit;p("value",i),c(),v(i)}}var U=class o{constructor(l){this.trucksService=l}truck=new D;drivers=[];truckTypes=["Reefer","Dry Van","Flatbed","Box Truck","Tanker","Step Deck"];documentTypes=["Insurance","Registration","CDL"];newDocument={type:"",url:""};selectedFile=null;ngOnInit(){this.trucksService.getTruck("12345").subscribe(l=>{this.truck=l}),this.drivers=[{id:"1",name:"John Doe",phone:"+1-555-0001",license:"TX123456",expirationDate:"2025-12-31",documents:[]},{id:"2",name:"Jane Smith",phone:"+1-555-0002",license:"CA654321",expirationDate:"2024-11-30",documents:[]}]}onFileSelected(l){let i=l.target;i.files&&i.files.length>0&&(this.selectedFile=i.files[0],this.newDocument.url=this.selectedFile.name)}addDocument(){this.newDocument.type&&this.newDocument.url&&(this.truck.documents=this.truck.documents||[],this.truck.documents.push({name:this.newDocument.type,url:this.newDocument.url}),this.newDocument={type:"",url:""},this.selectedFile=null)}deleteDocument(l){this.truck.documents&&this.truck.documents.splice(l,1)}saveTruckDetails(){this.trucksService.updateTruck(this.truck).subscribe(l=>{console.log("Truck details saved:",l)})}static \u0275fac=function(i){return new(i||o)(b(R))};static \u0275cmp=S({type:o,selectors:[["app-truck-detail"]],decls:47,vars:10,consts:[["noDocs",""],[1,"mx-auto","p-6","bg-white","rounded-xl","shadow-lg"],["routerLink","/dispatcher/trucks",1,"text-green-800","hover:underline","flex","items-center","gap-1","font-medium","mb-4"],[1,"text-xl"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-6","grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"font-semibold"],["type","text",1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-6"],[1,"font-semibold","mb-2"],[4,"ngIf","ngIfElse"],[1,"mt-4","grid","grid-cols-2","gap-4"],["type","file",1,"border","rounded","p-2","w-full","mb-2",3,"change"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded",3,"click"],[1,"flex","gap-4","mt-6"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-2","rounded","shadow","font-semibold","transition",3,"click"],[3,"ngValue"],[3,"value"],[1,"list-disc","pl-5","space-y-1"],[4,"ngFor","ngForOf"],["target","_blank",1,"text-blue-500","underline",3,"href"],[1,"ml-2","text-red-500","hover:text-red-700",3,"click"],[1,"italic","text-gray-500"]],template:function(i,n){if(i&1){let u=y();t(0,"div",1)(1,"a",2)(2,"span",3),a(3,"\u2190"),e(),a(4," Back to Trucks "),e(),t(5,"h2",4)(6,"span"),a(7,"\u{1F69A}"),e(),a(8," Truck Details "),e(),t(9,"div",5)(10,"div")(11,"div",6),a(12,"DOT Number:"),e(),t(13,"input",7),k("ngModelChange",function(r){return s(u),f(n.truck.dotNumber,r)||(n.truck.dotNumber=r),m(r)}),e(),t(14,"div",6),a(15,"Plate:"),e(),t(16,"input",7),k("ngModelChange",function(r){return s(u),f(n.truck.plate,r)||(n.truck.plate=r),m(r)}),e()(),t(17,"div")(18,"div",6),a(19,"Assigned Driver:"),e(),t(20,"select",8),k("ngModelChange",function(r){return s(u),f(n.truck.driver,r)||(n.truck.driver=r),m(r)}),g(21,J,2,2,"option",9),e(),t(22,"div",6),a(23,"Type:"),e(),t(24,"select",8),k("ngModelChange",function(r){return s(u),f(n.truck.type,r)||(n.truck.type=r),m(r)}),g(25,j,2,2,"option",10),e()()(),t(26,"div",11)(27,"div",12),a(28,"Documents:"),e(),g(29,H,3,1,"div",13)(30,X,2,0,"ng-template",null,0,V),t(32,"div",14)(33,"div")(34,"label",6),a(35,"Document Type:"),e(),t(36,"select",8),k("ngModelChange",function(r){return s(u),f(n.newDocument.type,r)||(n.newDocument.type=r),m(r)}),g(37,q,2,2,"option",10),e()(),t(38,"div")(39,"label",6),a(40,"Upload Document:"),e(),t(41,"input",15),h("change",function(r){return s(u),m(n.onFileSelected(r))}),e()()(),t(42,"button",16),h("click",function(){return s(u),m(n.addDocument())}),a(43," Add Document "),e()(),t(44,"div",17)(45,"button",18),h("click",function(){return s(u),m(n.saveTruckDetails())}),a(46," Save Truck "),e()()()}if(i&2){let u=x(31);c(13),_("ngModel",n.truck.dotNumber),c(3),_("ngModel",n.truck.plate),c(4),_("ngModel",n.truck.driver),c(),p("ngForOf",n.drivers),c(3),_("ngModel",n.truck.type),c(),p("ngForOf",n.truckTypes),c(4),p("ngIf",n.truck.documents&&n.truck.documents.length>0)("ngIfElse",u),c(7),_("ngModel",n.newDocument.type),c(),p("ngForOf",n.documentTypes)}},dependencies:[F,M,I,A,B,P,N,L,W,O],encapsulation:2})};export{U as TruckDetailComponent};
