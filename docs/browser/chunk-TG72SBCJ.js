import{a as O}from"./chunk-2HJPDEZU.js";import{u as B}from"./chunk-2PVWNWUN.js";import{a as N}from"./chunk-OXCJF6DH.js";import"./chunk-XPCCV2FB.js";import{e as P}from"./chunk-3TOGTSGL.js";import"./chunk-FSJQQIFH.js";import{k as E,l as D,m as M,p as T,q as F}from"./chunk-QAAQ2EEP.js";import{$ as I,Ab as p,Bb as m,Cb as h,Jb as w,Kb as C,La as a,Lb as _,Nb as l,Pb as c,Qa as g,Va as S,_ as f,_a as x,gb as d,kb as n,lb as t,pb as y,sb as b,tb as v,zb as r}from"./chunk-QJGZKU5F.js";var k=(o,i)=>({"border-green-200 bg-green-50":o,"border-yellow-200 bg-yellow-50":i}),V=(o,i,e)=>({"text-green-900":o,"text-yellow-900":i,"text-red-900":e}),A=(o,i,e)=>({"bg-green-600 text-white":o,"bg-yellow-600 text-white":i,"bg-red-600 text-white":e}),$=o=>({"text-red-600":o});function R(o,i){if(o&1){let e=y();n(0,"div",17)(1,"div",18),r(2,"\u{1F4C4}"),t(),n(3,"div",19),r(4,"No invoices yet."),t(),n(5,"div",20),r(6,"Your invoices will appear here."),t(),n(7,"button",21),b("click",function(){f(e);let u=v();return I(u.generateNewInvoice())}),r(8," Create First Invoice "),t()()}}function L(o,i){o&1&&(n(0,"div",22),r(1," No invoices match your search criteria. "),t())}function Y(o,i){if(o&1&&(n(0,"div",31)(1,"span"),r(2,"Paid Date:"),t(),n(3,"span"),r(4),l(5,"date"),t()()),o&2){let e=v().$implicit;a(4),p(c(5,1,e.paidDate,"MMM dd, yyyy"))}}function q(o,i){if(o&1&&(n(0,"div",31)(1,"span"),r(2,"Due Date:"),t(),n(3,"span",33),r(4),l(5,"date"),t()()),o&2){let e=v().$implicit,s=v();a(3),d("ngClass",w(5,$,s.isOverdue(e.dueDate))),a(),m(" ",c(5,2,e.dueDate,"MMM dd, yyyy")," ")}}function z(o,i){if(o&1&&(n(0,"div",23)(1,"div",24)(2,"div")(3,"div",25),r(4),t(),n(5,"div",26),r(6),l(7,"date"),t()(),n(8,"div",27)(9,"div",28),r(10),l(11,"number"),t(),n(12,"span",29),r(13),t()()(),n(14,"div",30)(15,"div",31)(16,"span"),r(17,"Period:"),t(),n(18,"span"),r(19),l(20,"date"),l(21,"date"),t()(),n(22,"div",31)(23,"span"),r(24,"Orders:"),t(),n(25,"span"),r(26),t()(),x(27,Y,6,4,"div",32)(28,q,6,7,"div",32),t()()),o&2){let e=i.$implicit;d("ngClass",C(24,k,e.status==="Paid",e.status==="Approved")),a(4),p(e.invoiceNumber),a(2),p(c(7,12,e.issueDate,"MMM dd, yyyy")),a(3),d("ngClass",_(27,V,e.status==="Paid",e.status==="Approved",e.status==="Cancelled")),a(),m(" $",c(11,15,e.netTotal,"1.2-2")," "),a(2),d("ngClass",_(31,A,e.status==="Paid",e.status==="Approved",e.status==="Cancelled")),a(),m(" ",e.status," "),a(6),h("",c(20,18,e.periodStartDate,"MMM dd")," - ",c(21,21,e.periodEndDate,"MMM dd, yyyy"),""),a(7),m("",e.ordersCount," orders"),a(),d("ngIf",e.status==="Paid"),a(),d("ngIf",e.status==="Approved")}}function G(o,i){if(o&1){let e=y();n(0,"div",34)(1,"button",35),b("click",function(){f(e);let u=v();return I(u.loadMoreInvoices())}),r(2," Load More Invoices "),t()()}}var j=class o{constructor(i,e,s){this.router=i;this.driverInvoiceService=e;this.toastService=s}invoices=[];filteredInvoices=[];searchTerm="";statusFilter="";periodFilter="";hasMoreInvoices=!1;ngOnInit(){this.loadInvoices()}loadInvoices(){this.driverInvoiceService.getDriverInvoices().subscribe(i=>{this.invoices=i,this.filteredInvoices=[...this.invoices]},i=>{console.error("Error loading invoices:",i),this.toastService.showError("Failed to load invoices")})}getTotalInvoices(){return this.invoices.length}getTotalEarnings(){return this.invoices.reduce((i,e)=>i+e.netTotal,0)}getPendingInvoices(){return this.invoices.filter(i=>i.status==="Draft").length}isOverdue(i){return new Date(i)<new Date}viewInvoice(i){this.router.navigate(["/driver/invoice-detail",i])}downloadInvoice(i){this.toastService.showSuccess("Invoice download started",2e3)}downloadAllInvoices(){this.toastService.showSuccess("Downloading all invoices...",2e3)}sendReminder(i){this.toastService.showSuccess("Payment reminder sent",2e3)}generateNewInvoice(){this.router.navigate(["/driver/generate-invoice"])}loadMoreInvoices(){this.toastService.showInfo("Loading more invoices...",2e3)}static \u0275fac=function(e){return new(e||o)(g(P),g(O),g(N))};static \u0275cmp=S({type:o,selectors:[["app-invoices"]],decls:27,vars:10,consts:[[1,"max-w-md","mx-auto","pt-0"],[1,"text-2xl","font-bold","text-green-900","mb-4","flex","items-center","gap-2"],[1,"mb-6","grid","grid-cols-3","gap-3"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-green-900"],[1,"text-xs","text-green-700"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-blue-900"],[1,"text-xs","text-blue-700"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-yellow-900"],[1,"text-xs","text-yellow-700"],[1,"space-y-3"],["class","text-gray-500 text-center py-8 bg-gray-50 rounded-lg",4,"ngIf"],["class","text-gray-500 text-center py-4 bg-gray-50 rounded-lg",4,"ngIf"],["class","rounded-xl shadow border p-3 flex flex-col gap-3",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center mt-6",4,"ngIf"],[1,"text-gray-500","text-center","py-8","bg-gray-50","rounded-lg"],[1,"text-4xl","mb-2"],[1,"font-semibold"],[1,"text-sm"],[1,"mt-3","bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","text-sm","font-semibold","transition",3,"click"],[1,"text-gray-500","text-center","py-4","bg-gray-50","rounded-lg"],[1,"rounded-xl","shadow","border","p-3","flex","flex-col","gap-3",3,"ngClass"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"text-right"],[1,"font-bold","text-lg",3,"ngClass"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-700","space-y-1"],[1,"flex","justify-between"],["class","flex justify-between",4,"ngIf"],[3,"ngClass"],[1,"text-center","mt-6"],[1,"bg-gray-600","hover:bg-gray-700","text-white","px-6","py-2","rounded","text-sm","font-semibold","transition",3,"click"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"h2",1)(2,"span"),r(3,"\u{1F4C4}"),t(),r(4," Invoices "),t(),n(5,"div",2)(6,"div",3)(7,"div",4),r(8),t(),n(9,"div",5),r(10,"Total Invoices"),t()(),n(11,"div",6)(12,"div",7),r(13),l(14,"number"),t(),n(15,"div",8),r(16,"Total Earnings"),t()(),n(17,"div",9)(18,"div",10),r(19),t(),n(20,"div",11),r(21,"Pending"),t()()(),n(22,"div",12),x(23,R,9,0,"div",13)(24,L,2,0,"div",14)(25,z,29,35,"div",15),t(),x(26,G,3,0,"div",16),t()),e&2&&(a(8),p(s.getTotalInvoices()),a(5),m("$",c(14,7,s.getTotalEarnings(),"1.2-2"),""),a(6),p(s.getPendingInvoices()),a(4),d("ngIf",s.filteredInvoices.length===0&&s.invoices.length===0),a(),d("ngIf",s.filteredInvoices.length===0&&s.invoices.length>0),a(),d("ngForOf",s.filteredInvoices),a(),d("ngIf",s.hasMoreInvoices))},dependencies:[D,M,E,T,F,B],encapsulation:2})};export{j as InvoicesComponent};
