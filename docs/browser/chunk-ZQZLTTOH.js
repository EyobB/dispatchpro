import{a as j}from"./chunk-NEVIWCVR.js";import{c as O,f as B,i as W,j as V,k,o as R}from"./chunk-WIAEWHLW.js";import{f as F}from"./chunk-3KQDNKNL.js";import{k as M,l as N,n as A,o as P,q as T}from"./chunk-B35W4A7H.js";import{Ab as h,Ga as l,Gb as w,Hb as c,Ib as v,Jb as I,La as g,Qa as _,Va as x,ab as m,db as t,ea as y,eb as i,fa as b,ib as D,lb as u,mb as C,tb as n,vb as d,wb as E,yb as f,zb as S}from"./chunk-WMTXBNFA.js";var G=(a,r,e,o)=>({"bg-green-100 text-green-800":a,"bg-yellow-100 text-yellow-800":r,"bg-red-100 text-red-800":e,"bg-blue-100 text-blue-800":o});function q(a,r){if(a&1&&(t(0,"option",20),n(1),i()),a&2){let e=r.$implicit;m("value",e.id),l(),d(" ",e.name," ")}}function z(a,r){if(a&1){let e=D();t(0,"tr",21)(1,"td",22),n(2),i(),t(3,"td",23),n(4),i(),t(5,"td",23),n(6),c(7,"date"),c(8,"date"),i(),t(9,"td",24),n(10),i(),t(11,"td",25),n(12),c(13,"currency"),i(),t(14,"td",25),n(15),c(16,"currency"),i(),t(17,"td",26),n(18),c(19,"currency"),i(),t(20,"td",23)(21,"span",27),n(22),c(23,"titlecase"),i()(),t(24,"td",24)(25,"button",28),u("click",function(){let p=y(e).$implicit,s=C();return b(s.viewInvoice(p))}),n(26," View "),i()()()}if(a&2){let e=r.$implicit;l(2),d(" ",e.invoiceNumber," "),l(2),d(" ",e.driverName," "),l(2),E(" ",I(7,10,e.startDate,"MMM dd")," - ",I(8,13,e.endDate,"MMM dd, yyyy")," "),l(4),d(" ",e.totalTrips," "),l(2),d(" ",v(13,16,e.grossAmount)," "),l(3),d(" ",v(16,18,e.deductions)," "),l(3),d(" ",v(19,20,e.netAmount)," "),l(3),m("ngClass",w(24,G,e.status==="Paid",e.status==="Approved",e.status==="Cancelled",e.status==="New")),l(),d(" ",v(23,22,e.status)," ")}}var L=class a{constructor(r,e){this.invoiceService=r;this.router=e}invoices=[];filteredInvoices=[];drivers=[];selectedDriver="";selectedStatus="";ngOnInit(){this.loadInvoices()}loadInvoices(){this.invoiceService.getDriverInvoices().subscribe({next:r=>{this.invoices=r,this.filteredInvoices=r,this.drivers=Array.from(new Set(r.map(e=>({id:e.driverId,name:e.driverName}))))},error:r=>{console.error("Error loading invoices",r)}})}filterInvoices(){this.filteredInvoices=this.invoices.filter(r=>{let e=!0,o=!0;return this.selectedDriver&&(e=r.driverId===this.selectedDriver),this.selectedStatus&&(o=r.status===this.selectedStatus),e&&o})}getStatusClass(r){switch(r){case"Approved":return"bg-yellow-100 text-yellow-800";case"Paid":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}viewInvoice(r){this.router.navigate(["/dispatcher/driver-invoices",r.id])}static \u0275fac=function(e){return new(e||a)(g(j),g(F))};static \u0275cmp=_({type:a,selectors:[["app-driver-invoices"]],decls:51,vars:4,consts:[[1,"p-6","pt-0"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-4","flex","items-center","gap-4","relative"],[1,"flex","items-center","gap-2","relative"],[1,"font-semibold","text-green-900","mr-2"],[1,"bg-green-50","border","border-green-200","rounded","px-4","py-2","text-sm",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","New"],["value","Approved"],["value","Cancelled"],["value","Paid"],[1,"overflow-x-auto","rounded-lg","shadow-lg","bg-white"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-green-900","text-white"],[1,"px-4","py-3","text-left","font-semibold"],[1,"px-4","py-3","text-center","font-semibold"],[1,"px-4","py-3","text-right","font-semibold"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],[3,"value"],[1,"hover:bg-green-50","transition"],[1,"px-4","py-1","font-medium","text-green-900"],[1,"px-4","py-1"],[1,"px-4","py-1","text-center"],[1,"px-4","py-1","text-right"],[1,"px-4","py-1","text-right","font-semibold"],[1,"inline-block","px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"bg-blue-600","hover:bg-blue-700","transition","text-white","px-3","py-1","rounded","shadow",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2",1)(2,"span"),n(3,"\u{1F4C4}"),i(),n(4," Driver Invoices "),i(),t(5,"div",2)(6,"div",3)(7,"label",4),n(8,"Driver:"),i(),t(9,"select",5),h("ngModelChange",function(s){return S(o.selectedDriver,s)||(o.selectedDriver=s),s}),u("change",function(){return o.filterInvoices()}),t(10,"option",6),n(11,"All Drivers"),i(),x(12,q,2,2,"option",7),i()(),t(13,"div",3)(14,"label",4),n(15,"Status:"),i(),t(16,"select",5),h("ngModelChange",function(s){return S(o.selectedStatus,s)||(o.selectedStatus=s),s}),u("change",function(){return o.filterInvoices()}),t(17,"option",6),n(18,"All Statuses"),i(),t(19,"option",8),n(20,"New"),i(),t(21,"option",9),n(22,"Approved"),i(),t(23,"option",10),n(24,"Cancelled"),i(),t(25,"option",11),n(26,"Paid"),i()()()(),t(27,"div",12)(28,"table",13)(29,"thead",14)(30,"tr")(31,"th",15),n(32,"Invoice #"),i(),t(33,"th",15),n(34,"Driver"),i(),t(35,"th",15),n(36,"Period"),i(),t(37,"th",16),n(38,"Trips"),i(),t(39,"th",17),n(40,"Gross Amount"),i(),t(41,"th",17),n(42,"Deductions"),i(),t(43,"th",17),n(44,"Net Amount"),i(),t(45,"th",15),n(46,"Status"),i(),t(47,"th",16),n(48,"Actions"),i()()(),t(49,"tbody",18),x(50,z,27,29,"tr",19),i()()()()),e&2&&(l(9),f("ngModel",o.selectedDriver),l(3),m("ngForOf",o.drivers),l(4),f("ngModel",o.selectedStatus),l(34),m("ngForOf",o.filteredInvoices))},dependencies:[N,R,V,k,W,O,B,M,P,T,A],encapsulation:2})};export{L as DriverInvoicesComponent};
