import{a as y}from"./chunk-OD4Z4RIU.js";import{a as S}from"./chunk-A3LUHI23.js";import"./chunk-XPCCV2FB.js";import{e as w}from"./chunk-V26HN3KH.js";import"./chunk-5UMXG57Q.js";import{k as T,l as _}from"./chunk-O5HBUBIU.js";import{$ as f,Ab as b,Ka as a,Pa as u,Ua as v,Za as m,_ as x,fb as c,jb as i,kb as t,lb as k,ob as h,rb as g,sb as p,yb as n,zb as s}from"./chunk-ITTAAY47.js";function C(o,r){if(o&1&&(i(0,"div",18),n(1),t()),o&2){let e=p().$implicit;a(),s(e.driver.phone)}}function D(o,r){if(o&1&&(i(0,"span",19),n(1,"\u26A0\uFE0F"),t()),o&2){let e=p().$implicit;c("title",e.warnings.join(", "))}}function F(o,r){if(o&1){let e=h();i(0,"tr",11)(1,"td",12),n(2),t(),i(3,"td",13),n(4),t(),i(5,"td",13),n(6),t(),i(7,"td",13)(8,"div",14),n(9),t(),m(10,C,2,1,"div",15),t(),i(11,"td",13),n(12),t(),i(13,"td",13)(14,"button",16),g("click",function(){let d=x(e).$implicit,I=p();return f(I.viewTruck(d.id))}),n(15," View "),t(),m(16,D,2,1,"span",17),t()()}if(o&2){let e=r.$implicit;a(2),s(e.dotNumber),a(2),s(e.plate),a(2),s(e.type),a(3),s((e.driver==null?null:e.driver.name)||"\u2014"),a(),c("ngIf",e.driver),a(2),b("",e.documents.length?e.documents.length:"No "," documents"),a(4),c("ngIf",e.warnings.length>0)}}function N(o,r){o&1&&(i(0,"div",20)(1,"div",21),k(2,"div",22),i(3,"p",23),n(4,"Loading trucks..."),t()()())}var E=class o{constructor(r,e,l){this.trucksService=r;this.router=e;this.toastService=l}trucks=[];loading=!1;ngOnInit(){this.fetchTrucks()}fetchTrucks(){this.loading=!0,this.trucksService.getTrucks().subscribe(r=>{this.trucks=r,this.loading=!1},r=>{console.error("Error loading trucks",r),this.loading=!1,this.toastService.showError("Failed to load trucks. Please try again later.")})}viewTruck(r){this.router.navigate(["/dispatcher/trucks/",r])}isInsuranceExpiringSoon(r){if(!r)return!0;let e=new Date(r),l=new Date,d=new Date;return d.setMonth(l.getMonth()+1),e<d}addTruck(){this.router.navigate(["/dispatcher/trucks/new"])}static \u0275fac=function(e){return new(e||o)(u(y),u(w),u(S))};static \u0275cmp=v({type:o,selectors:[["app-trucks"]],decls:27,vars:2,consts:[[1,"p-6","pt-0"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-green-900","flex","items-center","gap-2"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","shadow","font-semibold","transition",3,"click"],[1,"overflow-x-auto","rounded-lg","shadow-lg","bg-white"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-green-900","text-white"],[1,"px-4","py-3","text-left","font-semibold"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],["class","grid place-items-center bg-white/70 backdrop-blur-sm",4,"ngIf"],[1,"hover:bg-green-50","transition"],[1,"px-4","py-2","font-medium","text-green-900"],[1,"px-4","py-2"],[1,"font-semibold"],["class","text-xs text-gray-500",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","transition","text-white","px-3","py-1","rounded","shadow",3,"click"],["class","text-yellow-500 align-middle ml-1",3,"title",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"text-yellow-500","align-middle","ml-1",3,"title"],[1,"grid","place-items-center","bg-white/70","backdrop-blur-sm"],[1,"flex","flex-col","items-center"],[1,"h-10","w-10","border-4","border-green-600","border-t-transparent","rounded-full","animate-spin"],[1,"mt-3","text-sm","text-gray-700","font-medium"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span"),n(4,"\u{1F69A}"),t(),n(5," Trucks "),t(),i(6,"button",3),g("click",function(){return l.addTruck()}),n(7," + Add Truck "),t()(),i(8,"div",4)(9,"table",5)(10,"thead",6)(11,"tr")(12,"th",7),n(13,"DOT #"),t(),i(14,"th",7),n(15,"Plate"),t(),i(16,"th",7),n(17,"Type"),t(),i(18,"th",7),n(19,"Driver"),t(),i(20,"th",7),n(21,"Documents"),t(),i(22,"th",7),n(23,"Actions"),t()()(),i(24,"tbody",8),m(25,F,17,7,"tr",9),t()()(),m(26,N,5,0,"div",10),t()),e&2&&(a(25),c("ngForOf",l.trucks),a(),c("ngIf",l.loading))},dependencies:[T,_],encapsulation:2})};export{E as TrucksComponent};
