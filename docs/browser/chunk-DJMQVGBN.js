import{a as O}from"./chunk-2HJPDEZU.js";import{u as B}from"./chunk-2PVWNWUN.js";import{a as k}from"./chunk-OXCJF6DH.js";import"./chunk-XPCCV2FB.js";import{e as N}from"./chunk-3TOGTSGL.js";import"./chunk-FSJQQIFH.js";import{k as D,l as M,m as T,p as F,q as P}from"./chunk-QAAQ2EEP.js";import{$ as I,Ab as p,Bb as m,Cb as w,Jb as C,Kb as E,La as a,Lb as _,Nb as l,Pb as c,Qa as x,Va as h,_ as f,_a as g,gb as d,kb as n,lb as t,mb as S,pb as b,sb as y,tb as v,zb as r}from"./chunk-QJGZKU5F.js";var V=(o,i)=>({"border-green-200 bg-green-50":o,"border-yellow-200 bg-yellow-50":i}),A=(o,i,e)=>({"text-green-900":o,"text-yellow-900":i,"text-red-900":e}),$=(o,i,e)=>({"bg-green-600 text-white":o,"bg-yellow-600 text-white":i,"bg-red-600 text-white":e}),R=o=>({"text-red-600":o});function L(o,i){o&1&&(n(0,"div",18)(1,"div",19),S(2,"div",20),n(3,"p",21),r(4,"Loading invoices\u2026"),t()()())}function z(o,i){if(o&1){let e=b();n(0,"div",22)(1,"div",23),r(2,"\u{1F4C4}"),t(),n(3,"div",24),r(4,"No invoices yet."),t(),n(5,"div",25),r(6,"Your invoices will appear here."),t(),n(7,"button",26),y("click",function(){f(e);let u=v();return I(u.generateNewInvoice())}),r(8," Create First Invoice "),t()()}}function Y(o,i){o&1&&(n(0,"div",27),r(1," No invoices match your search criteria. "),t())}function q(o,i){if(o&1&&(n(0,"div",36)(1,"span"),r(2,"Paid Date:"),t(),n(3,"span"),r(4),l(5,"date"),t()()),o&2){let e=v().$implicit;a(4),p(c(5,1,e.paidDate,"MMM dd, yyyy"))}}function G(o,i){if(o&1&&(n(0,"div",36)(1,"span"),r(2,"Due Date:"),t(),n(3,"span",38),r(4),l(5,"date"),t()()),o&2){let e=v().$implicit,s=v();a(3),d("ngClass",C(5,R,s.isOverdue(e.dueDate))),a(),m(" ",c(5,2,e.dueDate,"MMM dd, yyyy")," ")}}function H(o,i){if(o&1&&(n(0,"div",28)(1,"div",29)(2,"div")(3,"div",30),r(4),t(),n(5,"div",31),r(6),l(7,"date"),t()(),n(8,"div",32)(9,"div",33),r(10),l(11,"number"),t(),n(12,"span",34),r(13),t()()(),n(14,"div",35)(15,"div",36)(16,"span"),r(17,"Period:"),t(),n(18,"span"),r(19),l(20,"date"),l(21,"date"),t()(),n(22,"div",36)(23,"span"),r(24,"Orders:"),t(),n(25,"span"),r(26),t()(),g(27,q,6,4,"div",37)(28,G,6,7,"div",37),t()()),o&2){let e=i.$implicit;d("ngClass",E(24,V,e.status==="Paid",e.status==="Approved")),a(4),p(e.invoiceNumber),a(2),p(c(7,12,e.issueDate,"MMM dd, yyyy")),a(3),d("ngClass",_(27,A,e.status==="Paid",e.status==="Approved",e.status==="Cancelled")),a(),m(" $",c(11,15,e.netTotal,"1.2-2")," "),a(2),d("ngClass",_(31,$,e.status==="Paid",e.status==="Approved",e.status==="Cancelled")),a(),m(" ",e.status," "),a(6),w("",c(20,18,e.periodStartDate,"MMM dd")," - ",c(21,21,e.periodEndDate,"MMM dd, yyyy"),""),a(7),m("",e.ordersCount," orders"),a(),d("ngIf",e.status==="Paid"),a(),d("ngIf",e.status==="Approved")}}function J(o,i){if(o&1){let e=b();n(0,"div",39)(1,"button",40),y("click",function(){f(e);let u=v();return I(u.loadMoreInvoices())}),r(2," Load More Invoices "),t()()}}var j=class o{constructor(i,e,s){this.router=i;this.driverInvoiceService=e;this.toastService=s}loading=!1;invoices=[];filteredInvoices=[];searchTerm="";statusFilter="";periodFilter="";hasMoreInvoices=!1;ngOnInit(){this.loadInvoices()}loadInvoices(){this.loading=!0,this.driverInvoiceService.getDriverInvoices().subscribe(i=>{this.invoices=i,this.filteredInvoices=[...this.invoices],this.loading=!1},i=>{console.error("Error loading invoices:",i),this.toastService.showError("Failed to load invoices"),this.loading=!1})}getTotalInvoices(){return this.invoices.length}getTotalEarnings(){return this.invoices.reduce((i,e)=>i+e.netTotal,0)}getPendingInvoices(){return this.invoices.filter(i=>i.status==="Draft").length}isOverdue(i){return new Date(i)<new Date}viewInvoice(i){this.router.navigate(["/driver/invoice-detail",i])}downloadInvoice(i){this.toastService.showSuccess("Invoice download started",2e3)}downloadAllInvoices(){this.toastService.showSuccess("Downloading all invoices...",2e3)}sendReminder(i){this.toastService.showSuccess("Payment reminder sent",2e3)}generateNewInvoice(){this.router.navigate(["/driver/generate-invoice"])}loadMoreInvoices(){this.toastService.showInfo("Loading more invoices...",2e3)}static \u0275fac=function(e){return new(e||o)(x(N),x(O),x(k))};static \u0275cmp=h({type:o,selectors:[["app-invoices"]],decls:28,vars:11,consts:[["class","fixed inset-0 z-50 grid place-items-center bg-white/70 backdrop-blur-sm",4,"ngIf"],[1,"max-w-md","mx-auto","pt-0"],[1,"text-2xl","font-bold","text-green-900","mb-4","flex","items-center","gap-2"],[1,"mb-6","grid","grid-cols-3","gap-3"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-green-900"],[1,"text-xs","text-green-700"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-blue-900"],[1,"text-xs","text-blue-700"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-yellow-900"],[1,"text-xs","text-yellow-700"],[1,"space-y-3"],["class","text-gray-500 text-center py-8 bg-gray-50 rounded-lg",4,"ngIf"],["class","text-gray-500 text-center py-4 bg-gray-50 rounded-lg",4,"ngIf"],["class","rounded-xl shadow border p-3 flex flex-col gap-3",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center mt-6",4,"ngIf"],[1,"fixed","inset-0","z-50","grid","place-items-center","bg-white/70","backdrop-blur-sm"],[1,"flex","flex-col","items-center"],[1,"h-10","w-10","border-4","border-green-600","border-t-transparent","rounded-full","animate-spin"],[1,"mt-3","text-sm","text-gray-700","font-medium"],[1,"text-gray-500","text-center","py-8","bg-gray-50","rounded-lg"],[1,"text-4xl","mb-2"],[1,"font-semibold"],[1,"text-sm"],[1,"mt-3","bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","text-sm","font-semibold","transition",3,"click"],[1,"text-gray-500","text-center","py-4","bg-gray-50","rounded-lg"],[1,"rounded-xl","shadow","border","p-3","flex","flex-col","gap-3",3,"ngClass"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"text-right"],[1,"font-bold","text-lg",3,"ngClass"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-700","space-y-1"],[1,"flex","justify-between"],["class","flex justify-between",4,"ngIf"],[3,"ngClass"],[1,"text-center","mt-6"],[1,"bg-gray-600","hover:bg-gray-700","text-white","px-6","py-2","rounded","text-sm","font-semibold","transition",3,"click"]],template:function(e,s){e&1&&(g(0,L,5,0,"div",0),n(1,"div",1)(2,"h2",2)(3,"span"),r(4,"\u{1F4C4}"),t(),r(5," Invoices "),t(),n(6,"div",3)(7,"div",4)(8,"div",5),r(9),t(),n(10,"div",6),r(11,"Total Invoices"),t()(),n(12,"div",7)(13,"div",8),r(14),l(15,"number"),t(),n(16,"div",9),r(17,"Total Earnings"),t()(),n(18,"div",10)(19,"div",11),r(20),t(),n(21,"div",12),r(22,"Pending"),t()()(),n(23,"div",13),g(24,z,9,0,"div",14)(25,Y,2,0,"div",15)(26,H,29,35,"div",16),t(),g(27,J,3,0,"div",17),t()),e&2&&(d("ngIf",s.loading),a(9),p(s.getTotalInvoices()),a(5),m("$",c(15,8,s.getTotalEarnings(),"1.2-2"),""),a(6),p(s.getPendingInvoices()),a(4),d("ngIf",s.filteredInvoices.length===0&&s.invoices.length===0),a(),d("ngIf",s.filteredInvoices.length===0&&s.invoices.length>0),a(),d("ngForOf",s.filteredInvoices),a(),d("ngIf",s.hasMoreInvoices))},dependencies:[M,T,D,F,P,B],encapsulation:2})};export{j as InvoicesComponent};
