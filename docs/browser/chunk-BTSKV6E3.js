import{a as k}from"./chunk-WFVDYHUF.js";import{u as N}from"./chunk-WJZQNLUY.js";import{a as P}from"./chunk-A3LUHI23.js";import"./chunk-XPCCV2FB.js";import{e as F}from"./chunk-V26HN3KH.js";import"./chunk-5UMXG57Q.js";import{j as C,k as E,l as D,o as T,p as M}from"./chunk-O5HBUBIU.js";import{$ as b,Ab as m,Bb as _,Ka as s,Kb as u,Nb as l,Pa as g,Pb as c,Ua as w,Za as p,_ as I,fb as d,jb as n,kb as i,lb as S,ob as y,rb as h,sb as x,yb as r,zb as v}from"./chunk-ITTAAY47.js";var B=(o,t,e)=>({"border-green-300 bg-green-100":o,"border-green-200 bg-green-50":t,"border-yellow-200 bg-yellow-50":e}),V=(o,t,e)=>({"text-green-900":o,"text-yellow-900":t,"text-red-900":e}),O=(o,t,e)=>({"bg-green-600 text-white":o,"bg-yellow-600 text-white":t,"bg-red-600 text-white":e});function A(o,t){o&1&&(n(0,"div",18)(1,"div",19),S(2,"div",20),n(3,"p",21),r(4,"Loading invoices\u2026"),i()()())}function R(o,t){if(o&1){let e=y();n(0,"div",22)(1,"div",23),r(2,"\u{1F4C4}"),i(),n(3,"div",24),r(4,"No invoices yet."),i(),n(5,"div",25),r(6,"Your invoices will appear here."),i(),n(7,"button",26),h("click",function(){I(e);let f=x();return b(f.generateNewInvoice())}),r(8," Create First Invoice "),i()()}}function $(o,t){o&1&&(n(0,"div",27),r(1," No invoices match your search criteria. "),i())}function L(o,t){if(o&1&&(n(0,"div",36)(1,"span"),r(2,"Paid Date:"),i(),n(3,"span"),r(4),l(5,"date"),i()()),o&2){let e=x().$implicit;s(4),v(c(5,1,e.paidDate,"MMM dd, yyyy"))}}function z(o,t){if(o&1&&(n(0,"div",28)(1,"div",29)(2,"div")(3,"div",30),r(4),i(),n(5,"div",31),r(6),l(7,"date"),i()(),n(8,"div",32)(9,"div",33),r(10),l(11,"number"),i(),n(12,"span",34),r(13),i()()(),n(14,"div",35)(15,"div",36)(16,"span"),r(17,"Period:"),i(),n(18,"span"),r(19),l(20,"date"),l(21,"date"),i()(),n(22,"div",36)(23,"span"),r(24,"Orders:"),i(),n(25,"span"),r(26),i()(),p(27,L,6,4,"div",37),i()()),o&2){let e=t.$implicit;d("ngClass",u(23,B,e.status==="Completed",e.status==="Paid",e.status==="Approved")),s(4),v(e.invoiceNumber),s(2),v(c(7,11,e.issueDate,"MMM dd, yyyy")),s(3),d("ngClass",u(27,V,e.status==="Paid"||e.status==="Completed",e.status==="Approved",e.status==="Cancelled")),s(),m(" $",c(11,14,e.netTotal,"1.2-2")," "),s(2),d("ngClass",u(31,O,e.status==="Paid"||e.status==="Completed",e.status==="Approved",e.status==="Cancelled")),s(),m(" ",e.status," "),s(6),_("",c(20,17,e.periodStartDate,"MMM dd")," - ",c(21,20,e.periodEndDate,"MMM dd, yyyy"),""),s(7),m("",e.ordersCount," orders"),s(),d("ngIf",e.status==="Paid")}}function Y(o,t){if(o&1){let e=y();n(0,"div",38)(1,"button",39),h("click",function(){I(e);let f=x();return b(f.loadMoreInvoices())}),r(2," Load More Invoices "),i()()}}var j=class o{constructor(t,e,a){this.router=t;this.driverInvoiceService=e;this.toastService=a}loading=!1;invoices=[];filteredInvoices=[];searchTerm="";statusFilter="";periodFilter="";hasMoreInvoices=!1;ngOnInit(){this.loadInvoices()}loadInvoices(){this.loading=!0,this.driverInvoiceService.getDriverInvoices().subscribe(t=>{this.invoices=t.sort((e,a)=>new Date(a.issueDate).getTime()-new Date(e.issueDate).getTime()),this.filteredInvoices=[...this.invoices],this.loading=!1},t=>{console.error("Error loading invoices:",t),this.toastService.showError("Failed to load invoices"),this.loading=!1})}getTotalInvoices(){return this.invoices.length}getTotalEarnings(){return this.invoices.reduce((t,e)=>t+e.netTotal,0)}getPendingInvoices(){return this.invoices.filter(t=>t.status==="Draft").length}isOverdue(t){return new Date(t)<new Date}viewInvoice(t){this.router.navigate(["/driver/invoice-detail",t])}downloadInvoice(t){this.toastService.showSuccess("Invoice download started",2e3)}downloadAllInvoices(){this.toastService.showSuccess("Downloading all invoices...",2e3)}sendReminder(t){this.toastService.showSuccess("Payment reminder sent",2e3)}generateNewInvoice(){this.router.navigate(["/driver/generate-invoice"])}loadMoreInvoices(){this.toastService.showInfo("Loading more invoices...",2e3)}static \u0275fac=function(e){return new(e||o)(g(F),g(k),g(P))};static \u0275cmp=w({type:o,selectors:[["app-invoices"]],decls:28,vars:11,consts:[["class","fixed inset-0 z-50 grid place-items-center bg-white/70 backdrop-blur-sm",4,"ngIf"],[1,"max-w-md","mx-auto","pt-0"],[1,"text-2xl","font-bold","text-green-900","mb-4","flex","items-center","gap-2"],[1,"mb-6","grid","grid-cols-3","gap-3"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-green-900"],[1,"text-xs","text-green-700"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-blue-900"],[1,"text-xs","text-blue-700"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-3"],[1,"text-lg","font-bold","text-yellow-900"],[1,"text-xs","text-yellow-700"],[1,"space-y-3"],["class","text-gray-500 text-center py-8 bg-gray-50 rounded-lg",4,"ngIf"],["class","text-gray-500 text-center py-4 bg-gray-50 rounded-lg",4,"ngIf"],["class","rounded-xl shadow border p-3 flex flex-col gap-3",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center mt-6",4,"ngIf"],[1,"fixed","inset-0","z-50","grid","place-items-center","bg-white/70","backdrop-blur-sm"],[1,"flex","flex-col","items-center"],[1,"h-10","w-10","border-4","border-green-600","border-t-transparent","rounded-full","animate-spin"],[1,"mt-3","text-sm","text-gray-700","font-medium"],[1,"text-gray-500","text-center","py-8","bg-gray-50","rounded-lg"],[1,"text-4xl","mb-2"],[1,"font-semibold"],[1,"text-sm"],[1,"mt-3","bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","text-sm","font-semibold","transition",3,"click"],[1,"text-gray-500","text-center","py-4","bg-gray-50","rounded-lg"],[1,"rounded-xl","shadow","border","p-3","flex","flex-col","gap-3",3,"ngClass"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"text-right"],[1,"font-bold","text-lg",3,"ngClass"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-700","space-y-1"],[1,"flex","justify-between"],["class","flex justify-between",4,"ngIf"],[1,"text-center","mt-6"],[1,"bg-gray-600","hover:bg-gray-700","text-white","px-6","py-2","rounded","text-sm","font-semibold","transition",3,"click"]],template:function(e,a){e&1&&(p(0,A,5,0,"div",0),n(1,"div",1)(2,"h2",2)(3,"span"),r(4,"\u{1F4C4}"),i(),r(5," Invoices "),i(),n(6,"div",3)(7,"div",4)(8,"div",5),r(9),i(),n(10,"div",6),r(11,"Total Invoices"),i()(),n(12,"div",7)(13,"div",8),r(14),l(15,"number"),i(),n(16,"div",9),r(17,"Total Earnings"),i()(),n(18,"div",10)(19,"div",11),r(20),i(),n(21,"div",12),r(22,"Pending"),i()()(),n(23,"div",13),p(24,R,9,0,"div",14)(25,$,2,0,"div",15)(26,z,28,35,"div",16),i(),p(27,Y,3,0,"div",17),i()),e&2&&(d("ngIf",a.loading),s(9),v(a.getTotalInvoices()),s(5),m("$",c(15,8,a.getTotalEarnings(),"1.2-2"),""),s(6),v(a.getPendingInvoices()),s(4),d("ngIf",a.filteredInvoices.length===0&&a.invoices.length===0),s(),d("ngIf",a.filteredInvoices.length===0&&a.invoices.length>0),s(),d("ngForOf",a.filteredInvoices),s(),d("ngIf",a.hasMoreInvoices))},dependencies:[E,D,C,T,M,N],encapsulation:2})};export{j as InvoicesComponent};
