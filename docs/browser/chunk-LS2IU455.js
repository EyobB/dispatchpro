import{a as C}from"./chunk-ZTAFIMI3.js";import{f as I}from"./chunk-3KQDNKNL.js";import{k as y,l as S,m as w,o as E}from"./chunk-B35W4A7H.js";import{Fb as h,Ga as a,Hb as _,Ib as T,La as u,Qa as k,Va as m,ab as d,db as n,ea as v,eb as t,fa as f,ib as b,lb as x,mb as p,tb as i,ub as l,vb as g}from"./chunk-WMTXBNFA.js";var N=(o,r,e)=>({"bg-green-100 text-green-800":o,"bg-yellow-100 text-yellow-800":r,"bg-red-100 text-red-800":e});function M(o,r){if(o&1&&(n(0,"div",18),i(1),t()),o&2){let e=p().$implicit;a(),l(e.driver.phone)}}function A(o,r){o&1&&(n(0,"span",19),i(1,"\u26A0\uFE0F"),t())}function O(o,r){if(o&1){let e=b();n(0,"tr",10)(1,"td",11),i(2),t(),n(3,"td",12),i(4),t(),n(5,"td",12),i(6),t(),n(7,"td",12)(8,"div",13),i(9),t(),m(10,M,2,1,"div",14),t(),n(11,"td",12)(12,"span",15),i(13),t()(),n(14,"td",12),m(15,A,2,0,"span",16),i(16),_(17,"date"),t(),n(18,"td",12)(19,"button",17),x("click",function(){let c=v(e).$implicit,F=p();return f(F.viewTruck(c.dotNumber))}),i(20," View "),t()()()}if(o&2){let e=r.$implicit,s=p();a(2),l(e.dotNumber),a(2),l(e.plate),a(2),l(e.type),a(3),l((e.driver==null?null:e.driver.name)||"\u2014"),a(),d("ngIf",e.driver),a(2),d("ngClass",h(11,N,e.status==="Active",e.status==="In Maintenance",e.status==="Inactive")),a(),g(" ",e.status," "),a(2),d("ngIf",s.isInsuranceExpiringSoon(e.insuredUntil)),a(),g(" ",T(17,9,e.insuredUntil)," ")}}var D=class o{constructor(r,e){this.trucksService=r;this.router=e}trucks=[];ngOnInit(){this.fetchTrucks()}fetchTrucks(){this.trucksService.getTrucks().subscribe(r=>{this.trucks=r})}viewTruck(r){this.router.navigate(["/dispatcher/trucks/",r])}isInsuranceExpiringSoon(r){if(!r)return!0;let e=new Date(r),s=new Date,c=new Date;return c.setMonth(s.getMonth()+1),e<c}addTruck(){}static \u0275fac=function(e){return new(e||o)(u(C),u(I))};static \u0275cmp=k({type:o,selectors:[["app-trucks"]],decls:28,vars:1,consts:[[1,"p-6","pt-0"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-green-900","flex","items-center","gap-2"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","shadow","font-semibold","transition",3,"click"],[1,"overflow-x-auto","rounded-lg","shadow-lg","bg-white"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-green-900","text-white"],[1,"px-4","py-3","text-left","font-semibold"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],[1,"hover:bg-green-50","transition"],[1,"px-4","py-2","font-medium","text-green-900"],[1,"px-4","py-2"],[1,"font-semibold"],["class","text-xs text-gray-500",4,"ngIf"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],["title","Insurance expired or expiring soon","class","text-yellow-500 align-middle ml-1",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","transition","text-white","px-3","py-1","rounded","shadow",3,"click"],[1,"text-xs","text-gray-500"],["title","Insurance expired or expiring soon",1,"text-yellow-500","align-middle","ml-1"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span"),i(4,"\u{1F69A}"),t(),i(5," Trucks "),t(),n(6,"button",3),x("click",function(){return s.addTruck()}),i(7," + Add Truck "),t()(),n(8,"div",4)(9,"table",5)(10,"thead",6)(11,"tr")(12,"th",7),i(13,"DOT #"),t(),n(14,"th",7),i(15,"Plate"),t(),n(16,"th",7),i(17,"Type"),t(),n(18,"th",7),i(19,"Driver"),t(),n(20,"th",7),i(21,"Status"),t(),n(22,"th",7),i(23,"Insured Until"),t(),n(24,"th",7),i(25,"Actions"),t()()(),n(26,"tbody",8),m(27,O,21,15,"tr",9),t()()()()),e&2&&(a(27),d("ngForOf",s.trucks))},dependencies:[S,w,y,E],encapsulation:2})};export{D as TrucksComponent};
