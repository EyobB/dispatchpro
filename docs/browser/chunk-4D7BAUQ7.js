import{b as R}from"./chunk-DDEBU2FK.js";import{a as M}from"./chunk-NQCQ3VFV.js";import{a as O}from"./chunk-TQHTARCV.js";import{a as L}from"./chunk-SMTY5PGD.js";import"./chunk-7GTRUKFK.js";import"./chunk-7LAHPUI6.js";import{a as z}from"./chunk-A3LUHI23.js";import"./chunk-25LA7BX7.js";import"./chunk-ZTGCRYCC.js";import"./chunk-XPCCV2FB.js";import{c as j}from"./chunk-KM6ROI6B.js";import"./chunk-2DXK6GBI.js";import{l as N,m as B,p as P,r as F}from"./chunk-TKJYB7RJ.js";import{$ as m,Ab as d,Ka as a,Nb as I,Pa as p,Pb as T,Qb as V,Rb as A,Ua as C,Za as f,_ as c,fb as u,jb as r,kb as i,lb as y,mb as E,nb as S,ob as D,rb as b,sb as w,x as _,xb as k,yb as n,zb as h}from"./chunk-ITTAAY47.js";var g=class{street;city;state;zip;constructor(){this.street="",this.city="",this.state="",this.zip=""}};var x=class{id;invoiceNumber;loadNumber;podNumber;brokerName;brokerEmail;invoiceDate;dueDate;totalCost;status;orderId;terms;paymentInstructions;notes;lineItems;factoring;service;loadDetails;pickupDate;deliveryDate;origin;destination;documents;constructor(){this.id="",this.invoiceNumber="",this.loadNumber="",this.podNumber="",this.brokerName="",this.brokerEmail="",this.invoiceDate="",this.dueDate="",this.totalCost=0,this.status="",this.orderId="",this.terms="",this.paymentInstructions="",this.notes="",this.service="",this.loadDetails="",this.pickupDate="",this.deliveryDate="",this.origin=new g,this.destination=new g,this.lineItems=[],this.documents=[]}};function Z(s,e){s&1&&(r(0,"div",20)(1,"div",21),y(2,"div",22),r(3,"p",23),n(4,"Loading invoice..."),i()()())}function H(s,e){if(s&1){let t=D();r(0,"li")(1,"a",26),b("click",function(){let l=c(t).$implicit,v=w(2);return m(v.viewDocument(l))}),n(2),i()()}if(s&2){let t=e.$implicit;a(2),d(" ",t.documentType,"")}}function J(s,e){if(s&1&&(E(0),r(1,"ul",24),f(2,H,3,1,"li",25),i(),S()),s&2){let t=w();a(2),u("ngForOf",t.invoice.documents)}}function U(s,e){s&1&&(r(0,"div",27),n(1,"No documents available."),i())}var $=class s{constructor(e,t,o,l){this.carrierService=e;this.invoiceService=t;this.route=o;this.toastService=l}loading=!1;carrier=null;invoice=new x;order=new R;showDocumentViewer=!1;currentDocument=null;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(!e)throw new Error("Invoice ID is required");this.loading=!0,_({carrier:this.carrierService.getCarrier(),invoice:this.invoiceService.getCarrierInvoice(e)}).subscribe(({carrier:t,invoice:o})=>{this.carrier=t,this.invoice=o,this.loading=!1},t=>{this.loading=!1,console.error("Error loading invoice details:",t),this.toastService.showError("Failed to load invoice details.")})}getOriginAddress(e){return{street:e.originStreetAddress,city:e.originCity,state:e.originState,zip:e.originZipcode}}getDestinationAddress(e){return{street:e.destinationStreetAddress,city:e.destinationCity,state:e.destinationState,zip:e.destinationZipcode}}get subtotal(){return this.invoice.lineItems?.reduce((e,t)=>e+t.amount,0)}get grandTotal(){return this.subtotal}paymentInstructions=`Please remit payment to:<br>
    Philosia LLC<br>
    Bank: First National Bank<br>
    Account #: 123456789<br>
    Routing #: 987654321<br>
    Reference: INV-2025-001`;notes="Thank you for your business! Please contact us if you have any questions regarding this invoice.";printInvoice(){let e=document.getElementById("invoice-print")?.innerHTML;if(e){let t=window.open("","","height=700,width=900");t&&(t.document.write(`
          <html>
            <head>
              <title>Print Invoice</title>
              <link rel="stylesheet" href="styles.css">
              <style>
                body { font-family: Arial, sans-serif; margin: 2rem; }
                .print\\:hidden { display: none !important; }
                /* Add more styles as needed for print */
              </style>
            </head>
            <body>${e}</body>
          </html>
        `),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},300))}}sendToBroker(){alert("Invoice sent to broker!")}viewDocument(e){this.currentDocument=e,this.showDocumentViewer=!0}closeDocumentViewer(){this.showDocumentViewer=!1,this.currentDocument=null}onDownloadError(e){console.error("Download failed:",e),this.toastService.showError("Failed to download document")}static \u0275fac=function(t){return new(t||s)(p(O),p(M),p(j),p(z))};static \u0275cmp=C({type:s,selectors:[["app-invoice-detail"]],decls:52,vars:20,consts:[["noDocs",""],["class","fixed inset-0 z-50 grid place-items-center bg-white/70 backdrop-blur-sm",4,"ngIf"],[1,"mx-auto","max-w-4xl","p-6","bg-white","rounded-2xl","shadow-2xl","border","border-green-100","print:shadow-none","print:border-0","print:p-0"],[1,"flex","items-center","justify-between","gap-4","mb-4"],[1,"text-2xl","font-extrabold","text-green-900","tracking-tight","flex","items-center","gap-2"],[1,"hidden","sm:inline-flex","items-center","rounded-full","bg-green-50","text-green-800","px-3","py-1","text-xs","font-medium","border","border-green-100"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-2"],[1,"rounded-xl","border","border-green-100","bg-green-50/40","p-2"],[1,"text-[11px]","font-semibold","uppercase","tracking-wide","text-green-700"],[1,"mt-1","text-lg","font-bold","text-gray-900"],[1,"mt-1","text-lg","font-semibold","text-gray-900"],[1,"mt-1","text-2xl","font-extrabold","text-green-700"],[1,"mt-6","border-t","border-green-200","pt-5"],[1,"font-semibold","text-lg","text-green-900","mb-3","flex","items-center","gap-2"],[4,"ngIf","ngIfElse"],[1,"mt-6","flex","flex-col","sm:flex-row","items-stretch","sm:items-center","justify-between","gap-3","print:hidden"],[1,"sm:hidden","inline-flex","items-center","rounded-full","bg-green-50","text-green-800","px-3","py-1","text-xs","font-medium","border","border-green-100"],[1,"flex","gap-2"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded","shadow","font-semibold","transition",3,"click"],[3,"close","downloadError","document","isVisible"],[1,"fixed","inset-0","z-50","grid","place-items-center","bg-white/70","backdrop-blur-sm"],[1,"flex","flex-col","items-center"],[1,"h-10","w-10","border-4","border-green-600","border-t-transparent","rounded-full","animate-spin"],[1,"mt-3","text-sm","text-gray-700","font-medium"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"flex","items-center","justify-between","gap-3","rounded-lg","border","border-green-100","bg-white","px-3","py-2","text-sm","text-blue-700","hover:bg-blue-50/40","hover:border-blue-200","transition","break-all",3,"click"],[1,"text-sm","text-gray-600","italic"]],template:function(t,o){if(t&1){let l=D();f(0,Z,5,0,"div",1),r(1,"div",2)(2,"div",3)(3,"h2",4)(4,"span"),n(5,"\u{1F9FE}"),i(),n(6," Carrier Invoice "),i(),r(7,"span",5),n(8),i()(),r(9,"dl",6)(10,"div",7)(11,"dt",8),n(12,"Invoice #"),i(),r(13,"dd",9),n(14),i()(),r(15,"div",7)(16,"dt",8),n(17,"Load #"),i(),r(18,"dd",10),n(19),i()(),r(20,"div",7)(21,"dt",8),n(22,"PoD #"),i(),r(23,"dd",10),n(24),i()(),r(25,"div",7)(26,"dt",8),n(27,"Total Cost"),i(),r(28,"dd",11),n(29),I(30,"currency"),i()(),r(31,"div",7)(32,"dt",8),n(33,"Invoice Date"),i(),r(34,"dd",10),n(35),I(36,"date"),i()()(),r(37,"div",12)(38,"h3",13)(39,"span"),n(40,"\u{1F4CE}"),i(),n(41," Documents "),i(),f(42,J,3,1,"ng-container",14)(43,U,2,0,"ng-template",null,0,A),i(),r(45,"div",15)(46,"span",16),n(47),i(),r(48,"div",17)(49,"button",18),b("click",function(){return c(l),m(o.sendToBroker())}),n(50," \u{1F4E4} Send to Broker "),i()()()(),r(51,"app-document-viewer",19),b("close",function(){return c(l),m(o.closeDocumentViewer())})("downloadError",function(q){return c(l),m(o.onDownloadError(q))}),i()}if(t&2){let l=k(44);u("ngIf",o.loading),a(8),d(" Broker: ",o.invoice.brokerEmail||"\u2014"," "),a(6),h(o.invoice.invoiceNumber||"\u2014"),a(5),h(o.invoice.loadNumber||"\u2014"),a(5),h(o.invoice.podNumber||"\u2014"),a(5),d(" ",V(30,12,o.invoice.totalCost,"USD","symbol","1.2-2")," "),a(6),d(" ",T(36,17,o.invoice.invoiceDate,"mediumDate")," "),a(7),u("ngIf",o.invoice.documents==null?null:o.invoice.documents.length)("ngIfElse",l),a(5),d(" Broker: ",o.invoice.brokerEmail||"\u2014"," "),a(4),u("document",o.currentDocument)("isVisible",o.showDocumentViewer)}},dependencies:[B,N,P,F,L],encapsulation:2})};export{$ as CarrierInvoiceDetailComponent};
