import{a as h}from"./chunk-7LB3X3BZ.js";import{b as S,c as x,d as w,e as v,f as y,g as R,m as q,o as C}from"./chunk-7VXK63W2.js";import{e as b}from"./chunk-NLBBH4OK.js";import"./chunk-ZMPNCMD4.js";import{Ia as l,Na as a,Sa as c,eb as e,fb as t,mb as f,sb as n,xb as m,yb as d,zb as g}from"./chunk-LZRDGPC4.js";var M=class u{constructor(i,o){this.router=i;this.sessionService=o}loginRequest={email:"",password:""};login(){this.loginRequest.email&&this.loginRequest.password&&this.sessionService.login(this.loginRequest.email,this.loginRequest.password).subscribe(i=>{if(!i)console.error("Login failed");else if(this.sessionService.isMobileScreen()&&i.roles.includes("driver"))this.router.navigate(["/driver/orders"]);else if(i.roles.includes("dispatcher")&&!this.sessionService.isMobileScreen())this.router.navigate(["/dispatcher/orders"]);else{this.sessionService.logout();let o="This device is not suitable for your role: "+i.roles.concat(", ");this.router.navigate(["/error",o])}},i=>{console.error("Login error:",i)})}resetForm(){this.loginRequest.email="",this.loginRequest.password=""}static \u0275fac=function(o){return new(o||u)(a(b),a(h))};static \u0275cmp=c({type:u,selectors:[["app-login"]],decls:25,vars:2,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-green-100","to-green-300","px-2"],[1,"bg-white","rounded-2xl","shadow-2xl","p-6","sm:p-8","w-full","max-w-md"],[1,"flex","flex-col","items-center","mb-6"],[1,"text-5xl","mb-2"],[1,"text-3xl","font-bold","text-green-900","mb-2","text-center"],[1,"text-green-700","text-center"],[1,"space-y-4",3,"ngSubmit"],[1,"mb-4"],["for","email",1,"block","text-green-900","font-semibold","mb-1"],["id","email","type","email","name","email","placeholder","you@email.com","required","",1,"w-full","border","border-green-200","rounded","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-400",3,"ngModelChange","ngModel"],["for","password",1,"block","text-green-900","font-semibold","mb-1"],["id","password","type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","border","border-green-200","rounded","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-400",3,"ngModelChange","ngModel"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","gap-2"],["href","#",1,"text-green-700","hover:underline","text-sm","text-right"],["type","submit",1,"w-full","bg-green-600","hover:bg-green-700","text-white","font-bold","py-2","rounded","transition"],[1,"mt-6","text-center","text-green-800","text-sm"]],template:function(o,r){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),n(4,"\u{1F69A}"),t(),e(5,"h2",4),n(6,"DispatchPro Login"),t(),e(7,"p",5),n(8,"Sign in to your account"),t()(),e(9,"form",6),f("ngSubmit",function(){return r.login()}),e(10,"div",7)(11,"label",8),n(12,"Email"),t(),e(13,"input",9),g("ngModelChange",function(s){return d(r.loginRequest.email,s)||(r.loginRequest.email=s),s}),t()(),e(14,"div",7)(15,"label",10),n(16,"Password"),t(),e(17,"input",11),g("ngModelChange",function(s){return d(r.loginRequest.password,s)||(r.loginRequest.password=s),s}),t()(),e(18,"div",12)(19,"a",13),n(20,"Forgot password?"),t()(),e(21,"button",14),n(22," Sign In "),t()(),e(23,"div",15),n(24," \xA9 2025 DispatcherPro. All rights reserved. "),t()()()),o&2&&(l(13),m("ngModel",r.loginRequest.email),l(4),m("ngModel",r.loginRequest.password))},dependencies:[C,R,S,x,w,q,y,v],encapsulation:2})};export{M as LoginComponent};
