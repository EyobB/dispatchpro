import{a as x,b as N}from"./chunk-7GTRUKFK.js";import{b as T,d as A,g as F,l as E,m as M,n as k,u as V}from"./chunk-ZE6XRCVF.js";import{a as W}from"./chunk-F4RGHGPV.js";import{l as I,m as S}from"./chunk-RIFGPENF.js";import{$ as s,Ab as C,Eb as D,Fb as w,Gb as h,La as p,Qa as v,Va as y,_ as m,_a as f,gb as a,ha as b,kb as i,lb as o,pb as _,sb as g,tb as u,zb as d}from"./chunk-OP2CD5JB.js";function L(r,t){if(r&1){let e=_();i(0,"button",2),g("click",function(){m(e);let n=u();return s(n.toggleForm())}),d(1,` Add Document
`),o()}}function P(r,t){if(r&1&&(i(0,"option",13),d(1),o()),r&2){let e=t.$implicit;a("value",e),p(),C(e)}}function U(r,t){if(r&1){let e=_();i(0,"div",3)(1,"h3",4),d(2,' To add a new document, fill out the form below and click "Upload Document". '),o(),i(3,"div")(4,"div",5)(5,"div")(6,"label",6),d(7,"Document Type:"),o(),i(8,"select",7),h("ngModelChange",function(n){m(e);let c=u();return w(c.newDocument.documentType,n)||(c.newDocument.documentType=n),s(n)}),f(9,P,2,2,"option",8),o()(),i(10,"div")(11,"label",6),d(12,"Expiration Date:"),o(),i(13,"input",9),h("ngModelChange",function(n){m(e);let c=u();return w(c.newDocument.expires,n)||(c.newDocument.expires=n),s(n)}),o()()(),i(14,"div",10)(15,"label",6),d(16,"Click the box below to upload document:"),o(),i(17,"input",11),g("change",function(n){m(e);let c=u();return s(c.onFileSelected(n))}),o()(),i(18,"div",5)(19,"button",12),g("click",function(){m(e);let n=u();return s(n.uploadDocument())}),d(20," Upload Document "),o()()()()}if(r&2){let e=u();p(8),D("ngModel",e.newDocument.documentType),p(),a("ngForOf",e.documentTypes),p(4),D("ngModel",e.newDocument.expires)}}var O=class r{constructor(t){this.documentsService=t}isCollapsed=!0;newDocument=new x;selectedFile=null;documentTypes=[];driverId=null;truckId=null;orderId=null;documentAdded=new b;toggleForm(){this.isCollapsed=!1}onFileSelected(t){let e=t.target;e.files&&e.files.length>0&&(this.selectedFile=e.files[0],this.newDocument.fileType=this.selectedFile.type)}uploadDocument(){if(this.newDocument.documentType&&this.selectedFile&&this.newDocument.expires){let t=new N(this.newDocument,this.selectedFile);this.driverId&&(t.driverId=this.driverId),this.truckId&&(t.truckId=this.truckId),this.orderId&&(t.orderId=this.orderId),this.documentsService.uploadFile(t).subscribe({next:e=>{this.newDocument.id=e.id,this.newDocument.url=e.url,this.newDocument.fileName=e.fileName,this.documentAdded.emit(this.newDocument),this.clear(),this.isCollapsed=!0},error:e=>{console.error("Error uploading document:",e)}})}}clear(){this.newDocument=new x,this.selectedFile=null}static \u0275fac=function(e){return new(e||r)(v(W))};static \u0275cmp=y({type:r,selectors:[["app-add-document"]],inputs:{documentTypes:"documentTypes",driverId:"driverId",truckId:"truckId",orderId:"orderId"},outputs:{documentAdded:"documentAdded"},decls:2,vars:2,consts:[["class","bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 mb-4",3,"click",4,"ngIf"],["class","border rounded-lg bg-blue-100 p-2",4,"ngIf"],[1,"bg-gray-500","text-white","px-4","py-2","rounded","hover:bg-gray-600","mb-4",3,"click"],[1,"border","rounded-lg","bg-blue-100","p-2"],[1,"text-lg","font-semibold","mb-2","bg-red-100"],[1,"mt-4","grid","grid-cols-2","gap-4"],[1,"font-semibold"],[1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","date","placeholder","Document Expiration",1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],[1,"grid","grid-rows-2"],["type","file",1,"border","rounded","w-full","text-green-500",3,"change"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","hover:bg-blue-600",3,"click"],[3,"value"]],template:function(e,l){e&1&&f(0,L,2,0,"button",0)(1,U,21,3,"div",1),e&2&&(a("ngIf",l.isCollapsed),p(),a("ngIf",!l.isCollapsed))},dependencies:[S,I,V,M,k,T,E,A,F],encapsulation:2})};export{O as a};
