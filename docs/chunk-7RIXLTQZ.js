import{a as J}from"./chunk-M5UZXDQZ.js";import"./chunk-YVMMS243.js";import{a as U}from"./chunk-4C7HMYZA.js";import{b as W,c as O,f as P,i as A,j as L,k as B,o as R}from"./chunk-WIAEWHLW.js";import{g as N}from"./chunk-3KQDNKNL.js";import{l as F,m as I}from"./chunk-B35W4A7H.js";import{Ab as k,Da as b,Ga as s,Kb as V,La as x,Qa as S,Va as g,a as D,ab as d,db as i,ea as m,eb as t,fa as u,ib as h,lb as v,mb as y,nb as C,sb as E,tb as a,ub as w,wb as M,yb as _,zb as f}from"./chunk-WMTXBNFA.js";var T=class{id;dotNumber;plate;trailerPlate;type;driver;insuredUntil;documents;warnings=[];constructor(){this.id="",this.dotNumber="",this.plate="",this.type="",this.driver=null,this.insuredUntil=null,this.documents=[],this.trailerPlate="",this.warnings=[]}};function z(o,n){if(o&1&&(i(0,"option",20),a(1),t()),o&2){let e=n.$implicit;d("ngValue",e),s(),w(e.name)}}function H(o,n){if(o&1&&(i(0,"option",21),a(1),t()),o&2){let e=n.$implicit;d("value",e),s(),w(e)}}function X(o,n){if(o&1&&(i(0,"li"),a(1),t()),o&2){let e=n.$implicit;s(),w(e)}}function q(o,n){if(o&1&&(i(0,"div",22)(1,"strong"),a(2,"Warnings:"),t(),i(3,"ul",23),g(4,X,2,1,"li",24),t()()),o&2){let e=y();s(4),d("ngForOf",e.truck.warnings)}}function G(o,n){if(o&1){let e=h();i(0,"li")(1,"a",26),a(2),t(),i(3,"button",27),v("click",function(){let c=m(e).index,p=y(2);return u(p.deleteDocument(c))}),a(4," Delete "),t()()}if(o&2){let e=n.$implicit;s(),C("href",e.url,b),s(),M(" ",e.name," (",e.expires?"Exp: "+e.expires:"No Expiry",") ")}}function K(o,n){if(o&1&&(i(0,"div")(1,"ul",25),g(2,G,5,3,"li",24),t()()),o&2){let e=y();s(2),d("ngForOf",e.truck.documents)}}function Q(o,n){o&1&&(i(0,"div",28),a(1,"No documents available."),t())}var j=class o{constructor(n){this.trucksService=n}truck=new T;drivers=[];truckTypes=["Reefer","Dry Van","Flatbed","Box Truck","Tanker","Step Deck"];documentTypes=["Insurance","Registration","CDL"];newDocument={type:"",url:""};selectedFile=null;ngOnInit(){this.trucksService.getTruck("12345").subscribe(n=>{this.truck=n}),this.drivers=[{id:"1",name:"John Doe",phone:"+1-555-0001",licenseState:"TX",licenseNumber:"123456",expirationDate:"2025-12-31",documents:[],warnings:[]},{id:"2",name:"Jane Smith",phone:"+1-555-0002",licenseState:"CA",licenseNumber:"654321",expirationDate:"2024-11-30",documents:[],warnings:[]}]}onFileSelected(n){let e=n.target;e.files&&e.files.length>0&&(this.selectedFile=e.files[0],this.newDocument.url=this.selectedFile.name)}addDocument(n){n.name&&n.url&&n.expires&&(this.truck.documents=this.truck.documents||[],this.truck.documents.push(D({},n)))}deleteDocument(n){this.truck.documents&&this.truck.documents.splice(n,1)}saveTruckDetails(){this.trucksService.updateTruck(this.truck).subscribe(n=>{})}static \u0275fac=function(e){return new(e||o)(x(U))};static \u0275cmp=S({type:o,selectors:[["app-truck-detail"]],decls:42,vars:11,consts:[["noDocs",""],[1,"mx-auto","p-6","bg-white","rounded-xl","shadow-lg"],["routerLink","/dispatcher/trucks",1,"text-green-800","hover:underline","flex","items-center","gap-1","font-medium","mb-4"],[1,"text-xl"],[1,"text-3xl","font-bold","mb-6","text-green-900","flex","items-center","gap-2"],[1,"mb-6","grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"font-semibold"],["type","text",1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-x-2"],[1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-6"],["class","bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-2 rounded mb-4",4,"ngIf"],[1,"font-semibold","mb-2"],[4,"ngIf","ngIfElse"],[1,"py-2","w-1/2"],[3,"documentAdded","documentTypes"],[1,"flex","gap-4","mt-6"],[1,"bg-green-600","hover:bg-green-700","text-white","px-6","py-2","rounded","shadow","font-semibold","transition",3,"click"],[3,"ngValue"],[3,"value"],[1,"bg-yellow-100","border","border-yellow-400","text-yellow-700","px-4","py-2","rounded","mb-4"],[1,"list-disc","pl-5"],[4,"ngFor","ngForOf"],[1,"list-disc","pl-5","space-y-1"],["target","_blank",1,"text-blue-500","underline",3,"href"],[1,"ml-2","text-red-500","hover:text-red-700",3,"click"],[1,"italic","text-gray-500"]],template:function(e,r){if(e&1){let c=h();i(0,"div",1)(1,"a",2)(2,"span",3),a(3,"\u2190"),t(),a(4," Back to Trucks "),t(),i(5,"h2",4)(6,"span"),a(7,"\u{1F69A}"),t(),a(8," Truck Details "),t(),i(9,"div",5)(10,"div")(11,"div",6),a(12,"DOT Number:"),t(),i(13,"input",7),k("ngModelChange",function(l){return m(c),f(r.truck.dotNumber,l)||(r.truck.dotNumber=l),u(l)}),t(),i(14,"div",8)(15,"div",6),a(16,"Plate:"),t(),i(17,"div",6),a(18,"Trailer Plate:"),t(),i(19,"input",7),k("ngModelChange",function(l){return m(c),f(r.truck.plate,l)||(r.truck.plate=l),u(l)}),t(),i(20,"input",7),k("ngModelChange",function(l){return m(c),f(r.truck.trailerPlate,l)||(r.truck.trailerPlate=l),u(l)}),t()()(),i(21,"div")(22,"div",6),a(23,"Assigned Driver:"),t(),i(24,"select",9),k("ngModelChange",function(l){return m(c),f(r.truck.driver,l)||(r.truck.driver=l),u(l)}),g(25,z,2,2,"option",10),t(),i(26,"div",6),a(27,"Type:"),t(),i(28,"select",9),k("ngModelChange",function(l){return m(c),f(r.truck.type,l)||(r.truck.type=l),u(l)}),g(29,H,2,2,"option",11),t()()(),i(30,"div",12),g(31,q,5,1,"div",13),i(32,"div",14),a(33,"Documents:"),t(),g(34,K,3,1,"div",15)(35,Q,2,0,"ng-template",null,0,V),i(37,"div",16)(38,"app-add-document",17),v("documentAdded",function(l){return m(c),u(r.addDocument(l))}),t()()(),i(39,"div",18)(40,"button",19),v("click",function(){return m(c),u(r.saveTruckDetails())}),a(41," Save Truck "),t()()()}if(e&2){let c=E(36);s(13),_("ngModel",r.truck.dotNumber),s(6),_("ngModel",r.truck.plate),s(),_("ngModel",r.truck.trailerPlate),s(4),_("ngModel",r.truck.driver),s(),d("ngForOf",r.drivers),s(3),_("ngModel",r.truck.type),s(),d("ngForOf",r.truckTypes),s(2),d("ngIf",r.truck.warnings&&r.truck.warnings.length>0),s(3),d("ngIf",r.truck.documents&&r.truck.documents.length>0)("ngIfElse",c),s(4),d("documentTypes",r.documentTypes)}},dependencies:[I,F,N,R,L,B,W,A,O,P,J],encapsulation:2})};export{j as TruckDetailComponent};
