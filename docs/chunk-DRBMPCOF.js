import{a as R}from"./chunk-D7DOKIYQ.js";import{b as P,d as L,g as V,l as W,m as A,n as j,u as B}from"./chunk-VDT5TDP2.js";import{a as k}from"./chunk-A3LUHI23.js";import"./chunk-XPCCV2FB.js";import{e as O}from"./chunk-KM6ROI6B.js";import"./chunk-2DXK6GBI.js";import{k as N,l as M,m as F,q as D}from"./chunk-TKJYB7RJ.js";import{$ as I,Ab as g,Db as f,Eb as h,Fb as x,Ka as a,Kb as y,Nb as E,Pa as p,Pb as T,Ua as C,Za as v,_ as S,fb as c,jb as t,kb as i,lb as b,ob as _,rb as u,sb as w,yb as n,zb as d}from"./chunk-ITTAAY47.js";var z=(s,r,e)=>({"bg-green-100 text-green-800":s,"bg-yellow-100 text-yellow-800":r,"bg-red-100 text-red-800":e});function G(s,r){if(s&1&&(t(0,"option",15),n(1),i()),s&2){let e=r.$implicit;c("value",e),a(),d(e)}}function H(s,r){if(s&1){let e=_();t(0,"tr",16)(1,"td",17),n(2),i(),t(3,"td",18),n(4),i(),t(5,"td",18),n(6),i(),t(7,"td",18),n(8),i(),t(9,"td",18),n(10),E(11,"number"),i(),t(12,"td",18),n(13),i(),t(14,"td",18)(15,"span",19),n(16),i()(),t(17,"td",18)(18,"button",20),u("click",function(){let m=S(e).$implicit,l=w();return I(l.viewInvoice(m))}),n(19," View "),i()()()}if(s&2){let e=r.$implicit;a(2),d(e.invoiceNumber),a(2),d(e.loadNumber),a(2),d(e.brokerName),a(2),d(e.invoiceDate),a(2),g("$",T(11,8,e.totalCost,"1.2-2"),""),a(3),d(e.factoring?e.factoring:"No"),a(2),c("ngClass",y(11,z,e.status==="Paid",e.status==="Pending",e.status==="Overdue")),a(),g(" ",e.status," ")}}function J(s,r){s&1&&(t(0,"tr")(1,"td",21),n(2,"No invoices found."),i()())}function K(s,r){s&1&&(t(0,"div",22)(1,"div",23),b(2,"div",24),t(3,"p",25),n(4,"Loading carrier invoices..."),i()()())}var q=class s{constructor(r,e,o){this.router=r;this.invoiceService=e;this.toastService=o}invoices=[];filteredInvoices=[];statuses=["Pending","Overdue","Paid"];searchTerm="";selectedStatus="";loading=!1;ngOnInit(){this.loading=!0,this.invoiceService.getCarrierInvoices().subscribe(r=>{this.invoices=r,this.filteredInvoices=this.invoices,this.loading=!1},r=>{console.error("Error loading invoices:",r),this.loading=!1,this.toastService.showError("Failed to load carrier invoices. Try reloading the app.",5e3)})}filterInvoices(){this.filteredInvoices=this.invoices.filter(r=>{let e=this.selectedStatus?r.status===this.selectedStatus:!0,o=this.searchTerm?(r.invoiceNumber+r.brokerName+r.status).toLowerCase().includes(this.searchTerm.toLowerCase()):!0;return e&&o})}viewInvoice(r){this.router.navigate(["/dispatcher/carrier-invoices",r.id])}static \u0275fac=function(e){return new(e||s)(p(O),p(R),p(k))};static \u0275cmp=C({type:s,selectors:[["app-carrier-invoices"]],decls:35,vars:6,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-green-900","flex","items-center","gap-2"],[1,"mb-4","flex","flex-col","sm:flex-row","gap-2","sm:items-center"],["type","text","placeholder","Search by Invoice #, Customer, or Status",1,"border","border-green-200","rounded","p-2","w-full","sm:w-64",3,"ngModelChange","input","ngModel"],[1,"border","border-green-200","rounded","p-2","w-full","sm:w-48",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"overflow-x-auto","rounded-lg","shadow","bg-white"],[1,"min-w-full","divide-y","divide-green-100"],[1,"bg-green-900","text-white"],[1,"px-4","py-2","text-left","font-semibold"],[1,"bg-white","divide-y","divide-green-50"],["class","hover:bg-green-50 transition",4,"ngFor","ngForOf"],[4,"ngIf"],["class","grid place-items-center bg-white/70 backdrop-blur-sm",4,"ngIf"],[3,"value"],[1,"hover:bg-green-50","transition"],[1,"px-4","py-2","font-semibold"],[1,"px-4","py-2"],[1,"px-2","py-1","rounded","text-xs","font-semibold",3,"ngClass"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-1","rounded","shadow",3,"click"],["colspan","6",1,"text-center","text-gray-500","py-6"],[1,"grid","place-items-center","bg-white/70","backdrop-blur-sm"],[1,"flex","flex-col","items-center"],[1,"h-10","w-10","border-4","border-green-600","border-t-transparent","rounded-full","animate-spin"],[1,"mt-3","text-sm","text-gray-700","font-medium"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2",1)(2,"span"),n(3,"\u{1F9FE}"),i(),n(4,"Carrier Invoices "),i()(),t(5,"div",2)(6,"input",3),x("ngModelChange",function(l){return h(o.searchTerm,l)||(o.searchTerm=l),l}),u("input",function(){return o.filterInvoices()}),i(),t(7,"select",4),x("ngModelChange",function(l){return h(o.selectedStatus,l)||(o.selectedStatus=l),l}),u("change",function(){return o.filterInvoices()}),t(8,"option",5),n(9,"All Statuses"),i(),v(10,G,2,2,"option",6),i()(),t(11,"div",7)(12,"table",8)(13,"thead",9)(14,"tr")(15,"th",10),n(16,"Invoice #"),i(),t(17,"th",10),n(18,"Load #"),i(),t(19,"th",10),n(20,"Broker"),i(),t(21,"th",10),n(22,"Date"),i(),t(23,"th",10),n(24,"Amount"),i(),t(25,"th",10),n(26,"Factoring?"),i(),t(27,"th",10),n(28,"Status"),i(),t(29,"th",10),n(30,"Actions"),i()()(),t(31,"tbody",11),v(32,H,20,15,"tr",12)(33,J,3,0,"tr",13),i()()(),v(34,K,5,0,"div",14)),e&2&&(a(6),f("ngModel",o.searchTerm),a(),f("ngModel",o.selectedStatus),a(3),c("ngForOf",o.statuses),a(22),c("ngForOf",o.filteredInvoices),a(),c("ngIf",o.filteredInvoices.length===0),a(),c("ngIf",o.loading))},dependencies:[B,A,j,P,W,L,V,D,M,N,F],encapsulation:2})};export{q as CarrierInvoicesComponent};
