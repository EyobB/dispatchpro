import{a as R}from"./chunk-JYZQW2UA.js";import{a as j}from"./chunk-RYHISPQ6.js";import{b as k,c as N,f as L,i as O,j as A,k as P,o as B}from"./chunk-WIAEWHLW.js";import{d as W}from"./chunk-3KQDNKNL.js";import{l as I,m as F}from"./chunk-B35W4A7H.js";import{Ab as g,Da as b,Ga as s,Kb as C,La as f,Qa as E,Va as D,a as y,ab as u,db as n,ea as m,eb as i,fa as p,ib as w,lb as x,mb as c,nb as M,sb as S,tb as d,ub as T,vb as V,yb as v,zb as _}from"./chunk-WMTXBNFA.js";var h=class{id;name;phone;license;expirationDate;truck;documents;constructor(){this.id="",this.name="",this.phone="",this.license="",this.expirationDate="",this.truck=null,this.documents=[]}};function z(l,r){if(l&1){let e=w();n(0,"li")(1,"a",19),d(2),i(),n(3,"button",20),x("click",function(){let t=m(e).index,a=c(3);return p(a.deleteDocument(t))}),d(4," Delete "),i()()}if(l&2){let e=r.$implicit;s(),M("href",e.url,b),s(),V(" ",e.name," ")}}function H(l,r){if(l&1&&(n(0,"ul",17),D(1,z,5,2,"li",18),i()),l&2){let e=c(2);s(),u("ngForOf",e.driver.documents)}}function q(l,r){l&1&&(n(0,"span",21),d(1,"No documents available."),i())}function G(l,r){if(l&1&&(n(0,"option",22),d(1),i()),l&2){let e=r.$implicit;u("value",e),s(),T(e)}}function J(l,r){if(l&1){let e=w();n(0,"div")(1,"div",5)(2,"div",6)(3,"label",7),d(4,"Name:"),i(),n(5,"input",8),g("ngModelChange",function(t){m(e);let a=c();return _(a.driver.name,t)||(a.driver.name=t),p(t)}),i()(),n(6,"div",6)(7,"label",7),d(8,"Phone:"),i(),n(9,"input",8),g("ngModelChange",function(t){m(e);let a=c();return _(a.driver.phone,t)||(a.driver.phone=t),p(t)}),i()(),n(10,"div",6)(11,"label",7),d(12,"License:"),i(),n(13,"input",8),g("ngModelChange",function(t){m(e);let a=c();return _(a.driver.license,t)||(a.driver.license=t),p(t)}),i()(),n(14,"div",6)(15,"label",7),d(16,"License Expiration:"),i(),n(17,"input",9),g("ngModelChange",function(t){m(e);let a=c();return _(a.driver.expirationDate,t)||(a.driver.expirationDate=t),p(t)}),i()()(),n(18,"div",6)(19,"label",7),d(20,"Documents:"),i(),D(21,H,2,1,"ul",10)(22,q,2,0,"ng-template",null,1,C),n(24,"div",11)(25,"div")(26,"label",7),d(27,"Document Type:"),i(),n(28,"select",12),g("ngModelChange",function(t){m(e);let a=c();return _(a.newDocument.name,t)||(a.newDocument.name=t),p(t)}),D(29,G,2,2,"option",13),i()(),n(30,"div")(31,"label",7),d(32,"Upload Document:"),i(),n(33,"input",14),x("change",function(t){m(e);let a=c();return p(a.onFileSelected(t))}),i()()(),n(34,"button",15),x("click",function(){m(e);let t=c();return p(t.addDocument())}),d(35," Add Document "),i()(),n(36,"button",16),x("click",function(){m(e);let t=c();return p(t.saveDriverDetails())}),d(37," Save "),i()()}if(l&2){let e=S(23),o=c();s(5),v("ngModel",o.driver.name),s(4),v("ngModel",o.driver.phone),s(4),v("ngModel",o.driver.license),s(4),v("ngModel",o.driver.expirationDate),s(4),u("ngIf",o.driver.documents==null?null:o.driver.documents.length)("ngIfElse",e),s(7),v("ngModel",o.newDocument.name),s(),u("ngForOf",o.documentTypes)}}function K(l,r){l&1&&(n(0,"div",23),d(1,"Loading driver details..."),i())}var U=class l{constructor(r,e,o){this.route=r;this.driverService=e;this.settingsService=o}driver=new h;newDocument={name:"",url:""};selectedFile=null;documentTypes=[];ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r&&this.driverService.getDriver(r).subscribe(e=>{this.driver=e}),this.loadDocumentTypes()}loadDocumentTypes(){this.settingsService.getSettings().subscribe(r=>{this.documentTypes=r.driverDocuments})}onFileSelected(r){let e=r.target;e.files&&e.files.length>0&&(this.selectedFile=e.files[0],this.newDocument.url=this.selectedFile.name)}addDocument(){this.newDocument.name&&this.newDocument.url&&(this.driver.documents=this.driver.documents||[],this.driver.documents.push(y({},this.newDocument)),this.newDocument={name:"",url:""},this.selectedFile=null)}deleteDocument(r){this.driver.documents&&this.driver.documents.splice(r,1)}saveDriverDetails(){console.log("Saving driver details:",this.driver),this.driverService.updateDriver(this.driver).subscribe(r=>{console.log("Driver details saved:",r)})}static \u0275fac=function(e){return new(e||l)(f(W),f(R),f(j))};static \u0275cmp=E({type:l,selectors:[["app-driver-detail"]],decls:8,vars:2,consts:[["loading",""],["noDocs",""],[1,"mx-auto","p-6","bg-white","rounded-xl","shadow-lg"],[1,"text-2xl","font-bold","mb-4","text-green-900","flex","items-center","gap-2"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-2","gap-4"],[1,"mb-4"],[1,"font-semibold"],["type","text",1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],["type","date",1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],["class","list-disc pl-5",4,"ngIf","ngIfElse"],[1,"mt-4","grid","grid-cols-2","gap-4"],[1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","file",1,"border","rounded","p-2","w-full","mb-2",3,"change"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","hover:bg-blue-600",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded","hover:bg-green-600",3,"click"],[1,"list-disc","pl-5"],[4,"ngFor","ngForOf"],["target","_blank",1,"text-blue-500","underline",3,"href"],[1,"ml-2","text-red-500","hover:text-red-700",3,"click"],[1,"italic","text-gray-500"],[3,"value"],[1,"text-gray-500"]],template:function(e,o){if(e&1&&(n(0,"div",2)(1,"h2",3)(2,"span"),d(3,"\u{1F69A}"),i(),d(4," Driver Details "),i(),D(5,J,38,8,"div",4)(6,K,2,0,"ng-template",null,0,C),i()),e&2){let t=S(7);s(5),u("ngIf",o.driver)("ngIfElse",t)}},dependencies:[B,A,P,k,O,N,L,I,F],encapsulation:2})};export{U as DriverDetailComponent};
