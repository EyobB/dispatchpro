import{a as b,b as N}from"./chunk-CFVKQP3S.js";import{b as T,d as A,g as E,l as F,m as k,n as M,u as V}from"./chunk-SVMRWARE.js";import{a as W}from"./chunk-DC5KZ2EN.js";import{l as S,m as I}from"./chunk-GEVPNXBN.js";import{Bb as D,Cb as w,Db as h,Ja as p,Oa as v,Ta as y,Y as m,Ya as f,Z as s,eb as a,fa as x,ib as i,jb as o,nb as _,qb as g,rb as u,wb as r,xb as C}from"./chunk-YSP72ENP.js";function L(d,n){if(d&1){let e=_();i(0,"button",2),g("click",function(){m(e);let t=u();return s(t.toggleForm())}),r(1,` Add Document
`),o()}}function P(d,n){if(d&1&&(i(0,"option",13),r(1),o()),d&2){let e=n.$implicit;a("value",e),p(),C(e)}}function B(d,n){if(d&1){let e=_();i(0,"div",3)(1,"h3",4),r(2,` To add a new document, fill out the form below and click "Add Document". When you're done, click "Save". `),o(),i(3,"div")(4,"div",5)(5,"div")(6,"label",6),r(7,"Document Type:"),o(),i(8,"select",7),h("ngModelChange",function(t){m(e);let c=u();return w(c.newDocument.documentType,t)||(c.newDocument.documentType=t),s(t)}),f(9,P,2,2,"option",8),o()(),i(10,"div")(11,"label",6),r(12,"Expiration Date:"),o(),i(13,"input",9),h("ngModelChange",function(t){m(e);let c=u();return w(c.newDocument.expires,t)||(c.newDocument.expires=t),s(t)}),o()()(),i(14,"div",5)(15,"div")(16,"label",6),r(17,"Click the box below to upload document:"),o(),i(18,"input",10),g("change",function(t){m(e);let c=u();return s(c.onFileSelected(t))}),o()(),i(19,"div")(20,"label",11),r(21,"\xA0"),o(),i(22,"button",12),g("click",function(){m(e);let t=u();return s(t.uploadDocument())}),r(23," Upload Document "),o()()()()()}if(d&2){let e=u();p(8),D("ngModel",e.newDocument.documentType),p(),a("ngForOf",e.documentTypes),p(4),D("ngModel",e.newDocument.expires)}}var O=class d{constructor(n){this.documentsService=n}isCollapsed=!0;newDocument=new b;selectedFile=null;documentTypes=[];driverId=null;truckId=null;documentAdded=new x;toggleForm(){this.isCollapsed=!1}onFileSelected(n){let e=n.target;e.files&&e.files.length>0&&(this.selectedFile=e.files[0],this.newDocument.fileType=this.selectedFile.type)}uploadDocument(){if(this.newDocument.documentType&&this.selectedFile&&this.newDocument.expires){let n=new N(this.newDocument,this.selectedFile);this.driverId&&(n.driverId=this.driverId),this.truckId&&(n.truckId=this.truckId),this.documentsService.uploadFile(n).subscribe({next:e=>{this.newDocument.id=e.id,this.newDocument.url=e.url,this.documentAdded.emit(this.newDocument),this.clear(),this.isCollapsed=!0},error:e=>{console.error("Error uploading document:",e)}})}}clear(){this.newDocument=new b,this.selectedFile=null}static \u0275fac=function(e){return new(e||d)(v(W))};static \u0275cmp=y({type:d,selectors:[["app-add-document"]],inputs:{documentTypes:"documentTypes",driverId:"driverId",truckId:"truckId"},outputs:{documentAdded:"documentAdded"},decls:2,vars:2,consts:[["class","bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 mb-4",3,"click",4,"ngIf"],["class","border rounded-lg bg-blue-100 p-2",4,"ngIf"],[1,"bg-gray-500","text-white","px-4","py-2","rounded","hover:bg-gray-600","mb-4",3,"click"],[1,"border","rounded-lg","bg-blue-100","p-2"],[1,"text-lg","font-semibold","mb-2","bg-red-100"],[1,"mt-4","grid","grid-cols-2","gap-4"],[1,"font-semibold"],[1,"border","rounded","p-2","w-full","mb-2",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","date","placeholder","Document Expiration",1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],["type","file",1,"border","rounded","p-2","w-full","mb-2","text-green-500","h-30",3,"change"],[1,"font-semibold","w-full","block"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","hover:bg-blue-600",3,"click"],[3,"value"]],template:function(e,l){e&1&&f(0,L,2,0,"button",0)(1,B,24,3,"div",1),e&2&&(a("ngIf",l.isCollapsed),p(),a("ngIf",!l.isCollapsed))},dependencies:[I,S,V,k,M,T,F,A,E],encapsulation:2})};export{O as a};
