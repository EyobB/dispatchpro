import{a as $}from"./chunk-UIIJYSZH.js";import{a as V}from"./chunk-7FUB44TE.js";import{u as A}from"./chunk-2PVWNWUN.js";import{a as T}from"./chunk-OXCJF6DH.js";import"./chunk-NBSK5KUW.js";import"./chunk-IMHYAPIP.js";import"./chunk-XPCCV2FB.js";import{e as I}from"./chunk-3TOGTSGL.js";import"./chunk-FSJQQIFH.js";import{l as y,m as E,p as D,q as w}from"./chunk-QAAQ2EEP.js";import{$ as u,Ab as C,Bb as p,Db as S,La as d,Nb as c,Pb as x,Qa as O,Va as h,_ as v,_a as f,gb as m,kb as r,lb as i,pb as _,sb as b,tb as s,zb as n}from"./chunk-QJGZKU5F.js";function M(o,t){if(o&1){let e=_();r(0,"button",16),b("click",function(){v(e);let a=s(2);return u(a.generateInvoice())}),n(1," \u{1F4C4} Generate Invoice For All "),i()}}function j(o,t){if(o&1&&(r(0,"div",14),f(1,M,2,0,"button",15),i()),o&2){let e=s();d(),m("ngIf",e.filteredOrders.length>0)}}function B(o,t){o&1&&(r(0,"div",17)(1,"div",18),n(2,"\u{1F4E6}"),i(),r(3,"div",19),n(4,"No completed orders yet."),i(),r(5,"div",20),n(6,"Your completed deliveries will appear here."),i()())}function F(o,t){o&1&&(r(0,"div",21),n(1," No orders match your search criteria. "),i())}function N(o,t){if(o&1&&(r(0,"div",34),n(1),c(2,"number"),i()),o&2){let e=s().$implicit;d(),p(" $",x(2,1,e.orderValue,"1.2-2")," ")}}function H(o,t){if(o&1){let e=_();r(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25)(4,"span",19),n(5,"Pickup:"),i(),r(6,"span",26),n(7),c(8,"date"),i()(),r(9,"div",27)(10,"div")(11,"div"),n(12),i(),r(13,"div"),n(14),i()(),r(15,"button",28),b("click",function(){let a=v(e).$implicit,g=s();return u(g.copyOriginAddress(a))}),n(16," \u{1F4CB} "),i()()(),r(17,"div",24)(18,"div",25)(19,"span",19),n(20,"Dropoff:"),i(),r(21,"span",26),n(22),c(23,"date"),i()(),r(24,"div",27)(25,"div")(26,"div"),n(27),i(),r(28,"div"),n(29),i()(),r(30,"button",28),b("click",function(){let a=v(e).$implicit,g=s();return u(g.copyDestinationAddress(a))}),n(31," \u{1F4CB} "),i()()(),r(32,"div",29)(33,"div")(34,"span",19),n(35,"Order #:"),i(),n(36),i(),r(37,"div",30)(38,"span",26),n(39),c(40,"date"),i()(),f(41,N,3,4,"div",31),i()(),r(42,"div",32)(43,"button",33),b("click",function(){let a=v(e).$implicit,g=s();return u(g.viewOrder(a))}),n(44," View Details "),i()()()}if(o&2){let e=t.$implicit,l=s();d(7),p(" ",x(8,13,e.pickupDateAndTime,"EEE, MMM dd HH:mm")," "),d(5),C(e.originStreetAddress),d(2),S("",e.originCity,", ",e.originState," ",e.originZipcode,""),d(8),p(" ",x(23,16,e.dropOffDateAndTime,"EEE, MMM dd HH:mm")," "),d(5),C(e.destinationStreetAddress),d(2),S("",e.destinationCity,", ",e.destinationState," ",e.destinationZipcode,""),d(7),p(" ",e.orderNumber," "),d(3),p(" ",x(40,19,l.getCompletedDate(e),"MMM dd, yyyy")," "),d(2),m("ngIf",e.orderValue)}}var k=class o{constructor(t,e,l){this.router=t;this.ordersService=e;this.toastService=l}orders=[];completedOrders=[];selectedOrders=[];filteredOrders=[];ngOnInit(){this.loadOrders()}loadOrders(){this.ordersService.getDriverOrders().subscribe(t=>{this.orders=t,this.filterCompletedOrders()})}filterCompletedOrders(){this.completedOrders=this.orders.filter(t=>t.status===$.DELIVERED),this.filteredOrders=[...this.completedOrders]}viewOrder(t){this.ordersService.setCurrentOrder(t),this.router.navigate(["/driver/order-detail",t.id])}selectAllOrders(){this.selectedOrders.length===this.filteredOrders.length?this.selectedOrders=[]:this.selectedOrders=[...this.filteredOrders]}generateInvoice(){this.selectAllOrders();let t=this.selectedOrders.map(e=>e.id).join(",");this.router.navigate(["/driver/generate-invoice/",t])}calculateTotalEarnings(){return this.selectedOrders.reduce((t,e)=>t+(e.orderValue||0),0)}copyOriginAddress(t){let e=`${t.originStreetAddress}, ${t.originCity}, ${t.originState} ${t.originZipcode}`;navigator.clipboard.writeText(e),this.toastService.showSuccess("Origin address copied to clipboard",2e3)}copyDestinationAddress(t){let e=`${t.destinationStreetAddress}, ${t.destinationCity}, ${t.destinationState} ${t.destinationZipcode}`;navigator.clipboard.writeText(e),this.toastService.showSuccess("Destination address copied to clipboard",2e3)}getCompletedDate(t){return t.completedDate?new Date(t.completedDate):new Date(t.dropOffDateAndTime)}getTotalCompletedOrders(){return this.completedOrders.length}getTotalEarningsAllOrders(){return this.completedOrders.reduce((t,e)=>t+(e.orderValue||0),0)}static \u0275fac=function(e){return new(e||o)(O(I),O(V),O(T))};static \u0275cmp=h({type:o,selectors:[["app-completed-orders"]],decls:22,vars:9,consts:[[1,"max-w-md","mx-auto","pt-0"],[1,"text-2xl","font-bold","text-green-900","mb-4","flex","items-center","gap-2"],[1,"mb-4","grid","grid-cols-2","gap-4"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3"],[1,"text-2xl","font-bold","text-green-900"],[1,"text-sm","text-green-700"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"text-2xl","font-bold","text-blue-900"],[1,"text-sm","text-blue-700"],["class","mb-4 flex flex-row justify-end items-center",4,"ngIf"],[1,"mb-6"],["class","text-gray-500 text-center py-8 bg-gray-50 rounded-lg",4,"ngIf"],["class","text-gray-500 text-center py-4 bg-gray-50 rounded-lg",4,"ngIf"],["class","mb-3 rounded-xl shadow border border-green-200 bg-green-50 p-2 flex flex-col gap-2",4,"ngFor","ngForOf"],[1,"mb-4","flex","flex-row","justify-end","items-center"],["class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm font-semibold transition",3,"click",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded","text-sm","font-semibold","transition",3,"click"],[1,"text-gray-500","text-center","py-8","bg-gray-50","rounded-lg"],[1,"text-4xl","mb-2"],[1,"font-semibold"],[1,"text-sm"],[1,"text-gray-500","text-center","py-4","bg-gray-50","rounded-lg"],[1,"mb-3","rounded-xl","shadow","border","border-green-200","bg-green-50","p-2","flex","flex-col","gap-2"],[1,"text-sm","text-gray-700"],[1,"mb-2"],[1,"flex","flex-row","justify-between","gap-2"],[1,"text-xs","text-gray-500"],[1,"ml-2","flex","flex-row","items-center","gap-2"],[1,"text-blue-600","hover:text-blue-800","p-1",3,"click"],[1,"flex","justify-between","items-center","text-xs","text-gray-600","pt-2","border-t","border-green-200"],[1,"flex","items-center","gap-2"],["class","font-semibold text-green-700",4,"ngIf"],[1,"flex","flex-row","justify-end","mt-2","gap-1"],[1,"bg-green-600","hover:bg-green-700","text-white","px-3","py-2","rounded","text-xs","font-semibold","transition",3,"click"],[1,"font-semibold","text-green-700"]],template:function(e,l){e&1&&(r(0,"div",0)(1,"h2",1)(2,"span"),n(3,"\u2705"),i(),n(4," Completed Orders "),i(),r(5,"div",2)(6,"div",3)(7,"div",4),n(8),i(),r(9,"div",5),n(10,"Total Orders"),i()(),r(11,"div",6)(12,"div",7),n(13),c(14,"number"),i(),r(15,"div",8),n(16,"Total Earnings"),i()()(),f(17,j,2,1,"div",9),r(18,"div",10),f(19,B,7,0,"div",11)(20,F,2,0,"div",12)(21,H,45,22,"div",13),i()()),e&2&&(d(8),C(l.getTotalCompletedOrders()),d(5),p("$",x(14,6,l.getTotalEarningsAllOrders(),"1.2-2"),""),d(4),m("ngIf",l.filteredOrders.length>0),d(2),m("ngIf",l.filteredOrders.length===0&&l.completedOrders.length===0),d(),m("ngIf",l.filteredOrders.length===0&&l.completedOrders.length>0),d(),m("ngForOf",l.filteredOrders))},dependencies:[y,E,D,w,A],encapsulation:2})};export{k as CompletedOrdersComponent};
