import{a as Y}from"./chunk-M5UZXDQZ.js";import"./chunk-YVMMS243.js";import{a as H}from"./chunk-YMDSIZPR.js";import{a as B}from"./chunk-CHO6H6BE.js";import{b as W,c as O,f as L,i as F,j as R,k as P,o as K}from"./chunk-WIAEWHLW.js";import{d as V,g as k}from"./chunk-3KQDNKNL.js";import{l as T,m as A}from"./chunk-B35W4A7H.js";import{Ab as x,Da as M,Ga as l,Kb as y,La as f,Qa as E,Va as v,a as b,ab as s,db as o,ea as p,eb as n,fa as u,ib as C,lb as D,mb as m,nb as N,sb as w,tb as d,ub as I,wb as S,yb as g,zb as _}from"./chunk-WMTXBNFA.js";var h=class{id;name;phone;licenseState;licenseNumber;expirationDate;truck;documents;warnings=[];constructor(){this.id="",this.name="",this.phone="",this.licenseState="",this.licenseNumber="",this.expirationDate="",this.truck=null,this.documents=[],this.warnings=[]}};function G(t,i){if(t&1&&(o(0,"option",20),d(1),n()),t&2){let e=i.$implicit;s("value",e.code),l(),S("",e.name," (",e.code,")")}}function U(t,i){if(t&1&&(o(0,"li"),d(1),n()),t&2){let e=i.$implicit;l(),I(e)}}function z(t,i){if(t&1&&(o(0,"div",21)(1,"strong"),d(2,"Warnings:"),n(),o(3,"ul",22),v(4,U,2,1,"li",23),n()()),t&2){let e=m(2);l(4),s("ngForOf",e.driver.warnings)}}function J(t,i){if(t&1){let e=C();o(0,"li")(1,"a",24),d(2),n(),o(3,"button",25),D("click",function(){let r=p(e).index,c=m(3);return u(c.deleteDocument(r))}),d(4," Delete "),n()()}if(t&2){let e=i.$implicit;l(),N("href",e.url,M),l(),S(" ",e.name," (",e.expires?"Exp: "+e.expires:"No Expiry",") ")}}function X(t,i){if(t&1&&(o(0,"ul",22),v(1,J,5,3,"li",23),n()),t&2){let e=m(2);l(),s("ngForOf",e.driver.documents)}}function Z(t,i){t&1&&(o(0,"span",26),d(1,"No documents available."),n())}function q(t,i){if(t&1){let e=C();o(0,"div")(1,"div",8)(2,"div",3)(3,"label",9),d(4,"Name:"),n(),o(5,"input",10),x("ngModelChange",function(r){p(e);let c=m();return _(c.driver.name,r)||(c.driver.name=r),u(r)}),n()(),o(6,"div",3)(7,"label",9),d(8,"Phone:"),n(),o(9,"input",10),x("ngModelChange",function(r){p(e);let c=m();return _(c.driver.phone,r)||(c.driver.phone=r),u(r)}),n()(),o(10,"div",3)(11,"label",9),d(12,"License:"),n(),o(13,"div",11)(14,"select",12),x("ngModelChange",function(r){p(e);let c=m();return _(c.driver.licenseState,r)||(c.driver.licenseState=r),u(r)}),v(15,G,2,3,"option",13),n(),o(16,"input",14),x("ngModelChange",function(r){p(e);let c=m();return _(c.driver.licenseNumber,r)||(c.driver.licenseNumber=r),u(r)}),n()()()(),v(17,z,5,1,"div",15),o(18,"label",9),d(19,"Driver Documents:"),n(),v(20,X,2,1,"ul",16)(21,Z,2,0,"ng-template",null,1,y),o(23,"div",17)(24,"app-add-document",18),D("documentAdded",function(r){p(e);let c=m();return u(c.addDocument(r))}),n()(),o(25,"button",19),D("click",function(){p(e);let r=m();return u(r.saveDriverDetails())}),d(26," Save "),n()()}if(t&2){let e=w(22),a=m();l(5),g("ngModel",a.driver.name),l(4),g("ngModel",a.driver.phone),l(5),g("ngModel",a.driver.licenseState),l(),s("ngForOf",a.states),l(),g("ngModel",a.driver.licenseNumber),l(),s("ngIf",a.driver.warnings&&a.driver.warnings.length>0),l(3),s("ngIf",a.driver.documents==null?null:a.driver.documents.length)("ngIfElse",e),l(4),s("documentTypes",a.documentTypes)}}function Q(t,i){t&1&&(o(0,"div",27),d(1,"Loading driver details..."),n())}var j=class t{constructor(i,e,a){this.route=i;this.driverService=e;this.settingsService=a}driver=new h;documentTypes=[];states=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}];ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.driverService.getDriver(i).subscribe(e=>{this.driver=e}),this.loadDocumentTypes()}loadDocumentTypes(){this.settingsService.getSettings().subscribe(i=>{this.documentTypes=i.driverDocuments})}addDocument(i){i.name&&i.url&&(this.driver.documents=this.driver.documents||[],this.driver.documents.push(b({},i)))}deleteDocument(i){this.driver.documents&&this.driver.documents.splice(i,1)}saveDriverDetails(){this.driverService.updateDriver(this.driver).subscribe(i=>{})}static \u0275fac=function(e){return new(e||t)(f(V),f(B),f(H))};static \u0275cmp=E({type:t,selectors:[["app-driver-detail"]],decls:13,vars:2,consts:[["loading",""],["noDocs",""],[1,"mx-auto","p-6","bg-white","rounded-xl","shadow-lg"],[1,"mb-4"],["routerLink","/dispatcher/drivers",1,"text-green-800","hover:underline","flex","items-center","gap-1","font-medium"],[1,"text-xl"],[1,"text-2xl","font-bold","mb-4","text-green-900","flex","items-center","gap-2"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-2","gap-4"],[1,"font-semibold"],["type","text",1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],[1,"flex","gap-4"],[1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","License Number",1,"border","rounded","p-2","w-full",3,"ngModelChange","ngModel"],["class","bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-2 rounded mb-4",4,"ngIf"],["class","list-disc pl-5",4,"ngIf","ngIfElse"],[1,"py-2","w-1/2"],[3,"documentAdded","documentTypes"],[1,"bg-green-500","text-white","px-4","py-2","rounded","hover:bg-green-600",3,"click"],[3,"value"],[1,"bg-yellow-100","border","border-yellow-400","text-yellow-700","px-4","py-2","rounded","mb-4"],[1,"list-disc","pl-5"],[4,"ngFor","ngForOf"],["target","_blank",1,"text-blue-500","underline",3,"href"],[1,"ml-2","text-red-500","hover:text-red-700",3,"click"],[1,"italic","text-gray-500"],[1,"text-gray-500"]],template:function(e,a){if(e&1&&(o(0,"div",2)(1,"div",3)(2,"a",4)(3,"span",5),d(4,"\u2190"),n(),d(5," Go Back "),n()(),o(6,"h2",6)(7,"span"),d(8,"\u{1F69A}"),n(),d(9," Driver Details "),n(),v(10,q,27,9,"div",7)(11,Q,2,0,"ng-template",null,0,y),n()),e&2){let r=w(12);l(10),s("ngIf",a.driver)("ngIfElse",r)}},dependencies:[K,R,P,W,F,O,L,T,A,k,Y],encapsulation:2})};export{j as DriverDetailComponent};
