import{a as Y}from"./chunk-UMVSXTTQ.js";import{a as v}from"./chunk-7LB3X3BZ.js";import{a as $,d as q,e as _,f as w,g as J,h as Q,i as X,j as R}from"./chunk-NLBBH4OK.js";import{g as z,k as B,l as K,m as I}from"./chunk-ZMPNCMD4.js";import{Bb as A,Ha as V,Ia as s,L as P,Na as g,R as h,Sa as C,X as S,Xa as m,Y as b,cb as p,eb as n,fb as t,gb as E,ia as j,jb as k,k as H,mb as d,nb as u,sb as r,tb as N,ub as x,vb as W,wb as G}from"./chunk-LZRDGPC4.js";var f=class e{static NEW_RATE_CONFIRMATIONS="new-rate-confirmations";static DELIVERED_ORDERS="delivered-orders";static DRIVER_WARNINGS="driver-warnings";static TRUCKS_WARNINGS="trucks-warnings";constructor(){}getNotifications(){return H([{type:"new-rate-confirmations",count:3,message:"new rate confirmations",link:"/dispatcher/rate-confirmations"},{type:"delivered-orders",count:2,message:"order(s) delivered",link:"/dispatcher/orders?status=delivered"},{type:"driver-warnings",count:2,message:"driver(s) with warnings",link:"/dispatcher/drivers?status=warning"},{type:"trucks-warnings",count:4,message:"truck(s) with warnings",link:"/dispatcher/trucks?status=warning"}])}static \u0275fac=function(o){return new(o||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};function oe(e,a){e&1&&(n(0,"h1",15),r(1,"Dispatcher"),t())}function re(e,a){e&1&&(n(0,"span"),r(1,"RateCon"),t())}function ae(e,a){if(e&1&&(n(0,"sup",16),r(1),t()),e&2){let o=u();s(),x(" ",o.pendingRateConsCount," ")}}function se(e,a){e&1&&(n(0,"span"),r(1,"Orders"),t())}function pe(e,a){if(e&1&&(n(0,"sup",16),r(1),t()),e&2){let o=u();s(),x(" ",o.deliveredOrdersCount," ")}}function le(e,a){e&1&&(n(0,"span"),r(1,"Invoices"),t())}function me(e,a){e&1&&(n(0,"span"),r(1,"Payments"),t())}function ce(e,a){e&1&&(n(0,"span"),r(1,"Trucks"),t())}function de(e,a){if(e&1&&(n(0,"sup",16),r(1),t()),e&2){let o=u();s(),x(" ",o.trucksWarningCount," ")}}function ue(e,a){e&1&&(n(0,"span"),r(1,"Drivers"),t())}function fe(e,a){if(e&1&&(n(0,"sup",16),r(1),t()),e&2){let o=u();s(),x(" ",o.driverWarningCount," ")}}function ge(e,a){e&1&&(n(0,"span"),r(1,"Users"),t())}function ve(e,a){e&1&&(n(0,"span"),r(1,"Reports"),t())}function he(e,a){e&1&&(n(0,"span"),r(1,"Settings"),t())}function Ce(e,a){e&1&&(n(0,"span"),r(1,"\u23EA"),t())}function xe(e,a){e&1&&(n(0,"span"),r(1,"\u23E9"),t())}var L=class e{constructor(a){this.notificationsService=a}isCollapsed=!1;pendingRateConsCount=0;deliveredOrdersCount=0;driverWarningCount=0;trucksWarningCount=0;ngOnInit(){this.loadNotifications()}loadNotifications(){this.notificationsService.getNotifications().subscribe(a=>{this.pendingRateConsCount=a.find(o=>o.type===f.NEW_RATE_CONFIRMATIONS)?.count||0,this.deliveredOrdersCount=a.find(o=>o.type===f.DELIVERED_ORDERS)?.count||0,this.driverWarningCount=a.find(o=>o.type===f.DRIVER_WARNINGS)?.count||0,this.trucksWarningCount=a.find(o=>o.type===f.TRUCKS_WARNINGS)?.count||0})}toggleSidebar(){this.isCollapsed=!this.isCollapsed}static \u0275fac=function(o){return new(o||e)(g(f))};static \u0275cmp=C({type:e,selectors:[["app-sidebar"]],decls:55,vars:17,consts:[[1,"transition-all","duration-300","h-[calc(100vh-4rem)]","bg-green-900","text-white","p-4","overflow-x-hidden","flex","flex-col",3,"ngClass"],["class","text-2xl font-bold mb-6",4,"ngIf"],[1,"space-y-4","text-lg","flex-1"],["routerLink","/dispatcher/rate-confirmations",1,"flex","items-center","gap-2","cursor-pointer","relative"],[4,"ngIf"],["class","bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow",4,"ngIf"],["routerLink","/dispatcher/orders",1,"flex","items-center","gap-2","cursor-pointer","relative"],["routerLink","/dispatcher/invoices",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/payments",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/trucks",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/drivers",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/users",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/reports",1,"flex","items-center","gap-2","cursor-pointer"],["routerLink","/dispatcher/settings",1,"flex","items-center","gap-2","cursor-pointer"],[1,"mt-4","p-2","rounded","bg-green-800","hover:bg-green-700","focus:outline-none","w-full","flex","justify-center",3,"click"],[1,"text-2xl","font-bold","mb-6"],[1,"bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","text-xs","font-bold","shadow"]],template:function(o,i){o&1&&(n(0,"nav",0),m(1,oe,2,0,"h1",1),n(2,"ul",2)(3,"li")(4,"a",3)(5,"span"),r(6,"\u{1F4D1}"),t(),m(7,re,2,0,"span",4)(8,ae,2,1,"sup",5),t()(),n(9,"li")(10,"a",6)(11,"span"),r(12,"\u{1F4E6}"),t(),m(13,se,2,0,"span",4)(14,pe,2,1,"sup",5),t()(),n(15,"li")(16,"a",7)(17,"span"),r(18,"\u{1F9FE}"),t(),m(19,le,2,0,"span",4),t()(),n(20,"li")(21,"a",8)(22,"span"),r(23,"\u{1F4B0}"),t(),m(24,me,2,0,"span",4),t()(),n(25,"li")(26,"a",9)(27,"span"),r(28,"\u{1F69A}"),t(),m(29,ce,2,0,"span",4)(30,de,2,1,"sup",5),t()(),n(31,"li")(32,"a",10)(33,"span"),r(34,"\u{1F9D1}\u200D\u2708\uFE0F"),t(),m(35,ue,2,0,"span",4)(36,fe,2,1,"sup",5),t()(),n(37,"li")(38,"a",11)(39,"span"),r(40,"\u{1F465}"),t(),m(41,ge,2,0,"span",4),t()(),n(42,"li")(43,"a",12)(44,"span"),r(45,"\u{1F4CA}"),t(),m(46,ve,2,0,"span",4),t()(),n(47,"li")(48,"a",13)(49,"span"),r(50,"\u2699\uFE0F"),t(),m(51,he,2,0,"span",4),t()()(),n(52,"button",14),d("click",function(){return i.toggleSidebar()}),m(53,Ce,2,0,"span",4)(54,xe,2,0,"span",4),t()()),o&2&&(p("ngClass",i.isCollapsed?"w-16":"w-60"),s(),p("ngIf",!i.isCollapsed),s(6),p("ngIf",!i.isCollapsed),s(),p("ngIf",i.pendingRateConsCount!==void 0&&!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(),p("ngIf",i.deliveredOrdersCount!==void 0&&!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(),p("ngIf",i.trucksWarningCount!==void 0&&!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(),p("ngIf",i.driverWarningCount!==void 0&&!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(5),p("ngIf",!i.isCollapsed),s(2),p("ngIf",!i.isCollapsed),s(),p("ngIf",i.isCollapsed))},dependencies:[R,w,I,B],encapsulation:2})};var Se=()=>["/dispatcher-detail"];function be(e,a){if(e&1){let o=k();n(0,"li",21)(1,"button",22),d("click",function(){let l=S(o).$implicit,y=u(2);return b(y.goToPage(l.link))}),n(2,"span"),r(3),t()()()}if(e&2){let o=a.$implicit;s(3),W("",o.count," ",o.message,"")}}function Ee(e,a){if(e&1&&(n(0,"div",17)(1,"div",18),r(2,"Notifications"),t(),n(3,"ul"),m(4,be,4,2,"li",19),t(),n(5,"div",20),r(6,"Click to view details"),t()()),e&2){let o=u();s(4),p("ngForOf",o.notifications)}}function Ie(e,a){if(e&1){let o=k();n(0,"div",23)(1,"button",22),d("click",function(){S(o);let l=u();return b(l.goToChangePassword())}),n(2,"span",24),r(3,"\u{1F511}"),t(),n(4,"span"),r(5,"Change Password"),t()(),n(6,"button",22),d("click",function(){S(o);let l=u();return b(l.logout())}),n(7,"span",24),r(8,"\u238B"),t(),n(9,"span"),r(10,"Logout"),t()()()}}function we(e,a){if(e&1){let o=k();n(0,"div",23)(1,"button",22),d("click",function(){S(o);let l=u();return b(l.goToChangePassword())}),n(2,"span",24),r(3,"\u{1F511}"),t(),n(4,"span"),r(5,"Change Password"),t()(),n(6,"button",22),d("click",function(){S(o);let l=u();return b(l.logout())}),n(7,"span",24),r(8,"\u238B"),t(),n(9,"span"),r(10,"Logout"),t()()()}}var U=class e{constructor(a,o,i,l,y){this.dispatcherService=a;this.notificationsService=o;this.sessionService=i;this.router=l;this.eRef=y}showNotifications=!1;showUserMenu=!1;company=null;notifications=[];totalNotifications=0;ngOnInit(){this.company=this.dispatcherService.getDispatcher(),this.notificationsService.getNotifications().subscribe(a=>{this.notifications=a,this.totalNotifications=a.reduce((o,i)=>o+i.count,0)})}logout(){this.sessionService.logout(),this.router.navigate(["/login"])}get loggedIn(){return this.sessionService.getLoggedInUser()}toggleNotifications(){this.showNotifications=!this.showNotifications}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}goToChangePassword(){this.showUserMenu=!1,this.router.navigate(["/change-password"])}goToPage(a){this.showNotifications=!1,this.router.navigateByUrl(a)}onDocumentClick(a){this.showNotifications&&!this.eRef.nativeElement.contains(a.target)&&(this.showNotifications=!1),this.showUserMenu&&!this.eRef.nativeElement.contains(a.target)&&(this.showUserMenu=!1)}static \u0275fac=function(o){return new(o||e)(g(Y),g(f),g(v),g(_),g(j))};static \u0275cmp=C({type:e,selectors:[["app-header"]],hostBindings:function(o,i){o&1&&d("click",function(y){return i.onDocumentClick(y)},!1,V)},decls:39,vars:13,consts:[[1,"w-full","bg-green-900","text-white","flex","items-center","justify-between","px-6","py-3","shadow"],[1,"flex","items-center","gap-3","hidden","sm:flex"],[1,"text-4xl"],[1,"font-bold","text-lg"],[1,"text-xs","text-green-100"],[1,"flex","items-center","sm:hidden"],[1,"font-bold","text-lg","hover:underline",3,"routerLink"],[1,"hidden","sm:flex","justify-between","gap-6","relative","w-full","sm:w-auto"],[1,"relative","inline-flex"],[1,"relative","focus:outline-none",3,"click"],[1,"text-2xl"],[1,"absolute","-top-1","-right-2","bg-red-500","text-xs","rounded-full","px-1"],["class","absolute right-0 mt-2 w-64 bg-white text-green-900 rounded shadow-lg z-50 border border-green-100",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"relative"],[1,"flex","items-center","gap-2","focus:outline-none",3,"click"],["class","absolute right-0 mt-2 w-48 bg-white text-green-900 rounded shadow-lg z-50 border border-green-100",4,"ngIf"],[1,"absolute","right-0","mt-2","w-64","bg-white","text-green-900","rounded","shadow-lg","z-50","border","border-green-100"],[1,"p-3","border-b","border-green-100","font-semibold","text-green-800"],["class","border-b border-green-100",4,"ngFor","ngForOf"],[1,"px-4","py-2","text-xs","text-gray-500","border-t","border-green-100"],[1,"border-b","border-green-100"],[1,"w-full","text-left","px-4","py-2","hover:bg-green-50","flex","items-center","gap-2",3,"click"],[1,"absolute","right-0","mt-2","w-48","bg-white","text-green-900","rounded","shadow-lg","z-50","border","border-green-100"],[1,"text-lg"]],template:function(o,i){o&1&&(n(0,"header",0)(1,"div",1)(2,"span",2),r(3,"\u{1F3E2}"),t(),n(4,"div",3),r(5),n(6,"div",4),r(7),t()()(),n(8,"div",5)(9,"a",6),r(10),t()(),n(11,"div",7)(12,"div",8)(13,"button",9),d("click",function(){return i.toggleNotifications()}),n(14,"span",10),r(15,"\u{1F514}"),t(),n(16,"span",11),r(17),t()(),m(18,Ee,7,1,"div",12),t(),n(19,"div",13)(20,"div",14)(21,"button",15),d("click",function(){return i.toggleUserMenu()}),n(22,"span",10),r(23,"\u{1F464}"),t(),n(24,"span"),r(25),t(),n(26,"span",10),r(27,"\u22EE"),t()(),m(28,Ie,11,0,"div",16),t()()(),n(29,"div",5)(30,"div",14)(31,"button",15),d("click",function(){return i.toggleUserMenu()}),n(32,"span",10),r(33,"\u{1F464}"),t(),n(34,"span"),r(35),t(),n(36,"span",10),r(37,"\u22EE"),t()(),m(38,we,11,0,"div",16),t()()()),o&2&&(s(5),x(" ",i.company==null?null:i.company.name," "),s(2),G(" ",i.company==null?null:i.company.address," \u2022 ",i.company==null?null:i.company.phone," \u2022 ",i.company==null?null:i.company.email," "),s(2),p("routerLink",A(12,Se)),s(),x(" ",i.company==null?null:i.company.name," "),s(7),N(i.totalNotifications),s(),p("ngIf",i.showNotifications),s(7),N(i.loggedIn==null?null:i.loggedIn.name),s(3),p("ngIf",i.showUserMenu),s(7),N(i.loggedIn==null?null:i.loggedIn.name),s(3),p("ngIf",i.showUserMenu))},dependencies:[w,I,K],encapsulation:2})};var De=()=>({exact:!0}),M=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=C({type:e,selectors:[["app-mobile-nav"]],decls:20,vars:2,consts:[[1,"fixed","bottom-0","left-0","w-full","bg-green-900","text-white","shadow-lg","z-50"],[1,"flex","justify-around","items-center","py-2"],["routerLink","/driver/orders","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition",3,"routerLinkActiveOptions"],[1,"text-2xl"],[1,"text-xs","mt-1"],["routerLink","/driver/payments","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition"],["routerLink","/driver/reports","routerLinkActive","text-green-300 font-bold border-t-2 border-green-300",1,"flex","flex-col","items-center","px-4","pt-1","transition"]],template:function(o,i){o&1&&(n(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2)(4,"span",3),r(5,"\u{1F4E6}"),t(),n(6,"span",4),r(7,"Orders"),t()()(),n(8,"li")(9,"a",5)(10,"span",3),r(11,"\u{1F4B0}"),t(),n(12,"span",4),r(13,"Payments"),t()()(),n(14,"li")(15,"a",6)(16,"span",3),r(17,"\u{1F4CA}"),t(),n(18,"span",4),r(19,"Reports"),t()()()()()),o&2&&(s(3),p("routerLinkActiveOptions",A(1,De)))},dependencies:[w,J],encapsulation:2})};function ye(e,a){e&1&&E(0,"app-header",7)}function ke(e,a){e&1&&(n(0,"aside",8),E(1,"app-sidebar"),t())}function Ne(e,a){e&1&&(n(0,"main",9)(1,"div",10),E(2,"router-outlet"),t()())}function Ae(e,a){e&1&&(n(0,"main",11)(1,"div",12),E(2,"router-outlet"),t()())}function Re(e,a){e&1&&E(0,"app-mobile-nav",13)}var F=class e{constructor(a){this.sessionService=a}get isUserLoggedIn(){return this.sessionService.isLoggedIn()}static \u0275fac=function(o){return new(o||e)(g(v))};static \u0275cmp=C({type:e,selectors:[["app-root"]],decls:7,vars:5,consts:[[1,"min-h-screen","bg-gray-100"],["class","sticky top-0 z-20",4,"ngIf"],[1,"flex"],["class","sticky top-[64px] h-[calc(100vh-64px)] z-10 hidden md:block",4,"ngIf"],["class","flex-1",4,"ngIf"],["class","flex-1 p-6 pb-20 md:pb-6",4,"ngIf"],["class","md:hidden",4,"ngIf"],[1,"sticky","top-0","z-20"],[1,"sticky","top-[64px]","h-[calc(100vh-64px)]","z-10","hidden","md:block"],[1,"flex-1"],[1,"bg-white","border","rounded","shadow","h-full"],[1,"flex-1","p-6","pb-20","md:pb-6"],[1,"bg-white","border","rounded","shadow","p-6","h-full"],[1,"md:hidden"]],template:function(o,i){o&1&&(n(0,"div",0),m(1,ye,1,0,"app-header",1),n(2,"div",2),m(3,ke,2,0,"aside",3)(4,Ne,3,0,"main",4)(5,Ae,3,0,"main",5),t(),m(6,Re,1,0,"app-mobile-nav",6),t()),o&2&&(s(),p("ngIf",i.isUserLoggedIn),s(2),p("ngIf",i.isUserLoggedIn),s(),p("ngIf",!i.isUserLoggedIn),s(),p("ngIf",i.isUserLoggedIn),s(),p("ngIf",i.isUserLoggedIn))},dependencies:[I,R,q,L,U,M],encapsulation:2})};var c=(e,a)=>{let o=h(v),i=h(_),l=o.getLoggedInUser();return l&&l.roles.includes("dispatcher")?!0:i.createUrlTree(["/login"])};var D=(e,a)=>{let o=h(v),i=h(_),l=o.getLoggedInUser();return l&&l.roles.includes("driver")?!0:i.createUrlTree(["/login"])};var te=(e,a)=>{let o=h(v),i=h(_);return o.getLoggedInUser()?!0:i.createUrlTree(["/login"])};var ne=[{path:"login",loadComponent:()=>import("./chunk-TTA4WR4E.js").then(e=>e.LoginComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-GAPVR4CX.js").then(e=>e.ForgotPasswordComponent)},{path:"change-password",loadComponent:()=>import("./chunk-EOQRQ3QI.js").then(e=>e.ChangePasswordComponent),canActivate:[te]},{path:"error/:error",loadComponent:()=>import("./chunk-OLLCDHFK.js").then(e=>e.ErrorComponent)},{path:"dispatcher/rate-confirmations",loadComponent:()=>import("./chunk-NUBHFW2A.js").then(e=>e.RateConfirmationsComponent),canActivate:[c]},{path:"dispatcher/rate-confirmations/:id",loadComponent:()=>import("./chunk-LYIEEXRB.js").then(e=>e.RateConfirmationDetailComponent),canActivate:[c]},{path:"dispatcher/sign-rate-confirmation/:id",loadComponent:()=>import("./chunk-JKLZRWQH.js").then(e=>e.SignRateConfirmationComponent),canActivate:[c]},{path:"dispatcher/orders",loadComponent:()=>import("./chunk-4FWNIUTK.js").then(e=>e.OrdersComponent),canActivate:[c]},{path:"dispatcher/orders/:id",loadComponent:()=>import("./chunk-IXAKY3AE.js").then(e=>e.OrderDetailComponent),canActivate:[c]},{path:"dispatcher/invoices",loadComponent:()=>import("./chunk-4TPVW65F.js").then(e=>e.InvoicesComponent),canActivate:[c]},{path:"dispatcher/invoices/:id",loadComponent:()=>import("./chunk-G7QILZ7B.js").then(e=>e.InvoiceDetailComponent),canActivate:[c]},{path:"dispatcher/payments",loadComponent:()=>import("./chunk-IJDEEGTQ.js").then(e=>e.PaymentsComponent),canActivate:[c]},{path:"dispatcher/trucks",loadComponent:()=>import("./chunk-BWDURFOQ.js").then(e=>e.TrucksComponent),canActivate:[c]},{path:"dispatcher/trucks/:id",loadComponent:()=>import("./chunk-UGGFRRDT.js").then(e=>e.TruckDetailComponent),canActivate:[c]},{path:"dispatcher/drivers",loadComponent:()=>import("./chunk-7CKT5AJV.js").then(e=>e.DriversComponent),canActivate:[c]},{path:"dispatcher/drivers/:id",loadComponent:()=>import("./chunk-PWDVIOVA.js").then(e=>e.DriverDetailComponent),canActivate:[c]},{path:"dispatcher/users",loadComponent:()=>import("./chunk-OGMR766O.js").then(e=>e.UsersComponent),canActivate:[c]},{path:"dispatcher/reports",loadComponent:()=>import("./chunk-Z5OPU56F.js").then(e=>e.ReportsComponent),canActivate:[c]},{path:"dispatcher/settings",loadComponent:()=>import("./chunk-KPGR665C.js").then(e=>e.SettingsComponent),canActivate:[c]},{path:"driver/orders",loadComponent:()=>import("./chunk-HQHMC3VA.js").then(e=>e.DriverOrdersComponent),canActivate:[D]},{path:"driver/order-detail/:id",loadComponent:()=>import("./chunk-OVBHEUJY.js").then(e=>e.OrderDetailComponent),canActivate:[D]},{path:"driver/payments",loadComponent:()=>import("./chunk-UZDBUMIE.js").then(e=>e.PaymentsComponent),canActivate:[D]},{path:"driver/reports",loadComponent:()=>import("./chunk-BTSD3R2D.js").then(e=>e.ReportsComponent),canActivate:[D]},{path:"",redirectTo:"login",pathMatch:"full"}];var ie={providers:[Q(ne,X()),{provide:z,useValue:"/dispatchpro/"}]};$(F,ie);
