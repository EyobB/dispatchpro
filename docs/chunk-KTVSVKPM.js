import{a as v}from"./chunk-FAZMLUFE.js";import{c as j}from"./chunk-CFVKQP3S.js";import{a as H}from"./chunk-Q2DN34S2.js";import{d as N,g as P,l as R,m as F,n as B,u as L}from"./chunk-SVMRWARE.js";import{a as $}from"./chunk-DA7YCHM5.js";import"./chunk-3TXZS4HG.js";import"./chunk-5R44ZK2D.js";import"./chunk-XPCCV2FB.js";import{e as k}from"./chunk-KA6K7UZ3.js";import"./chunk-GDLZFIOX.js";import{l as V,m as A,p as M}from"./chunk-GEVPNXBN.js";import{Ab as C,Bb as w,Cb as y,Db as D,Ja as d,Kb as b,Mb as S,Nb as T,Oa as O,Ta as h,Y as m,Ya as g,Z as u,eb as x,ib as r,jb as i,nb as f,qb as _,rb as c,vb as I,wb as n,xb as p,yb as E}from"./chunk-YSP72ENP.js";function Z(s,t){s&1&&(r(0,"div",8),n(1," No current orders. "),i())}function Y(s,t){if(s&1&&(r(0,"option",28),n(1),i()),s&2){let e=t.$implicit;x("value",e),d(),p(e)}}function U(s,t){if(s&1){let e=f();r(0,"span",25)(1,"select",26),D("ngModelChange",function(o){m(e);let a=c().$implicit;return y(a.status,o)||(a.status=o),u(o)}),_("change",function(){m(e);let o=c().$implicit,a=c();return u(a.updateOrderStatus(o))}),g(2,Y,2,2,"option",27),i()()}if(s&2){let e=c().$implicit,l=c();d(),w("ngModel",e.status),d(),x("ngForOf",l.statuses)}}function G(s,t){if(s&1&&(r(0,"span",25),n(1),i()),s&2){let e=c().$implicit;d(),p(e.status)}}function K(s,t){if(s&1){let e=f();r(0,"button",23),_("click",function(){m(e);let o=c().$implicit,a=c();return u(a.completeOrder(o))}),n(1," Complete Order "),i()}}function q(s,t){if(s&1){let e=f();r(0,"div",9)(1,"div",10)(2,"div",11),n(3),i(),g(4,U,3,2,"span",12)(5,G,2,1,"ng-template",null,0,T),i(),r(7,"div",13)(8,"div")(9,"div",14)(10,"span",15),n(11,"Pickup:"),i(),r(12,"span",16),n(13),b(14,"date"),i()(),r(15,"div",17)(16,"div",18)(17,"div"),n(18),i(),r(19,"div"),n(20),i()(),r(21,"button",19),_("click",function(){let o=m(e).$implicit,a=c();return u(a.copyOriginAddress(o))}),n(22," \u{1F4CB} "),i()()(),r(23,"div")(24,"div",14)(25,"span",15),n(26,"Dropoff:"),i(),r(27,"span",16),n(28),b(29,"date"),i()(),r(30,"div",17)(31,"div",18)(32,"div"),n(33),i(),r(34,"div"),n(35),i()(),r(36,"button",19),_("click",function(){let o=m(e).$implicit,a=c();return u(a.copyDestinationAddress(o))}),n(37," \u{1F4CB} "),i()()()(),r(38,"div",20)(39,"div")(40,"span",16),n(41,"Order #: "),i(),r(42,"span",21),n(43),i()()(),r(44,"div",22)(45,"button",23),_("click",function(){let o=m(e).$implicit,a=c();return u(a.viewOrder(o))}),n(46," View Details "),i(),r(47,"button",23),_("click",function(){let o=m(e).$implicit,a=c();return u(a.uploadPoD(o))}),n(48," Upload PoD "),i(),g(49,K,2,0,"button",24),i()()}if(s&2){let e=t.$implicit,l=I(6),o=c();d(3),p(e.loadNumber),d(),x("ngIf",!o.isPartiallyDelivered(e))("ngIfElse",l),d(9),p(S(14,15,e.pickupDateAndTime,"EEE, MMM dd HH:mm")),d(5),p(e.originStreetAddress),d(2),C("",e.originCity,", ",e.originState," ",e.originZipcode,""),d(8),p(S(29,18,e.dropOffDateAndTime,"EEE, MMM dd HH:mm")),d(5),p(e.destinationStreetAddress),d(2),C("",e.destinationCity,", ",e.destinationState," ",e.destinationZipcode,""),d(8),p(e.orderNumber),d(6),x("ngIf",o.isReadyToComplete(e))}}function z(s,t){s&1&&(r(0,"div",8),n(1," No upcoming orders. "),i())}function J(s,t){if(s&1&&(r(0,"option",28),n(1),i()),s&2){let e=t.$implicit;x("value",e),d(),p(e)}}function Q(s,t){if(s&1){let e=f();r(0,"div",29)(1,"div",10)(2,"div",11),n(3),i(),r(4,"span",25)(5,"select",26),D("ngModelChange",function(o){let a=m(e).$implicit;return y(a.status,o)||(a.status=o),u(o)}),_("change",function(){let o=m(e).$implicit,a=c();return u(a.updateOrderStatus(o))}),g(6,J,2,2,"option",27),i()()(),r(7,"div",30)(8,"div",31)(9,"div",32)(10,"span",15),n(11,"Pickup:"),i(),r(12,"span",16),n(13),b(14,"date"),i()(),r(15,"div",33)(16,"div")(17,"div"),n(18),i(),r(19,"div"),n(20),i()(),r(21,"div")(22,"button",34),_("click",function(){let o=m(e).$implicit,a=c();return u(a.copyOriginAddress(o))}),n(23," \u{1F4CB} "),i()()()(),r(24,"div")(25,"div",32)(26,"span",15),n(27,"Dropoff:"),i(),r(28,"span",16),n(29),b(30,"date"),i()(),r(31,"div",33)(32,"div")(33,"div"),n(34),i(),r(35,"div"),n(36),i()(),r(37,"button",34),_("click",function(){let o=m(e).$implicit,a=c();return u(a.copyDestinationAddress(o))}),n(38," \u{1F4CB} "),i()()(),r(39,"div",35)(40,"div",36)(41,"span",16),n(42,"Order #:"),i(),r(43,"span",16),n(44),i()(),r(45,"button",23),_("click",function(){let o=m(e).$implicit,a=c();return u(a.viewOrder(o))}),n(46," View Details "),i()()()()}if(s&2){let e=t.$implicit,l=c();d(3),p(e.loadNumber),d(2),w("ngModel",e.status),d(),x("ngForOf",l.statuses),d(7),E(" ",S(14,14,e.pickupDateAndTime,"EEE, MMM dd HH:mm"),""),d(5),p(e.originStreetAddress),d(2),C("",e.originCity,", ",e.originState," ",e.originZipcode,""),d(9),E(" ",S(30,17,e.dropOffDateAndTime,"EEE, MMM dd HH:mm"),""),d(5),p(e.destinationStreetAddress),d(2),C("",e.destinationCity,", ",e.destinationState," ",e.destinationZipcode,""),d(8),p(e.orderNumber)}}var W=class s{constructor(t,e,l){this.router=t;this.ordersService=e;this.toastService=l}orders=[];statuses=[v.ASSIGNED,v.READY_FOR_PICKUP,v.IN_TRANSIT];currentOrders=[];upcomingOrders=[];ngOnInit(){this.loadOrders()}loadOrders(){this.ordersService.getDriverOrders().subscribe(t=>{this.orders=t,this.splitOrders()})}splitOrders(){this.currentOrders=this.orders.filter(t=>t.status===v.READY_FOR_PICKUP||t.status===v.IN_TRANSIT||t.status===v.PARTIALLY_DELIVERED),this.upcomingOrders=this.orders.filter(t=>t.status===v.ASSIGNED)}viewOrder(t){this.ordersService.setCurrentOrder(t),this.router.navigate(["/driver/order-detail",t.id])}uploadPoD(t){this.ordersService.setCurrentOrder(t),this.router.navigate(["/driver/upload-pod",t.id])}completeOrder(t){this.ordersService.setCurrentOrder(t),this.router.navigate(["/driver/complete-order",t.id])}copyOriginAddress(t){let e=`${t.originStreetAddress}, ${t.originCity}, ${t.originState} ${t.originZipcode}`;navigator.clipboard.writeText(e),this.toastService.showSuccess("Origin address copied to clipboard",2e3)}copyDestinationAddress(t){let e=`${t.destinationStreetAddress}, ${t.destinationCity}, ${t.destinationState} ${t.destinationZipcode}`;navigator.clipboard.writeText(e),this.toastService.showSuccess("Destination address copied to clipboard",2e3)}updateOrderStatus(t){this.ordersService.updateOrderStatus(t.id,t.status).subscribe(()=>{this.loadOrders(),this.toastService.showSuccess("Status updated.",2e3)})}isPartiallyDelivered(t){return t.status===v.PARTIALLY_DELIVERED}isReadyToComplete(t){return t.status===v.PARTIALLY_DELIVERED&&t.documents.some(e=>e.documentType==j.POD)}static \u0275fac=function(e){return new(e||s)(O(k),O(H),O($))};static \u0275cmp=h({type:s,selectors:[["app-driver-orders"]],decls:15,vars:4,consts:[["partiallyDelivered",""],[1,"max-w-md","mx-auto","pt-0"],[1,"text-2xl","font-bold","text-green-900","mb-4","flex","items-center","gap-2"],[1,"mb-6"],["class","text-gray-500 text-center py-4 bg-gray-50 rounded-lg",4,"ngIf"],["class","mb-3 rounded-xl shadow border border-green-200 bg-green-50 p-2 flex flex-col gap-2",4,"ngFor","ngForOf"],[1,"text-lg","font-semibold","text-blue-800","mb-3","flex","items-center","gap-2"],["class","mb-3 rounded-xl shadow border border-blue-200 bg-blue-50 p-2 flex flex-col gap-2",4,"ngFor","ngForOf"],[1,"text-gray-500","text-center","py-4","bg-gray-50","rounded-lg"],[1,"mb-3","rounded-xl","shadow","border","border-green-200","bg-green-50","p-2","flex","flex-col","gap-2"],[1,"flex","justify-between","items-center"],[1,"font-semibold","text-green-900"],["class","px-2 py-1 rounded text-s font-semibold",4,"ngIf","ngIfElse"],[1,"text-sm","text-gray-700","space-y-3"],[1,"flex","justify-between","items-center","mb-1"],[1,"font-semibold"],[1,"text-xs","text-gray-500"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"text-blue-600","hover:text-blue-800","p-1","ml-2",3,"click"],[1,"flex","justify-between","items-center","pt-2","border-t","border-green-200"],[1,"text-xs","font-medium"],[1,"flex","flex-row","justify-end","mt-2","gap-1"],[1,"bg-green-600","hover:bg-green-700","text-white","p-3","rounded","text-s","font-semibold","transition",3,"click"],["class","bg-green-600 hover:bg-green-700 text-white p-3 rounded text-s font-semibold transition",3,"click",4,"ngIf"],[1,"px-2","py-1","rounded","text-s","font-semibold"],[1,"bg-transparent","border-none","text-right","font-semibold","cursor-pointer","outline-none",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mb-3","rounded-xl","shadow","border","border-blue-200","bg-blue-50","p-2","flex","flex-col","gap-2"],[1,"text-sm","text-gray-700"],[1,"mb-2"],[1,"flex","flex-row","justify-between","gap-2"],[1,"ml-2","flex","flex-row","items-center","gap-2"],[1,"text-blue-600","hover:text-blue-800","p-1",3,"click"],[1,"flex","flex-row","items-center","justify-between","mt-2","gap-1"],[1,"flex","flex-col"]],template:function(e,l){e&1&&(r(0,"div",1)(1,"h2",2)(2,"span"),n(3,"\u{1F69B}"),i(),n(4," Current Orders "),i(),r(5,"div",3),g(6,Z,2,0,"div",4)(7,q,50,21,"div",5),i(),r(8,"div")(9,"h3",6)(10,"span"),n(11,"\u{1F4C5}"),i(),n(12," Upcoming Orders "),i(),g(13,z,2,0,"div",4)(14,Q,47,20,"div",7),i()()),e&2&&(d(6),x("ngIf",l.currentOrders.length===0),d(),x("ngForOf",l.currentOrders),d(6),x("ngIf",l.upcomingOrders.length===0),d(),x("ngForOf",l.upcomingOrders))},dependencies:[V,A,M,L,F,B,R,N,P],encapsulation:2})};export{W as CurrentOrdersComponent};
