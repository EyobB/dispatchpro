import{a as A,b as F}from"./chunk-FAZMLUFE.js";import{a as j}from"./chunk-6BX5BP67.js";import{a as E,c as h}from"./chunk-CFVKQP3S.js";import{a as M}from"./chunk-NTYF7ZMB.js";import{u as R}from"./chunk-SVMRWARE.js";import"./chunk-DC5KZ2EN.js";import{a as P}from"./chunk-DA7YCHM5.js";import"./chunk-3TXZS4HG.js";import"./chunk-5R44ZK2D.js";import"./chunk-XPCCV2FB.js";import{c as T,e as V,f as k}from"./chunk-KA6K7UZ3.js";import"./chunk-GDLZFIOX.js";import{l as I,m as O,p as C}from"./chunk-GEVPNXBN.js";import{Ab as D,Ja as d,Kb as w,Mb as b,Oa as u,Ta as S,Y as f,Ya as _,Z as x,eb as m,ib as r,jb as e,nb as g,qb as v,rb as p,wb as i,xb as s,yb as y}from"./chunk-YSP72ENP.js";function N(a,o){if(a&1){let n=g();r(0,"li",20)(1,"a",21),v("click",function(){let l=f(n).$implicit,c=p(2);return x(c.viewDocument(l))}),i(2),e(),r(3,"button",22),v("click",function(){let l=f(n).$implicit,c=p(2);return x(c.viewDocument(l))}),i(4,"View"),e()()}if(a&2){let n=o.$implicit;d(2),y(" ",n.fileName,"")}}function H(a,o){if(a&1&&(r(0,"div",18)(1,"div",11)(2,"span",7),i(3,"Proof of Delivery:"),e()(),_(4,N,5,1,"li",19),e()),a&2){let n=p();d(4),m("ngForOf",n.getPoDs())}}function B(a,o){if(a&1){let n=g();r(0,"button",23),v("click",function(){f(n);let l=p();return x(l.completeOrder())}),i(1," Complete Order "),e()}if(a&2){let n=p();m("disabled",n.order.status==="Delivered")}}var L=class a{constructor(o,n,t,l){this.orderService=o;this.route=n;this.router=t;this.toastService=l}order=new F;otherReason="";otherRemark="";podImage=null;currentDocument=new E;showDocumentViewer=!1;ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&this.orderService.getOrder(o).subscribe(n=>{if(!n){console.error("Order not found");return}this.order=n})}isPartiallyDelivered(){return this.order.status===A.PARTIALLY_DELIVERED}getPoDs(){return this.order.documents.filter(o=>o.documentType===h.POD)}hasPoDs(){return this.order.documents&&this.order.documents.length>0&&this.order.documents.some(o=>o.documentType===h.POD)}viewDocument(o){this.currentDocument=o,this.showDocumentViewer=!0}closeDocumentViewer(){this.showDocumentViewer=!1,this.currentDocument=new E}onDownloadError(o){console.error("Download failed:",o),this.toastService.showError("Failed to download document")}onPodSelected(o){let n=o.target;if(n.files&&n.files[0]){let t=new FileReader;t.onload=l=>{this.podImage=l.target.result},t.readAsDataURL(n.files[0])}}removePod(){this.podImage=null}completeOrder(){this.router.navigate(["/driver/complete-order",this.order.id])}static \u0275fac=function(n){return new(n||a)(u(M),u(T),u(V),u(P))};static \u0275cmp=S({type:a,selectors:[["app-order-detail"]],decls:61,vars:25,consts:[[1,"max-w-md","w-full","mx-auto","min-h-screen"],[1,"mb-4","flex","flex-row","justify-between","items-center"],[1,"text-2xl","font-bold","text-green-900","flex","items-center","gap-2"],["routerLink","/driver/current-orders",1,"text-green-800","cursor-pointer","hover:underline","flex","items-center","gap-1","font-medium"],[1,"text-xl"],[1,"rounded-xl","shadow","border","border-green-100","bg-green-50","p-4","mb-4"],[1,"flex","justify-between","items-start","mb-3"],[1,"font-semibold","text-gray-700"],[1,"text-right","font-medium"],[1,"text-right"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-between","items-center","mb-3"],[1,"px-2","py-1","bg-blue-600","text-white","rounded","text-sm","font-medium"],[1,"text-right","max-w-48"],[1,"flex","justify-between","items-start"],["class","mb-4",4,"ngIf"],[3,"close","downloadError","document","isVisible"],["class","w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow font-semibold transition mt-4",3,"disabled","click",4,"ngIf"],[1,"mb-4"],["class","flex justify-between bg-gray-100 p-2 mb-1 rounded",4,"ngFor","ngForOf"],[1,"flex","justify-between","bg-gray-100","p-2","mb-1","rounded"],["href","javascript:void(0)",1,"text-blue-500","underline","cursor-pointer",3,"click"],[1,"text-blue-600","hover:underline",3,"click"],[1,"w-full","bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","shadow","font-semibold","transition","mt-4",3,"click","disabled"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span"),i(4,"\u{1F4E6}"),e(),i(5," Order Details "),e(),r(6,"a",3)(7,"span",4),i(8,"\u2190"),e(),i(9," Go Back "),e()(),r(10,"div",5)(11,"div",6)(12,"span",7),i(13,"Load #:"),e(),r(14,"span",8),i(15),e()(),r(16,"div",6)(17,"span",7),i(18,"Pickup:"),e(),r(19,"div",9)(20,"div"),i(21),e(),r(22,"div"),i(23),e(),r(24,"div",10),i(25),w(26,"date"),e()()(),r(27,"div",6)(28,"span",7),i(29,"Dropoff:"),e(),r(30,"div",9)(31,"div"),i(32),e(),r(33,"div"),i(34),e(),r(35,"div",10),i(36),w(37,"date"),e()()(),r(38,"div",11)(39,"span",7),i(40,"Status:"),e(),r(41,"span",12),i(42),e()(),r(43,"div",11)(44,"span",7),i(45,"Order #:"),e(),r(46,"span",8),i(47),e()(),r(48,"div",6)(49,"span",7),i(50,"Description:"),e(),r(51,"span",13),i(52),e()(),r(53,"div",14)(54,"span",7),i(55,"Requirements:"),e(),r(56,"span",13),i(57),e()()(),_(58,H,5,1,"div",15),r(59,"app-document-viewer",16),v("close",function(){return t.closeDocumentViewer()})("downloadError",function(c){return t.onDownloadError(c)}),e(),_(60,B,2,1,"button",17),e()),n&2&&(d(15),s(t.order.loadNumber),d(6),s(t.order.originStreetAddress),d(2),D("",t.order.originCity,", ",t.order.originState," ",t.order.originZipcode,""),d(2),s(b(26,19,t.order.pickupDateAndTime,"EEE, MMM dd HH:mm")),d(7),s(t.order.destinationStreetAddress),d(2),D("",t.order.destinationCity,", ",t.order.destinationState," ",t.order.destinationZipcode,""),d(2),s(b(37,22,t.order.dropOffDateAndTime,"EEE, MMM dd HH:mm")),d(6),s(t.order.status),d(5),s(t.order.orderNumber),d(5),s(t.order.loadDescription),d(5),s(t.order.deliveryRequirements),d(),m("ngIf",t.hasPoDs()),d(),m("document",t.currentDocument)("isVisible",t.showDocumentViewer),d(),m("ngIf",t.isPartiallyDelivered()&&t.hasPoDs()))},dependencies:[O,I,R,C,k,j],encapsulation:2})};export{L as OrderDetailComponent};
